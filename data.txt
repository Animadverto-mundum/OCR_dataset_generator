第1章绪论1.1背景与意义在中国，高铁事业已经是我国向全球化发展的重心，这几年来，这个行业不仅改善了民生，还为人们的日常通勤提供了很多便利之处，不得不说，它为我国的经济建设也做出了很多贡献。由于我国铁路的高速发展，自然有了很多高速铁路建设的需求，铁路的快速发展对城市经济也影响巨大，不仅改善了人们的出行方式，也让城市与城市之间少了许多隔阂，所带动的物流，资金流等在不同的城市间也可以进行融合交互流通。在这个趋势下，人们对铁路系统的要求也逐渐提高，尤其是信号系统。在铁路系统中，列控数据扮演着尤其关键的角色，它是系统能够顺利运行的重要基础，也是让列车安全无误运行的数据，因此，列控数据作为中国高铁安全高效地运营的重要保证，对它的要求肯定要求高且多，比如，列控数据所传输的信息形式拥有许多特点，比如变化频繁多样，同时范围巨大等，它的交互维护保持也要求人力的保证，才可以万无一失，且编制依据与铁路行业规范密切相关，数据编制存在错误将为行车安全埋下极大的风险，所以必须对数据进行全面校验。为了保障乘客的安全和列车运行的精准无误，采取这样的方式非常有必要。那么这样做必然会直接影响到列控数据的管理，如何高效精准地管理数据就是我们需要深思的问题，一个优秀的管理平台固然重要，不仅能够做到以上功能，还可以减少人工的工作量，实现时间和人力的双赢。高速铁路的安全性是高度依赖列控数据的准确，而这次在CTCS-2级列控系统的基础上，将主要审核应答器所传输的一系列数据表，也就是工程数据中的一部分。应答器设备是列车从地面得到信息的可靠来源，它可以提供大量的报文来反映各方面的信息，比如线路坡度信息，线路速度信息等等。而它和列车之间传输的信息数据就是更改变化频繁的数据，同时，又可以反映列车所需的实时信息数据，并给出列车进路指示的一系列信息。因此，校核应答器数据是非常关键和有必要的。应答器数据无论是对于车辆还是地面都是首先需要检查审核的，高速铁路建设迅速在大范围内开展，所需的相应设备对数量要求也显著提高，列控数据的配置校核任务越来越繁重和艰巨，同时，对列控数据的准确性也提出了更高的要求，现有的列控数据检验系统面对时间紧任务重等挑战时，可能会出现一些不可避免的错误，因此，我们首先要用最准确的方法来校核实时数据来保证列车的安全稳定运行。为了能够更好地验证数据的正确性，我在研究该课题时希望能够通过建立一种基于规则引擎的应答器配置的验证数据的系统。它能够提取应答器反馈的大量数据再给出相应的报告指令。这个系统能够通过人机交互界面迅速地转换输入的数据的格式并快速利用规则引擎检验，同时也能够通过人机界面进行人工数据修改，最终完成对应答器输入数据的校验，以保障铁路行车的安全，希望这个系统能在完成并改良后最终投入现有的高铁运行系统的实际运营之中，更新高铁的数据校验系统，提高中国高铁的行车安全与运行效率。而这个课题相比现有的列控数据校验系统也有很多优势。基于规则引擎的数据校验系统能够自动地完成对于数据地校验，相对于现有地数据校验系统来说，对于数据地自动处理能力以及系统的简单性是现有系统无法比拟的。基于规则引擎的数据校验系统的另一个优势是能够更加形象直观的给出数据表的错误报告，甚至还可以给出修正的意见，极大的减少了人工工作的量，提高了数据的校核效率，避免了校核本身带来的二次错误，提高了数据的准确性。所以，基于规则引擎的列控数据校核系统在高速铁路上所带来的作用和现实意义是巨大的，能够大大减少现有数据校核系统的缺点。1.2国内外发展（应用）现状目前针对列控数据的审核方法，主要是国内的多篇文献有更加详细地描述。今天，无论列车在哪种情况下运行，列控数据都是其顺利运行的保障。在一个工程开通前，精确审核其列控数据，找出它的问题并及时修改，是让整个工程按时顺利开通的重要条件。很显然，在CTCS-2中，点式应答器是关键的基础信息传输设备，而这次的课题主要就是针对CTCS-2系统，应答器数据的重要性直接与铁路安全相关，因此保证它的准确性不言而喻。现如今国内几家权威大型设计院都在开发一套应答器数据的辅助校核系统，可是因为还没有经过实践的检验，所以都不是很成熟。在深入研究了铁总运的几篇文献后我对高铁技术规范也有了更加深刻的理解，之后应该可以结合现有高速铁路控车需要实现一个面向CTCS-2的列控工程数据辅助校核系统，来改变现在编制校核列控工程数据时候因为数据庞大繁杂而效率低下的问题。我们如果比较过去的数据校核方式，可以观察以前得到数据的制作过程。要得到列控数据，一般就要从工程数据表或者CAD工程图中得到一系列信息。其中一种方式是在数据表基础上获取信息的录入方式，要先将表中的信息转换成为工具能够识别的格式，这里就会用到格式转换的插件，图形化界面和数据生成插件，最后生成符合数据规范的应用数据文件。而现有的数据校核方式大致主要也有两种，一种是传统的数据测试，和集成测试比较相似，在测试的同时需要其他一些子系统的配合，也需要配置接口数据和逐条进路地做测试。这个方式虽然正确率较高，但是也有一些缺点：（1）数据审核肯定是需要测试的，这个中间可能会用到多个相关的系统，因此耗费大量时间、人力等是必然的（2）很多时候发现问题的源头也很困难，有时候就没办法得知到底是因为硬件设备还是运行线路而出现了问题。另一种校核方式就是建立在辅助工具中间数据库基础上进行检查。这种方式利用了CAD工程图上的信息，对数据进行提取录入再编制数据，最后审核。结合二者，将文件与保存的原有中间数据库进行对比，以此来保证数据的准确。但是这种方式依然存在一些缺点：（1）中间数据库是由软件识别的数据格式，工作人员如果对中间数据库不熟悉的话，如果遇到繁杂线路需要人为处理时，数据库就会对用户处于不可见的状态，无法人为干预。（2）如果数据的制作工具和校核工具发生一模一样的算法逻辑错误的时候，就无法校核。可以总结出，现有的列车控制系统得到的静态数据在列车开通之前经常改动，而改动数据则需要很多部门参与其中，从基础数据中的里程表，信号数据表以及区段信息表等等到工程数据的车站信息表，应答器位置表，线路数据表等等都需要相应部门的检查改正，重新提交，发布配置数据等流程也需要相应部门严密地检查。而每个部门每条线处理数据的方式也是不同的，应当根据不同的需求进行静态校核或者动态校核。而重点则是静态校核，那么静态校核则有以下步骤：（1）引入源表格，数据在进入系统时，几种表格包括工程、基础数据等的表格内容要进行统一比对。（2）再将工程和基础表格的内容进行类比。（3）在报文进入系统后，与存档的工程表进行内容一致性校核（4）最后报文引入同时配置也完成后，再二者分别进行对比检验。因此，建立一个良好的列控数据管理平台能够更好实现列控数据的科学管理与维护。而在国外，我们所了解的法国德国等研究高铁技术领先的国家，分别都研发了自己的铁路系统。ATC系统就是高铁的核心，那么日本的新干线ATC系统，德国和西班牙的LZB系统，法国TGV系统等等[6]。这些国家也都分别研发了自己独立且与之列控系统相匹配的列控工程数据校核系统，可以看出来，从全球各个国家的研究方向来说，列控数据的校核一定是逐渐自动化和智能化的。按照这个方向，目前国内北京通号设计院有限责任公司等单位也研发了一系列趋于自动化的系统来辅助列控数据的准确审核，比如基于数据表的数据审核技术，其思路主要就是通过数据制作产生的逆过程来生成和原始工程数据表格式一样的表格，借此对比两者之间的差异来确保应用数据文件的正确性。还有一些方法就不逐一介绍了。可以看出，列控工程数据表的填写说明和修改说明是非常详细的，因此，当要对某张列控工程数据表进行校核时，可能要用到其他的数据表，而每一张表的每一列内容都有详细且明确的制定规则，因此在审核时，对应答器名称，编号，里程，设备类型和用途等等都会有不同的规则制定。可查阅的相关资料如下所述：由文献[6]可知，西南交通大学的姚明阳对CTCS-2列控系统构成以及其应答器数据进行了具体的研究和开发，利用开发的软件对各个数据表进行自动化地编制，同时对国内外的系统进行了简要的分析。由文献[3]可知，陈娇娇对国内外列控数据编制进行了简要分析，他将人工智能与数据校核结合，利用合理的验证工具和算法建立事实库和知识库模型，将处理信息变得智能化，减少了很多人工审核的缺点。由文献[9]可知，现有的数据校核系统实现的具体过程和优缺点，以及列控数据发布的流程以及校核方式种类与主要内容。1.3论文所做工作及思路本论文以某铁路局管辖的实际线路列控数据为基础，对列控工程数据表的应答器数据做校验，根据铁路规范和标准提取验证规则，结合基础数据和CAD工程图，对列控工程数据进行一致性和逻辑性验证。主要分为以下几步：（1）针对研究题目，收集整理资料，做出现状分析。（2）分析现有的数据，确定校验选项和任务流程。（3）根据铁路一系列规则，提取数据校验规则。（4）设计规则引擎和验证模式。（5）通过编程实现数据校验并仿真。对完成该论文的计划主要是：（1）通过查阅列控工程数据校验方面的国内外研究文献，总结归纳现状和意义（2）通过分析工程数据特征和规范设计校验项和流程，（3）通过分析行业规范提取规范并建立规则引擎，具备基于科学原理并采用科学方法对复杂工程问题进行研究的能力；（4）利用编程工具结合Python和规则引擎框架工具来构建规则库和事实库完成校核功能。针对本论文为了保证应用数据文件内部特定的数据结构组织，包括设备间的联系，线路信息的重复使用等，需要在已有的校验系统上装上其他的环节与其他形式的校核方式，包括加装：1.应用数据文件导入2.图形化界面方式校核3.内部规则校核4.数据表自动生成5.数据表与原始数据表对比等等，加装这些系统与已有的数据校验系统结合才能提高其性能完成逐渐升高的对于数据校验的要求。然而系统的环节增加也会出现很多问题，系统的冗余的变多会使得系统校验的准确性与可靠性下降，而现有的数据校验系统的性能随着中国铁路的发展，最大里程数的增加以及对于安全性要求的提高，已经逐渐难以适应日渐提高的需求。1.4论文章节安排论文共分为五章。第1章绪论。在这里则具体介绍了研究的背景和意义，同时，国外与国内的研究现状和情况被简单地描述了一下，也清晰地阐明了该论文研究列控工程数据的现实意义和社会价值。第2章管理系统所针对的设备以及其数据详细分析。论文在这一章首先对CTCS-2列车控制系统总体进行了描述，包括其组成和工作原理，紧接着选出了设备中的点式应答器来做剖析，对其传输数据原理做出了解释，又仔细描述了它的布置规律和原则，对其信息包也进行了剖析。最后对课题所用技术进行了基本的讲解。第3章针对的应答器数据校核所需一系列设计分析。这一章主要是首先是简述了应答器布置模块的设计线路，接着提出了编制数据时的要求，再引入本次数据校核的需求，最后用流程图等方式告知应答器数据校核系统的总体设计。第4章针对怀衡线，对应答器布置规则的总结提取。本章主要是结合了铁路部门的颁发文件以及一系列科技运文献对该课题下CTCS-2级系统中应答器布置规则进行了提取和总结以及最后对细节的补充。第5章对校验管理系统的分析。这里主要是对系统的主界面进行了介绍，接着是内部操作，比如规则库和知识库的理解以及如何结合怀衡线进行运用编写，还有输出的分析。第2章系统基础概述2.1CTCS-2级列车控制系统概述在中国，高速铁路根据不一样的列车运行速度来划分等级，可以分为三种：第一种则是运行时速高达300km/h至350km/h的客运专线，这种速度划分为CTCS-3级列车自动控制系统，并只向动车组开行，比如武广高铁，京沪高铁则是这种情况；第二种就是设计时速达到200-250km/h的客运专线，比如北京-哈尔滨线路秦沈段就是个典型例子；而最后一种为时速达到200-250km/h的客货专线，这里不多描述。这三种情况下，第二种和第三种都是按照CTCS-2级列控系统的标准来严格建造的，唯一的区别是前者仅开行动车组，而后者还可以支持普通货车与货运列车的开行。现如今针对有线提速的200km/h的区段的所有动车组在经历了2011年的全国铁路大降速以后，速度都控制在了160公里每小时，因此不在高铁的范围内了。本论文是在CTCS-2级系统为背景的情况下展开的研究，CTCS-2级是通过地面上的轨道电路来获得行车许可MA的，线路数据的产生则为：先通过地面应答器接收到列车部分信息，再通过列车上的设备来结合工作生成一条控制曲线，由此可以来掌控列车运行状态。而CTCS-2级系统的车载设备是不会存储地面数据的，它依靠的是地面两种类型的应答器来发送信息，其中，有源应答器在地面上主要传输的是可变参数，比如临时变速等信息，无源则发送线路固定参数。不同类型，不同位置的应答器在发送数据时，都会结合车载的处理逻辑以及冗余性和可靠性等方面综合考虑。随着我国200km/h以上的区段数量与日俱增，如今铁路运输网中，主要采用的就是CTCS-2级列控系统，其自然成为了在国内使用率占比最大的列车控制技术。CTCS-2级列车控制系统的设备有很多，主要囊括了应答器、轨道电路、车站控制中心等，其各自的作用解释如下：（1）轨道电路：该设备主要实现列车的占用检查，同时它可以连续地向列车传送行车许可。（2）应答器：主要分为有源和无源应答器，二者之间有区别。固定线路参数由后者向列车的设备提供，比如，轨道区段长度，线路坡度等等。动态线路信息则主要由前者发送。（3）车站列控中心：根据限速调度命令以及线路参数等让有源应答器和轨道电路发送可变控车信息给车载设备[6]。2.2应答器设备概述在车-地双向通信中，应答器是传输的重要设备。应答器系统是通过电磁感应来通信的数据传输设备，主要的用途是向列车传送固定和可变信息，以此实现双向通信，应答器的两个种类不同的功能在上述内容中均有详细描述，而两种应答器在硬软件组成是相似的，相较于无源，有源应答器多了编码电路和有源界面，更加方便操作。当LEU和应答器发生通信故障无法解决时，会有备选的方法，即工作模式的转变，有源可以转变为无源来工作，发送缺省报文。不论是哪一种应答器，工作原理其实是一样的。列车进入该应答器工作的范围中，地面上的应答器就会接受电磁能量，以此作为内部模块的电源，应答器的时钟控制电路会被启动，其开始工作后，将ROM区域先存储的和LEU传输的报文送去频率合成器，最后列控车载设备会收到采用FSK调制方式产生相位连续的以564kb/s的速率发送的载频信号。2.3应答器设置原则分析在CTCS-2列控系统中，为了保证安全控车，应答器能够充分被利用，务必在安装、调试应答器等步骤时做到标准统一，参数和功能方面的要求才可以得到保证。而对应答器分类也有不同的标准，如果是设置地点的不同，在CTCS-2系统中通常将其分为三种。2.3.1区间应答器组的设置列控车载设备会获得的固定参数信息，列车时速还有一些特殊区段等信息都是由无源应答器组发送的。CTCS-2级列控系统在既有线会设置两到三个闭塞分区来间隔开，每个分区之间的距离大概是3公里到5公里之间，其中设置无源应答器组，在CTCS-2级中的客运专线，设置无源应答器的规则有所不同，可以只在间隔一个分区的地方布置，并且将它安置在离分区入口199.5米到200.5米处的地方，这样的布置方法可以为列车定位和车载设备工作提供正反方向前一定距离内固定参数信息。2.3.2车站应答器组的设置车站应答器组分为两种，第一种是进站信号机应答器组的设置。所有应答器组的设置都是会有距离的限制的，在这里，由有源和无源应答器构成的组合将会在距离正反向进站信号机外方29.5米到30.5米处布置，其中进站信号机有源应答器主要提供一些可变参数信息。正反向的线路允许速度，坡度，区段以及调车危险等固定参数信息将由无源应答器来传输。第二种是出站信号机对应应答器组的设置。在此处设置的组合同样是由有源应答器和无源应答器组成的应答器组，它们同样提供本线路临时限速，绝对停车以及在此处的调车危险等信息。如果距离出站信号机64.5米到65.5米处会设置应答器组，那就是在客货专线和客运专线的情况下。2.3.3特殊用途应答器组的设置很显然，在铁路线路种类繁多且设计不同的情况下，加上实地情况不尽相同，只设置两种固定应答器组并不能很好地契合适用于中国CTCS-2级系统的应答器应用需求，而在根据速度-距离式曲线行驶的模式下，列车必须要保证自身万无一失地运行。在某些特殊情况下要增设应答器组，比如等级转换点，中继站以及有可能影响列车运行的调车信号机处。除上述情况以外，在现场的工程设计和施工的时候，要注意以下布置问题：（1）为了提高列车运行的可靠性与安全性，需要通过增加一定量的应答器数量来保证线路上数据能够连续被覆盖，当碰上特殊地区的铁路线时，可能会因为地理因素而造成信息量的缺失，为了避免这样的情况发生，就要适当地增设一些应答器，由此给车载设备提供更充足的信息。（2）为了减少临时限速对普通列车的影响，主要有两种方式，一种是可以合理地依靠闭塞分区来规定临时限速区段的范围，除此以外，还可以在区段增加适量的应答器来控制动车组的运行时速，这个办法其实是在信息量适量的情况下代替进站信号机从红灯降黄灯。（3）当考虑到实际情况时，尤其在面临现场施工中，更应根据环境、线路设计来针对性地安装应答器，有以下几种情况。如果说相邻两个应答器中间的里程差大于1500米，就要在二者间多布置一个定位应答器来适应万一列车不能精准定位的情况。同时一定要根据不同的铁路轨道结构来采取不同的安装方法，比如现有的有砟轨道和无砟轨道区别比较大。更细致地是需要考虑到当应答器的位置与补偿电容的距离小于1.3米时，车载设备接收信息很有可能就会被影响，解决办法就是调整应答器的安装位置，若情况非常特殊，再考虑调整补偿电容的安装位置。如果调整后都还是不能满足需求则整组进行调整，但是范围必须控制在±0.5米内。2.4应答器信息包的概述与分析列车的车载设备接收应答器发送的包含控车信息的报文，而每条报文都是由一个帧标志——其中包含了50位报文包头和772位的用户信息包以及8位结束帧。在这里面，不同种类的应答器的功能定义和控车需要决定了772位的用户信息包由哪些组成。2.4.1应答器信息包结构及用途由于CTCS级列控系统实际上是完美匹配中国的形势研发出的系统，因此实际上某些方面是研究了欧洲列控系统以后，再在欧标的基础上研发而成，所以CTCS-2级系统中应答器信息包包含了两个部分，一个欧洲ETCS包，同时还有本国研发的CTCS包。首先ETCS信息包囊括了好几种级别的信息包，比如：属于ETCS-5的应答器链接包等等；CTCS信息包也囊括了很多种类比如：CTCS-2的临时限速包、CTCS-1的轨道区段包等等。每种信息包用途和结构都不同，比如：（1）CTCS-1轨道区段包：这个信息包总量是24n+70,n代表了有多个区段，70为基准量和增量之差。这个包的意义是表示了该区段的长度、载频等信息。（2）CTCS-1临时限速包：这个包的总量为38n+84,n表示需要临时限速的区段数量，84则同样是基准量与增量之间的差值,它的功能是描述临时限速起点、长度、速度等信息。（3）CTCS-1调车危险包：该信息包中所含信息总量为124，它的位置处在进站口或者出站口应答器的数据包中。2.4.2应答器信息包功能分析列车的运行方向不同，需求也不同，因此不同种类的应答器有各自的功能定义。而其不同点就是，会有多种信息包的组合以供车载设备计算行车控制路线，那么，CTCS-2级列控系统的主要应答器功能定义如下：（1）区间无源应答器组Q：在列车正向运行的时候，它包含有传输线路坡度，应答器链接，轨道区段等信息包，种类数量都更多。而反向运行时它只有应答器链接和特殊区段的信息包。（2）进站应答器组：正向的进站应答器组中只包含了线路坡度信息包，而反向除了绝对停车和应答器链接其他都基本包含。相比起无源，有源应答器组除了线路坡度信息包没包含，其他都有所涵盖。（3）出站应答器组：其无源应答器组只包含了线路坡度的信息包，而有源则完全相反，除了线路坡度信息包其余都有。还有其他一些种类的应答器信息包功能就不一一解释，它们主要包含的包主要就是在应答器链接，速度，特殊区段，临时限速等信息包中选择。2.4.3应答器链接关系及数据范围分析在CTCS-2级列控系统中，列车能否正常可靠运行的关键因素是信息包覆盖的数据范围描述信息是否准确关键，而每一条应答器报文都是由不同的信息包组成的。因此为了让列车运行准确无误且有保障，传输线路相关参数信息的应答器之间需要建立起关系，这样列车上的设备也可以通过当下收到的这个信息包来搜寻到下一个紧挨的应答器，一旦列车发现链接关系没有成功，列控车载设备会立刻反应并采取相应防护措施来保证列车运行的安全。在闭塞区间中，应答器组会有各自的覆盖范围，这个范围内基本上能够让列车接收到两组设备间的数据，意外发生时，比如列车损失了一个应答器组，运行也是安全稳定的，不会受到太大的影响。在实际情况下，进路类型和运行方向就决定了两组设备间的关系，同时也影响了设备包含的范围。2.5规则引擎技术的分析与应用规则引擎其实就是在规则库上建立的专家系统，英语是Rulebasedexpertsystem。专家系统的含义就是其实它是按照人类大脑的思维模式来处理信息，用测试的办法进行推理，同时用让人类能够理解的术语来证明和推理结论。一般情况下，规则引擎往往包含三个部分：首先是规则库，这也是很重要的一部分，其次是工作时候的内存和推理机，推理机更是整个系统的核心单元。规则库在这个课题中，通过钻研铁路上一系列应答器设置规则以及信息包里的数据映射规律来总结出来的一系列能够推理出最后正确结果的依据，这个过程中，工作内存起了至关重要的作用，它是一个相当于包含了所有事实的数据库，不仅可以记住系统此时此刻的状态，还可以对之前的操作进行记忆。推理机在推理出结果时就需要抓取这个数据库里的事实。它有两种推理的方式，一种是正向链，一种是反向链。前者主要是从事实最后得到正确的结论，而后者则是先假设要证明的结论是对的，再推理事实看是否合理。2.5.1规则引擎的应用场景分析当今社会，越来越多的企业为了创造更加灵活的方案而采用规则引擎技术。它的应用也是非常广泛的，这其中有规则库，里面有一种业务规则，它可以用来描述行业中的税收方案，学生成绩分析方案，铁路专线浮动票价以及价格优惠策略等。这种技术符合多种业务情况下的应用，原因可想而知，它大大减少了项目变化所带来的成本增长，同时减少了更新的时间，最显而易见的优势就是它是让工作人员都能够理解的自然语言。那将规则引擎运用在变化频繁且规则多的业务系统中就是再合适不过了。将这些规则存入特定的代码模块中，即使规则有变化，也可以很方便地改写。无论是在国外还是在国内，规则引擎已经在零售、保险、教育、运输、银行等行业得到了应用，作为现在管理数据的一种先进手段，应用在这次数量巨大且变化多样的应答器数据校核中，就可以事半功倍。2.5.2规则引擎的工作流程鉴于规则引擎是数据校验管理系统的核心工具，了解其组成也是相当重要的。在一个完整的管理系统中，它主要包括：推理机、规则库、知识库、工作内存等模块。而推理引擎是核心工作单元，它的组成如图3-5所示。图2-1：推理引擎在图2-1中，我们看到了三个大模块，分别是模式匹配器、议程和执行引擎，那他们分别的作用是决定什么时候执行规则以及执行顺序还有执行规则。这个单元直接决定了规则引擎执行的速度和质量，而整个架构图则如2-2图所示。图2-2基于规则引擎的系统架构图2.5.3规则引擎技术的种类如今，理论上规则引擎技术由于已经在各行各业多次利用，发展已经比较成熟了，它的性能相当实用，国内外也开发了不少产品，尤其是在商业产品和开源产品都占了不少市场份额变得十分有竞争力，在大家耳熟能详的银行、证券等金融方面也是得到了应用。那么规则引擎的种类自然是多种多样的，各自有各自的特点。到现在为止，为大家所熟知的规则引擎主要就有Drools、Clips、Jess、Pyke、PyClips等等。早期，国外的Sandia国家实验室研发出了Jess，ILOG公司则是开发了JRules，这两款商用的规则引擎产品是非常典型的代表。在此之后就被充分使用在了学术、工业等方面，成为了一个发展潜力巨大的专家系统开发平台。而除了商用的规则引擎产品以外，国外还有很多开源的，JBossRules规则引擎、Openrules、Mandarax等就是一个名叫JBoss公司开发出的开源规则引擎，从现在大众的使用度来说，JBossRules可以说是行业的领导者，它也是从Codehaus的一个叫Drools的开源项目发展而来，Drools可以说也是知名度非常高，它主要是有能够和Java匹配的API接口，因此在广大开发人员中很受欢迎，Drools后来被JBoss公司合并了，因此改了名字。现在已经是JBoss应用服务器的规则引擎了。而JBossRules是基于ReteOO算法实现的，这个算法是在Rete算法之上改进的。Rete算法是现有的处理效率最优的正向推理的算法，大多数的开源推理引擎都是采用的这个算法，比如还有一种规则引擎叫Pyke，它的底层语言主要由Python来编写。近几年，随着Python语言的大范围应用，它的基础代码库也越来越完善，不夸张地说，Python可以做课题里所需要的一切事情，无论是一开始登录系统的界面还是撰写规则的模块以及最后输出的表格都可以用它来实现。Python作为一个新兴的计算机语言，如今已经收录了大量的基础代码库，并且都是开源的，很多可以直接添加使用，具体功能更是囊括了从前端到后台的各种内容，所以有人称之为“内置马达”。好处就是用这门语言开发数据校核系统的话一些功能可以不用重新开发，可以用它内置的库，。当然，除此以外，它还有大量的第三方库，比如这次课题用到的xlwt和xlrd就是在处理表格时必不可少的两个第三方库，通过其API接口，我们可以直接将海量的表格数据引入并处理，而Pyke与Python紧密结合的特性，让它更便于实现所需的功能。Pyke中有正向推理也有反向推理，正向推理规则会在规则库被加载以后自动执行，其推理规则就是用“foreach…assert”关键字声明的，注意这里并没有用普遍的“if…then”。而反向则为推理规则是不会在规则库被加载以后自动执行的，它的执行时机是当程序向推理机提出问题时，再调用当前加载了的规则库处理这个问题。针对这次课题，分析其列控工程中的应答器海量的数据，考虑正向链是更好的选择，先通过表格数据的提取得出正确的结论，再和原有的事实进行对比。2.6本章小结本章全面分析了CTCS-2列车运行控制系统具体不同模块的工作原理以及主要构成其系统的设备，接着简单地叙述了CTCS-2级系统中应答器部分的工作原理，继而引入了对设置应答器的原则分析，其中主要有区间、车站和特殊用途应答器三种。布置好以后就是对应答器信息包的分析，主要先从每种信息包的结构用途等入手，接着是对它功能的分析，当应用在实地现场中时，就和它的使用范围有了联系，对应答器链接范围详细阐述，又对其数据模块编制的要求进行了分析，强调了编制数据的准确性、完整性和规范性。最后是针对本次课题所采用的规则引擎技术的介绍，主要是对应用场景、工作流程以及技术的种类进行了讲解。第3章应答器数据校验分析3.1应答器布置模块的设计从图2-1可知，应答器模块布置过程中会考虑到对各类数据表的一系列处理，因此在布置好应答器后，要对应答器的数据模块编制也要进行分析，才可以更好地分析出审核数据时的具体需求，最后能够得出总体的设计，因此在后文会对编制要求、需求以及总体设计进行详细地阐述。首先必须要明确，应答器的布置需要满足四个条件：第一个是务必要确保完整的数据发送与接收；第二是保证数据的冗余覆盖；第三则是分配应答器的时候必须要和车载逻辑保持一致；最后是要注意应答器的报文容量的上限。本文会把应答器布置模块根据CTCS-2列控系统划分为两个子功能系统，如图2-1所示。图3-1应答器布置模块的设计结构框图第一个子系统是对基础数据的预处理，那么结合现场提供的所有相关数据表，得到了大量实际可靠数据，就可以凭此来获取布置应答器时所需要的信息。第二个是设计CTCS-2级列控系统线路上的应答器对设置解决方案，首先要对应答器的信息包进行分析，主要就是根据不同应答器的功能实现和多种线路的行车需求来进行对应剖析；接着还要进一步解析应答器的数据范围，只有划定了范围，才可以对后期的设备应用有更准确的理解；最后根据CTCS-2级列控系统中的应答器布置规则（由文献提取），结合现场实际数据进行逻辑判断。当然，通过科技运一系列文献对应答器的命名，编号，安装等规则重新编制其位置表，同时提供容量检算表来检查应答器布置地是否合理[6]。3.2正线应答器数据模块编制要求应答器数据的准确会直接成为列车是否能够安全运行的因素，所以对它的编制要求有如下：（1）数据的准确性：CTCS-2级系统中的列控方式是目标-距离式，由于前车的坐标会成为后车运行速度参考的标准，所以应答器数据表中的长度信息对列车的控制非常关键，长度信息和线路的实际情况误差较大将直接影响到行车安全。（2）数据的完整性：应答器数据包括了CTCS-2级列控系统区段所包含的所有有关进路的信息，如果车载设备与列车控制继电器切换后，列车仍然可以安全准确地运行，则切换点往外的范围都要被囊括在设备控制区域里，所以像速度和轨道区段等信息都要被编制在该范围的应答器表中。警冲标（3）格式的规范性：应答器报文和列控中心设备输入的数据是应答器数据表的来源，因此要注意各种类型数据的规范性，比如信号机的规范、里程的表示、车站信息的表示等，文字与格式的统一规范必须在表中体现[8]。那么对于应答器数据表格，有如下一些具体要求举例与分析，不同的表格其填写编制的说明也是不一样的。首先，针对正线信号数据表如图3-1所示，要满足一系列规范。表3-1正线线路数据表车站名信号点轨道区段备注名称信号点里程信号点类型绝缘节类型名称编码制式载频长度（m）区段属性对于该表有以下编制的要求：（1）线路数据表有两个方向，分别是正向和反向，填表时要按照运行的方向来依次填。（2）填表时每个信号点必须要对应其防护的区段。（3）车站名要写其对应信号点所对应归属的车站名称，比如杨村所。（4）信号点名称、类型、绝缘节类型,轨道区段的名称、载频、区段属性这些数据一定要和CAD工程图，也就是要和工程对应的《信号设备平面布置图》一样。（5）信号点里程这一格数据，应该填写的是对应绝缘节的公里标，绝缘节有不同的类型，但是针对电气绝缘节的话，要选择对应方向的第一个调谐单元的公里标，无论正向或者反向都是同样的道理。（6）信号点的种类繁多，共有七种，依次是进出站信号机、通过信号机、进路信号机和调车信号机、出站口以及没有信号机。这里主要对通过信号机和没有信号机进行不同情况的分析。首先是当区段内没有信号机的时候，分离闭塞分区的信号点类型一定是“通过信号机”。如果不是分隔点，类型则为“没有信号机”。填写反向区间信号点类型时，当区间发送27.9H轨道占用检查码，闭塞分区处的信号机类型为“没有信号机”；当区间发送追踪码序时,反向闭塞分区处的信号机类型为“通过信号机”，反向接近区段当多个区段合并成一个闭塞分区时，合并区段之间的信号机类型为“没有信号机”[22]。（7）绝缘节有两种，分别是电气和机械绝缘节。（8）轨道区段长度应与实际线路一致,精确到米。这张表格的填写要按照列车正向运行方向按照批复顺序填写车站名称，并且中继站名称以中继站来填写。表3-3应答器位置表序号应答器名称应答器编号里程设备类型用途车站名称备注该表的填写说明有以下几点：（1）该表应该根据列车的正方向的运行来依次编写，进路分为正线和侧线，这里就要先从正线开始，再写侧线上的应答器组，这里就要注意要先从最靠近正线的第一根侧线开始写，同时正侧线之间要预留编号。（2）应答器组命名的规律是，以大写字母B开头，再加上信号机的名称，可能是阿拉伯数字也有可能是希腊数字，不同的形式代表了正线或者侧线，最后再添上“-1”、“-2”或“-3”，如果应答器组内只有一个应答器，则没有最后的序号，这个序号表示的是组内第几个应答器的信息，这个可能是有源或者无源的。（3）应答器编号应按“大区号-分区号-车站号-应答器单元编号-组内编号”格式填写，由单个应答器组成的应答器组不再填写组内编号，中继站单独分配车站编号[23]。（4）里程应填写应答器安装的实际线路运营里程精确到米（5）如果应答器为侧线股道出站应答器，备注中注明“侧线，侧线编号为“-1”，绝缘节到信号机之间的里程差”。如果应答器为侧线股道定位应答器，备注中注明“侧线”。如果应答器为非正线进站应答器，备注中注明“*线，进站编号为“-1”应答器距信号机(绝缘节)的距离(精确到米)"。对于应答器组名称和信号点不能对应的应答器组，应在备注中填写其对应的信号点名称。（6）应答器设备的类型就是无源和有源两种，两种传输的信息包不同，各有特点。（7）用途根据《列控系统应答器应用原则》中应答器的用途定义填写。（8）根据应答器所属车站填写车站名称。（9）如果有里程系或长短链等其他特殊说明，填写在备注中。3.3应答器数据校核的需求分析在说应答器数据以前，我们都明白列控数据会直接涉及控车安全，由于它同时跨多个专业，因此在开发管理检测系统的时候，为了保证审核数据的精确性，需要对系统有更高的要求。事实证明，很多时候在客运专线调试的时候都出现了结果不够准去的问题，所以采取一定的措施很重要。列控数据包括了既有线和新建线列控数据两大部分，它们的处理流程大相径，但是处理内容都可以涵盖为四种，如下图所示：图3-4列控数据分类明细在上图中，大量的应答器数据是工程数据编制的主要部分，所以应答器数据的审核必然更有必要，现如今人工智能在很多行业得到大量的应用。在信号系统设计方面,对数据的智能化也有着巨大的进步。从早期的手工绘图到计算机“人机对话”方式,人们早已开始重视起对信号数据处理的效率问题。随着全国列控建设的大规模展开，很多设计院也研发了自己的列控数据管理系统，但是也有一些不足之处。现在高铁建设对列控数据校核的准确性高效性需求很高，主要原因有三点，首先是时间紧任务量重。如今的高铁建设由于客运量巨大再加上运营的急迫，因此建设时间紧张，开展规模也很大，铁路局以及相关单位就要将产品的生产周期缩短，同时也不能降低产品的质量，还要提高产品的产能。再者，很显然包含了大量应答器数据的工程数据包含了海量的信息表格，其形式的多样化与变化的频繁都让技术人员更加迫切地需要一个合理高效地平台来管理这些数据。其次是表格数据中变化极其频繁，在铁路上，如果有环境的变化或者是技术人员在勘测时的改动更甚是对线路结构设计的改动都会让表格中的内容发生变更，然后就会影响工程配置，进而使线路设计、施工、调试、优化等过程也发生改变，无疑给要求时间紧任务重的工程造成很大的压力。最后则是设备的安全，这也是基础需求。海量的工程数据描述了线路范围相关的静态数据，这些也是列控设备执行各种算法前的基础与前提，直接影响其安全性和准确性。举个例子，如果应答器位置配置误差很大，就会导致里程数据等相关链接的信息产生错误，而速度配置发生错误的话就会导致列车超速更甚颠覆。后果都是不堪想象的，因此对各种配置的准确性要求必须要做到万无一失。3.4应答器数据校核管理系统的总体设计根据图3-4可知，列控数据主要包含了应答器位置表和线路速度表等，而该课题研究的针对应答器数据的分析则主要是对怀衡线的一系列数据信息表进行分析比对，其表格结构如图3-5所示。图3-5：怀衡线应答器数据信息表结构从3-5的结构图可以看出来，该课题的应答器数据是由很多表格组成，其中囊括了车站信息、里程信息、编号信息等等，这些内容详细地描述了整条怀衡线的基本结构，其中包括信号机、绝缘节以及应答器的具体布置结构等等。显然，每张表格都由不同的属性组成，比如车站信息表中就包含了车站的名称，不同车站对应的大区编号、分区编号、车站编号、股道数等，而线路数据表则表示了每个信号点对应的绝缘节坐标以及信号机坐标还有绝缘节类型等。正如图3-6所示，是怀衡线线路数据表的样例。图3-6：怀衡线线路数据表样例应答器数据由于其属性众多数据量巨大的原因，剖析这些数据的时候会发现这些数据之间存在一些重复和映射的现象，这种关系的存在也和我们后期校核数据带来了很大的帮助，比如，车站的名称在应答器位置表、车站信息表以及线路数据表中都有出现，且他们对应的内容也关联。而应答器也出现在了线路表中能够和信号点名称对应。综合现有的校核技术缺点，本文提出了基于Python规则引擎的列控工程应答器数据校核系统，系统的整体结构图如图3-7所示。图3-7：校核系统整体结构图而该课题所采用的技术路线主要就是，由于所参考的铁路工程图内容大，表格繁多且内容多变，因此参考了众多文献以后总结出了利用将规则融入代码中形成规则库的形式来完成这个系统的设计。首先就是铁路科技文献，结合结合怀衡线CAD区间坡度与应答器布置图总结出基础应答器一系列的布置要求，再结合各线路信号机等数据以及应答器有关数据总结出具体需要审核数据的规则。最后撰写出规则文档，将规则建模，形成对应的算法，并写出合理的登录界面与输出表格的界面。3.5本章小结本章首先介绍了应答器布置模块的设计思路，接着针对其数据模块提出了编制的要求，针对不同的应答器信息表提出了不同的规范，也为后文分析校核规则做下了铺垫。最后则是对应答器数据校核的需求分析，结合当今铁路发展的状况以及现有管理校核系统的不足，提出了铁路工作人员对一个完善高效准确无误的管理系统需求的迫切，综合这些，描述了本文所研究出的列控数据校核系统的整体结构设计和大概的技术路线。第4章校核系统规则分析与设计4.1应答器布置规则分析不同级别的系统设计上对应答器布置要求不一样，本课题在以200-250km/h的CTCS-2级列控系统为基础上，将应答器布置原则分为大致两种，一种是一般原则，另一种则是针对不同种类的应答器有各自特殊的设置原则方法。而以下的规则分析适用于所有线路。4.1.1一般原则简析无论是CTCS-2还是CTCS-3级列控系统中，一般原则都是可以完全应用的，主要有如下：（1）除了用来定位的应答器可以单独设置，其余一组内的应答器数量不能大于3个。（2）同组内的紧邻应答器之间的距离要在5m到5.5m之间，特殊情况只有为调车信号机服务的组内间距要大于等3m。（3）在进路信号机、区间中继站、正反向进站信号机、到发线信号机、调车信号机还有大号码道岔正向预告区段可以布置有源应答器组，在区间中可布置无源应答器组。（4）如图4-1相邻应答器组间的里程距离要大于200m，特殊情况就是动车段或者动车所内的相邻距离要大于等于35m。图4-1组间链接距离（5）一组内同一方向的信息包只可以有一个且切忌重复，有源中的数据要合理分配，且固定信息要设置在无源应答其中。（6）除了调车信号机所对应的应答器，其余所有应答器都应该被链接。（7）应答器组不能被设置在分相区中。4.1.2针对特殊应答器的原则分析（1）正反向区间应答器组设置原则不同，正向应该设在闭塞分区入口处外方如图4-2，而反向则应该设置在轨道电路绝缘节入口处外方，如图4-3，一定要根据实际情况确定位置。对于反向来说，如果进站口或者中继站在发送海量反向线路的数据时，有可能出现应答器容量不能满足要求的情况，就要中间设置一个单独的FQ来发送反向线路信息。图4-2正向区间应答器组示意图图4-3反向区间应答器组示意图（2）进出站车站应答器组设置规则也不尽相同。其中进站信号机外方设置的应答器组要包括两个无源和一个有源如图4-4所示。同时进出站所传输的信息包也有区别。而位于车站到发线的出站信号机外方应设置有源应答器组，同时它的位置要综合考虑站台端部、出站信号机距警冲标、安全保护距离或岔尖距离等战场情况。警冲标警冲标特殊情况比如动车段在警冲标受到股道长度限制时就要离出站警冲标信号机不能小于等于15米如图4-5所示。图4-4进站信号机应答器组示意图警冲标图4-5出站信号机应答器组示意图（3）针对进路应答器组所分的类别则更多一警冲标些，第一种情况就是当进路信号机是作为接车、接发车进路信号机的时候警冲标，它的设置方式和发送原则就要按照进站应答器组来设置警冲标。若是进路信号机作为发车进路信号机时，就要按照出站应答器组来布置。而当其防护的进路唯一的时候，此时不用设置应答器组了或者单独布置无源应答器组也可行。另一种情况就是在动车段内的进路信号机还要兼顾调车的作用，因此进路兼调车信号机的应答器应设置在离信号机19.5m到20.5m处的地方，且应该是有源的。只有当股道长度被限制的时候才可以小于15m。（4）对调车应答器组的设置而言，由于突然出现的调车信号可能会危及到列车的安全，因此要在信号机外方不小于15m的地方设置应答器组，动车段的话则因场地限制可以适当移动位置。对于列车进路上的调车信号机，当其信号不开放时，有源应答器发送调车危险信息，而非进路的话同样情况就是发送停车报文，信号开发就发送空报文。（5）定位应答器组布置在当CTCS-2级区段丢失一个应答器组后相邻的距离大于了5000m，它就可以用来定位。在正反向车站进站信号机外249.5m到250.5m处设置也是用于列车定位如图4-4所示。其作用主要是提供线路里程和车站名称等辅助信息。同时，当相邻应答器组距离不能满足条件时它可以和相邻的合并。（6）中继站应答器组设置如图4-6所示，每一组内均有两个无源，且第三个用于发送临时限速、线路数据等动态消息的应答器为有源。图4-6中继站应答器组示意图4.2线路规则提取本课题针对怀衡线的一系列源数据表，来实现对数据审核的目的。怀衡线是从怀化南站引出，中间设置了怀化南站、安江东站、江口站、西渡站、颜家龚站等16个车站正线全长318公里的国家一级双线电气化快速铁路，其时速为200km/h，是典型的CTCS-2级列车运行控制系统，这条线在2018年12月26日正式通车。怀衡线拥有强大的规划运输能力，每日可以运输客车50对，每年可运货5000万吨。也正因如此，对其列控数据准确的要求会更高，应答器数据的准确也直接影响了控车的安全。4.2.1针对源数据表的规则总结根据怀衡线的区间坡度及应答器布置CAD工程图，可以将图上的信号机坐标与名称和怀衡线怀化南至衡阳东站线路数据表中的信号点坐标里程一一对应，同时也可以看出线路表中的车站名等也可以与位置表对应，那么，这些数据表中的参数都是有一些映射的关系的，通过这些反复出现或者映射的关系就可以推导出审核数据模块的规则，最后再转换成规则库代码。怀衡线怀化南至衡阳东站应答器位置表是本课题主要需要审核的表格如表4-7所示，其中包含了应答器的名称、编号等多列，审核每一列的信息都是需要其他表格来作为基础。表4-1怀衡线应答器位置表示例怀邵衡线怀化南至衡阳东站下行线应答器位置表序号应答器名称应答器编号里程设备类型用途备注车站1BSXII-1105-3-01-003-1K13+767有源FCZ进站/进路/出站有源组怀化南怀邵衡场2BSXII-2105-3-01-003-2K13+772无源FCZ怀化南怀邵衡场280BX-1105-3-11-017-1K158+810无源JZ邵阳西281BX-2105-3-11-017-2K158+815无源JZ邵阳西282BX-3105-3-11-017-3K158+820有源JZ进站/进路/出站有源组邵阳西按表4-1所示，我们对每一列的审核路线是不同的，大致分为以下几种。（1）名称列的校核规则：名称之前还有序号，序号先写正线再写侧线应答器，同时，侧线要以临近正线的第一个股道开始填写。观察表格中的样例，可以总结出命名时的格式是：B+S/X/D/公里标前三位+信号机序号，其中S,X分别代表上行和下行，D代表调车信号机对应的应答器，公里标则要结合CAD工程图来确定，名称中，正线用罗马数字表示，侧线用阿拉伯数字表示，序号中的-1和-2必须同时存在否则就不标，不能超过-3。所以对这一列的校核主要就是对格式的审核看其能否符合要求，警冲标比如侧线应该用阿拉伯数字却用了罗马数字就是错误的名称。（2）编号列的校核规则：这一列的规则需要用到车站信息表和位置表直接的映射关系来检查，由于位置表中的车站名和车站信息表中的车站名相对应，因此可以凭借这点来找到信息表中的大区编号分区编号和车站号组成编号的前三组数字，第四组数字是不用检查的，第五组数字就是和名称最后的序号一模一样，最后组成正确标准的答案再和原表格中的编号进行对比，简单来说这个思想如图4-7所示。图4-7编号列校核流程（3）里程列校核规则：要正确审核这一列需要的工作量更大，因为所参考的标准更多，针对怀衡线下行线主要是要用到线路数据表中的信号点以及绝缘节等里程坐标来判断。首先要注意的里程单位换算的问题，因为这一列的最后几行是MYK开头的格式，所以查阅里程转换表可以发现，MYK0+000等于K322+099，因此无论是MYK多少都要在322099的基础上加减。然后是，在存在组内编号的情况下相邻应答器里程差d要满足5m<=d<=5.5m，因此要用组内同名序号不同但相邻的里程来最差满足条件即正确。除第二位为D仅用于调车信号机的应答器，相邻组之间里程差要大于200m，也就是说不同名称（不同组）但距离最近的应答器里程要相减看是否满足条件。车站正线应答器组和距离最近的绝缘节里程差要不小于30m如图4-10所示，区间应答器组距绝缘节不小于200m，进站信号机外方设置的有源应答器组要距离进站信号机29.5m到30.5m，正反出站信号机距离有源都要大于等于20m这几条规则都是和图4-8同理。图4-8审核绝缘节和应答器里程差是否满足条件的规则（4）设备类型列校核：设备类型主要有无源和有源两种。而检查这两种的方式就是通过应答器的名称以及用途来判断。（5）设备用途列校核：这一列主要是对进出站信号机进行校验看是否符合，举个例子，在位置表中的第一行，截取应答器名称中第二位到“-”前的字符，SXII，对应车站的怀化南怀邵衡场，再去线路数据表中下行反向中找，对应到559行可以看出，信号点是反向出站信号机，则应答器位置表中的FCZ正确。4.2.2规则细节的补充虽然校核规则已经比较清晰了，但因为列控数据作为基础数据，经常被各部门直接使用，有的部门也会将其运用在数据配置或系统开发时的数据源，所以列控数据在格式上都是固定的，比如应答器的编号前三列是不能改变的，必须对应大区号分区号车站号，而里程标的格式类型普遍是“K***+***”，若不是也要进行公里转换，化成同一形式进行计算。如今即使铁路部门相关文件对数据格式有一定要求，但是仍然不够严格，因此也可以在怀衡线位置表中看到，有不同形式的公里标出现，甚至还有ZK、YK等开头的里程，此时就要用到里程转换表，里面有几种详细的单位转换，如4-2表格所示。表4-2公里标转换示意表怀衡线怀化南至衡阳东站线路里程转换表序号线名变换前行别变换前里程系公里标变换后行别变换后里程系公里标备注1怀衡线下行线K17+492下行线HHXK2+713变换前里程：怀衡线里程；变换后里程：怀化南怀衡下行线里程；变换点：杨村所3#道岔岔尖处2怀衡线上行线K16+580上行线HHSK1+746变换前里程：怀衡线里程；变换后里程：怀化南怀衡上行线里程；变换点：杨村所2#道岔岔尖处3怀衡线下行线K322+099单线MYK0+000变换前里程：怀衡线里程；变换后里程：麻颜联络线里程；变换点：咸塘站10#道岔岔尖处除此以外，信号机的命名也是既与其类型有关，也和它防护的方向，公里标等有关，所以格式宽泛，随着铁路技术的变化其格式也会发生变化，而本课题中主要采用的就是用目前列控数据常用的格式作为基础规则来进行筛选。4.3本章小结本章节一开始就将适用于所有线路的应答器布置规则分为一般规则和不同类别应答器的规则来分别描述，首先一般规则也代表所有应答器都要遵循的原则，而不同种类在距离、数量等设置上都有一些区别。然后针对怀衡线对每一列数据模块的具体规则进行了分析，尤其是关于其映射关系等关联总结出的逻辑用实例进行了阐明，最后对应答器数据的格式、单位等细节进行了剖析。第5章基于规则引擎的校验系统实现整个校验系统的实现流程整体上分为三步，第一步，对数据进行预处理，将“怀衡线怀化南至衡阳东站应答器位置表”内的数据进行清洗，删掉重复的内容，改正错误数据，保持数据的一致性；第二步，编写规则引擎并将结果输出；最后一步，为了让用户有更好的交互体验，使用Python标准的GUI工具包接口tkinter编写一个界面。5.1数据预处理数据预处理的流程是首先要选择数据的子集，将不需要用的列删除，避免数据集的冗余。由于在校验过程中，备注列和最后两列数据目前暂时不校验，所以在读入表中的数据时，不读入或者删除最后两列数据。接着是去除重复数据，观察表格，可能会出现一个应答器出现多次的情况，而应答器名是唯一标识应答器的字段，所以我们可以将应答器名重复的数据删除掉。接着是一致化处理，保证数据有统一的命名或者标准。由于里程列单位不一致，比如K321+187和MYK0+493就是两种不同的里程系公里标，由于不同形式的公里标出现，甚至还有ZK、YK等开头的里程，所以需要对里程列进行一致化处理，一致转化为以K开头的公里标形式。图5-1不同单位公里标举例最后是缺失值处理，一般情况下，缺失值处理有四种方法，分别是人工手动补全，删除缺失数据，用统计模型计算值代替，用平均值代替。在应答器位置表中，一些里程数据会有缺失，对于这些缺失值，我采用的办法是删除缺失数据。5.2规则库和事实库设计与实现在本课题中，主要采用了pyke逻辑编程中的正向逻辑推理，即推理机通过事实进行规则的处理从而能够获取到新事实的推理过程。在事实库中用的是pyke独有的语言，我们称之为statement，而这个陈述中包含了一系列参数，它们可以是python语言中的任意基本数据类型，比如数值、string或元组tuple等，完整书写它们的时候可以加入事实库的名称作为前缀，比如：statement.warning(Bruce,Thomas,Norma)。这里要描述的事实就是Bruce,Thomas,Norma之间的关系。在statement中的变量及数据绑定也是需要注意的，通常用$开头来声明变量，匿名变量不会绑定数值的。在规则库中也要懂得引擎的推理过程，如图5-2所示。图5-2规则匹配过程也就是说，如果pyke成功证明了一条规则前提，接着它就会顺序地求证if块中的下一条前提，直到尝试到求证if块中最后一条前提成功，则此rule成功。与此同时，如果说它没能证明某一条前提，pyke会退回到上一条前提并寻找其他规则来匹配，接着再决定是否回退。所以每一步都是要在前驱中发现可行的解决规则。如果说一直到尝试退回到if块中的第一条前提仍未得解，则该rule失败。5.5本章小结本章主要讲解了编制软件实现功能与界面操作。首先是对原始数据的预先处理，将明显不符合常理的数据或者有缺省的数据内容去除。接着就是对本课题所需要的正向推理进行了分析，同时讲解了在这个课题里是如何运用正向推理来实现对应答器数据的校验。其中对规则库和知识库的语言特点以及引用方式进行了阐述，着重讲解了pyke在该课题中的运用，结合怀衡线怀化南至衡阳东站应答器位置表和其他表格将知识库中的事实简要解释。然后是主界面的展示与介绍，对主界面的编写过程进行了简要的叙述，又对所需的开源包简单介绍了一下，讲解了如何运用在了本课题中，做出一个清晰明了的可视化界面，这其中某些模块的代码用伪代码的方式进行了解释。最后是对软件测试效果进行了介绍与展示。结论本论文在基于CTCS-2级列控系统的背景下，按照其对应的的应答器应用原则，加上中国铁路总公司关于列控数据管理暂行办法的规范和要求，再结合怀衡线实地的列控工程数据表，在python的编程环境下，能够按照要求实现对该条线路上大量应答器数据的管理与审核，该系统能够在保证铁路信号数据交互的快速变化和范围广泛的情况下，极大提高了数据校核的速度和准确性。现如今中国高铁发展迅猛，基于规则引擎的应答器数据管理校验系统也会在未来发挥更多的作用。该论文主要完成了以下几个方面的工作：1.结合现场勘测的怀衡线应答器相关数据以及列控系统应答器应用原则，包括规定了CTCS-2级应答器设置以及报文编制原则等标准归纳了适用于怀衡线的应答器布置标准。2.由现场的里程数据以及CAD工程图补全了信号机表格并根据里程转换公式表格将所有里程单位统一，方便后期检验。3.由设备布置标准以及多个铁路部门文献提取了适用于本课题的针对应答器名称、编号、里程数、设备用途以及类型进行校验规则的明确说明，并总结成可融入规则库中的算法。4.针对怀衡线怀化南至衡阳东站应答器位置表中的校验需求，设计出合理的开始主界面，即便于工作人员录入源数据。再设计出能够匹配源数据表的规则库和知识库并调用，利用引擎对上千条源数据进行校验并将错误数据识别同时修正。5.对审核最终结果进行合理格式地输出，在本课题中采用了输出一个新表格，其中包含了正确或错误结果，如果是正确的则保持原样，但是若错误则会标黄并给出错误原因同时改正。目前整个系统基本上是满足设计需求的，但是仍然有一些不足之处：1.针对少数特殊应答器组的里程数校验仍然需要进一步探讨出解决办法。2.针对应答器位置表中的备注等列数据如何校验其正确性仍需讨论解决。3.对结果的输出需要进一步优化。第1章绪论1.1背景与意义当今对于铁路信号系统的车站联锁系统和区间闭塞系统的学习、研究、测试都停留在单一的车站上位机控制台界面，或者是实验室中的区间闭塞系统模拟行车界面以及抽象的列车运行过程描述，又或者是在现场去实地考察学习。上述对于信号系统的学习方法对于初学者而言并不是那么直观的、清楚的展示与介绍出来，而且内容形式过于单一，也很难模拟出整个完整的联锁过程，只能现场、车站二者选其一进行观察，所以目前对于信号系统的学习难度很大，过于抽象。在实际铁路信号现场，当设备出现故障时，使用二分法也不能很快的找出故障位置进行解决，这是因为现场实际的线路复杂程度很高，无法很快很直观的找出问题原因。若不能及时的解决信号设备的故障问题，那会大大降低行车效率，所以对于故障的模拟排查工作是很有必要的。随着铁路运行维护信息化水平的不断提高，BIM技术逐步在铁路的建设和运维中推进，铁路对更智能化和先进的运维系统需求不断增强。要将BIM技术引入到铁路的运维中，除了需构建铁路运行三维视景仿真系统，还需实现铁路信号控制系统与三维视景系统的通信接口设计，将控制系统中有关设备状态数据转发到三维视景系统中，三维视景系统根据接收到数据能够动态的控制虚拟模型，实现三维场景与控制系统一致。论文主要通过对铁路现场设备的调研和原有的铁路信号维护系统的需求分析，设计铁路信号检测系统与三维视景系统间的通信接口，该模块是系统实现铁路信号设备可视化管理与维护的主要模块，系统采用BIM技术和虚拟现实技术实现模型可控功能，利用各专业领域信息并运用Unity软件接收运维系统的数据，采用开发虚拟现实系统的Unity3D引擎将设备三维模型渲染到虚拟场景中，并实现运维的三维场景复现。论文工作对铁路运维的三维信息化提供坚实的基础支持，也能为铁路虚拟实验教学提供技术支持。基于上面的三个问题，本课题给出了一个解决方案，那就是通过设计铁路信号系统的接口，能够将常规的上位机界面或者区间模拟行车系统的界面与能够进行3D模拟可视化的软件进行相互通信，这个工作可以在该系统的设计过程中进行，在系统的调试过程中能够更加精确清晰；也能够在已经投入使用的信号系统中进行使用，使其连接上一个三维开发平台，对于现场的实际情况能够更快速地了解，对于故障的解决能够带来更大便利，对于初学者的学习也更加直观。本课题研究的主要目的就是如何将C#所开发的信号系统程序与Unity3D开发软件进行通信以及它们之间的数据处理。1.2国内外发展（应用）现状铁路信号系统是保障铁路行车安全的基础系统[1,2]，同时也是铁路系统中及其重要的组成部分，只有在充分保障信号系统长期、稳定运行的前提下，铁路运输才能同时保障安全性与效率，此外铁路信号系统还能改善车务人员的劳工条件，因此，加强对信号系统的研究十分有必要[3]。对于信号系统的研究无外乎是包括了对整个联锁动作过程和实际效果以及起到的防护作用的研究、故障-安全的研究这两大方面，同时还要尽量提高线路能力，降低建设和运营成本[4-6]。目前铁路信号设备的故障因素包含多种：设备因素、电气化条件因素、电缆电源因素、雷电因素等[7]。要在短时间内进行故障排查是相当困难的事情，目前用的比较多的二分法也不可避免的要涉及到复杂的电路图中，看起来非常抽象[8]。目前，我国铁路已进入一个崭新的发展阶段，这个新阶段，路网结构、生产布局调整、运输组织以及铁路产品等许多方面都发生了重大变化[9-10]。传统的二维信号工程设计在实际应用中存在着多方面的问题，诸如差错率过大、遗漏率过高等，给铁路信号工程带来了诸多的问题以及隐患[11]。为了解决二维信号工程中存在的问题，在当前的铁路信号工程中，我们更多地运用到了BIM技术，将铁路信号工程从二维的层次转变到了三维，从而提高了铁路工程的设计和施工管理水平[12]。?并且BIM技术引入到铁路信号中能够更加直观的进行设计与观察，为铁路信号工程设计带来了极大的便利[13]。除此之外，随着铁路设备和技术不断的更新与发展，需要大量具有较高技术应用能力的技能人才，这对铁路高校教学及相关人员培训提出了更高要求[14]。然而由于铁路专业的特殊性，以及培训资源的匮乏，很难在真实的环境中进行铁路信号设备操作及相关作业办理，这些都是铁路相关人员学习提高与发展的阻碍[15]。因此找到一种易于实施，又能直观、形象、具备良好互动性的学习培训方法有非常高的实际意义[16]。目前为了进行更加清晰直观的铁路信号专业培训，有人已经提出设计一个基于虚拟现实的铁路信号培训系统设计，而要实现这个目标，所采取的方案是不易实现的，并且成本也是一个很大的问题。而如果能直接设计出一个C#接口能够使车站上位机界面和区间模拟闭塞系统跟3D模拟软件进行通信和数据处理，那对于这种铁路信号培训系统设计的实现是能够提供很大帮助的，能够更好地解决学习、设计和现场中所出现的这一系列问题。1.3论文所做工作及思路本文是参照一个已有车站的平面布置图、联锁表以及车站外区间的线路图进行C#的计算机联锁系统上位机控制台界面编写以及模拟列车进站、出站，完成Socket接口通信能够实现与Unity中的数据交换，完成对模拟信号系统的联锁控制流程。最终会完成四个方面的设计，第一个方面是编写完整的车站计算机联锁系统上位机界面控制；第二个方面是实现模拟列车运行；第三个方面是完成Socket的接口设计及数据处理；第四个方面是实现VS与Unity间的通信。本文利用C#进行计算机联锁系统上位机界面的编译，并实现C#的Socket通信代码编译，建立Socket通信。对于C#与Unity之间的Socket通信，目前已经有成功建立的案例，对于模拟行车方面的同步性要求更高，需要更加细致的代码编写。在同一个局域网中与另一台开启了Unity程序的计算机进行通信试验，完成了Socket通信建立过程后，在C#控制界面中发送指令，观察另一台计算机的数据接收情况以及控制命令的执行情况。1.4论文章节安排论文共分5章。第1章绪论：对本论文的背景与意义、国内外发展现状以及论文所做的工作和论文的总体设计思路进行介绍。第2章实验环境及应用介绍：分别是对所应用到的软件VisualStudio和Unity的相关介绍以及对BIM设计应用于铁路信号设计领域的现状分析。第3章库宗桥站联锁界面设计：实现该车站整体的联锁功能并且介绍相应的程序设计。第4章联锁界面的站内行车模拟：实现站内模拟行车并且介绍相应的程序设计。第5章上位机与三维站场的接口设计：介绍通信接口的设计原理以及建立二维与三维的连接过程和功能应用。第2章实验环境及应用介绍本文主要用到的两个开发平台分别是VisualStudio应用程序开发平台以及2017版本的Unity3D这款游戏开发工具。在VS这个开发工具集下，使用的是C#Windows窗体开发，它不仅能参照站场的室外设备布置图完整绘制出整个联锁的控制界面，还能利用其成熟快捷地程序设计方式完成对控件的功能编译，以满足联锁的各项功能条件，最后可以通过各种颜色变化清晰地展现出不同的操作方式。在Unity3D中，利用其游戏设计的引擎，能够将已经建立好的站场模型拼接成一个整体并且赋予了每个信号设备相应的功能，能够直观地观察出联锁操作办理过程中各个信号设备的状态改变。下面我们就来先来对这两款软件进行介绍，并且对于BIM技术的应用趋势也会进行相应的分析。2.1VisualStudio介绍2.1.1基本简介MicrosoftVisualStudio(简称VS)是美国微软公司的开发工具包系列产品。VS是一个基本完整的开发工具集，它包括了整个软件生命周期中所需要的大部分工具，如UML工具、代码管控工具、集成开发环境等。所写的目标代码适用于微软支持的所有平台。VisualStudio是最流行的Windows平台应用程序的集成开发环境。2.1.2VS2015VisualStudio2015预览包含许多新的功能，以支持跨平台移动开发、web和云开发、IDE生产力增强。本论文设计所使用的VisualStudio版本为2015版本。1.VS2015的新功能（1）能够创建跨平台运行的ASP.NET5网站(包括Windows、Linux和Mac)。（2）集成了对构建跨设备运行的应用的支持。（3）连接服务(ConnectedServices)体验更轻松(可方便地在app中集成平台服务)。（4）智能单元测试:VisualStudio2015已整合来自微软研究院的单元测试技术。（5）全新的代码编译效率。2.1.3C#Windows窗体通过创建C#Windows窗体来作为联锁界面开发的环境，再增添LineShape、OvalShape等工具，就能完成整个站场图的界面绘制，就可以开始对联锁系统进行代码编写，对每个控件都能方便的编写代码，是一个很适合的开发环境。C#Windows窗体创建如图2-1，Windows窗体界面如图2-2。2.2Unity3D介绍2.2.1基本简介Unity3D是丹麦Unity公司开发的游戏开发工具。而它作为一款跨平台的游戏开发工具，从一开始就被设计成了易于使用的产品。一个很好的利用特点是支持了包含IOS，ANDROID，WEB，PS3，XBOX等多个平台的发布。具体的特性包含整合的编辑器、跨平台发布等特性[17]。2.2.2Unity3D特点1.统一的编辑器Unity3D一个编辑器就能够支持各种平台，可以任意在编辑器中选择一种平台来预览你的作品。2.延迟渲染Unity3D最突出的就是先进的延迟照明系统，使用了G缓冲器，牺牲一点性能损耗就能获取大量的高端图像效果，性价比突出。3.Beast光照贴图Unity3D拥有着行业最顶级的光照贴图技术。使用Beast光照贴图可以呈现物体的即时动态光影互动效果，当物体接近时，Unity会无缝的调整光线，使我们能观察到阴影和凹凸细节。4.镜头特效提供了光羽、高品质景深、内部镜头反射、轮廓线和深度感知颜色校正。5.音频技术Unity3D带来了对音场区、过滤器和文件追踪的支持，并且将许多其他好东西都收纳其中，并且还推出了可编辑衰减曲线，可以让我们完全控制声音环境。6.资产管理Unity3D中添加了内容管理器，当我们在开发大型项目时，能够快速查找你的“资产”，可以用预览的方式显示所有内容。7.源代码级调试器Unity3D中引入脚本调试，无论是Windows系统还是Mac系统都可以实现逐行单步调试，为代码编译带来极大便利。8.遮挡剔除将它集成到Unity中，可以同时在移动设备、网络和游戏机上运行。Unity3D界面如图2-3。2.3BIM技术在铁路信号设计中的应用现状2.3.1应用现状1.BIM技术在铁路信号中数据管理方面的应用意义因为在铁路信号设备的实际运行过程中，如果数据管理库的更新时间间隔较长，或更新不完全，就会导致很多实时性的信息没有进入数据库中，这对于整个信号设备而言很不利。引入BIM技术后，就可以建立一个虚拟的BIM模型进行管理，其优势在于计划、使用等诸多方面。在该模型中，所有工作人员都可以知道信号设备具体的运行情况，并且可以清楚的看到线路空间布局，这是传统技术无法实现的。目前有着基于BIM的铁路信号室外设备三维布置的设计案例。这样设计的好处是能够提高铁路信号BIM设计中室外设备三维布置的精确度和效率，该方法的设计思路如下：图2-4基于BIM的铁路信号室外设备三维布置设计原理2.BIM技术在铁路信号工程设计中应用优势分析（1）实现三维可视化以及精确定位（2）促进综合检查以及管线径路科学合理布置工作的开展（3）有利于实现铁路信号工程设计交付成果可视化（4）促进铁路信号工程设计碰撞、遮挡的综合检查2.3.2BIM技术的信息传递需求BIM技术的核心任务：实现多源异构系统之间的信息交换，其三维可视化、协调、模拟、优化等特点均属于相关软件在“辅助设计”方面的功能[18]。1.铁路信号工程设计特点（1）子系统多（2）设置分布离散（3）系统网络连接、信号集中控制（4）设计表达抽象（5）制约关系复杂因此当BIM技术应用于铁路信号工程设计领域，并作为一种“辅助设计”的手段时，其信息化不能脱离相关铁路专业和孤立存在，需要相互配合[19]。传统的二维设计模型存在着很多不足，同样的，三维建模技术也有诸多限制因素，实现它们之间的信息交换才是BIM技术的核心任务[20]。本文将会以二维模型来展开，设计出一个软件接口来实现二维模型与三维模型的联动[21]。图2-5二维模型与三维模型的数据处理2.4本章小结对本文将用到的两款软件VS2015及Unity3D进行了详细的介绍，了解了它们的功能和特性以及本文在工作过程中会涉及到的应用。之后介绍了当前BIM技术应用于铁路信号设计领域的现状，引出了本文所涉及的软件接口对于BIM技术深入应用，实现信息传递的作用[22]。车站联锁界面主要在VS2015中完成编译，建立Socket通信将会用到上面两款软件进行。第3章车站联锁上位机设计本文选择了库宗桥站的信号平面布置图作为VS中C#窗体设计联锁上位机的参照标准，首先是对上位机界面的绘制，包含了基本轨道、道岔、信号机、操作按钮等，它们不但会作为功能实现后的参考对象，也会作为后续功能设计的操作对象，是整个系统的基本组成部分。接下来就是对联锁功能的设计，包含了道岔操作功能、进路选排功能、进路取消及人工解锁功能、按钮的自动/手动恢复功能、故障的模拟功能、引导接车和引导总锁闭的办理功能，这些构成了上位机基本的联锁办理功能。当然后文中还会有模拟行车和与Unity的接口设计，这些不仅是对传统上位机功能的补充，还能在这模拟铁路运维的情景下利用到BIM技术的优势，这是本设计的核心目的。下面就分别对联锁上位机的界面和联锁的功能进行详细地介绍。3.1车站联锁上位机界面组成本文是以库宗桥站信号平面布置图和联锁表为参考进行的设计，首先是对联锁上位机界面的设计，包含了平面布置图中所有信号点和元素，是在C#窗口搭建的实验环境下进行的，该界面所包含的基本组件有基本轨道、道岔、信号机、操作按钮、配合功能方面的相应显示框和新的窗体界面等。本节主要介绍前面四种，后续的组件会根据功能要求对应介绍。3.1.1基本轨道的设置及状态表示1.轨道的状态及其表示（1）解锁状态：用灰色光带表示（2）锁闭状态：用白色光带表示（3）占用状态：用红色光带表示（4）出清状态：用绿色光带表示2.轨道的状态变化操作方式（1）解锁状态：初始状态默认为解锁状态，进路正常解锁回到解锁状态，区故解回到解锁状态，取消进路/人工解锁时回到解锁状态。（2）锁闭状态：当进路条件都满足，进路能够正常办理时，轨道进入锁闭状态，当取消进路/人工解锁/区故解/进路正常解锁时回到解锁状态。（3）占用状态：当列车运行经过该轨道区段时进入占用状态，列车正常出清后回到解锁状态；故障占用时进入占用状态，故障排除后进入出清状态，再次区故解才能回到解锁状态。（4）出清状态：轨道故障排除后进入出清状态，需要再次区故解才能回到解锁状态。3.轨道类型及其功能（1）进站信号机前方的接近区段：包含XJG、XFJG（下行）、SJG、SFJG（上行）。实现功能：表示进站信号机前方接近区段是否被占用，可用来判断接车/通过进路取消的方式，如果被占用就采取人工解锁，如果未被占用则采取取消进路，故障占用、出清、区故解的模拟。（2）出站信号机、调车信号机所防护后方的第一条轨道区段：例如D2G、XIIG、D1G、DG7_S4等。实现功能：主要用于区别于道岔的轨道区段，与出站及调车信号机的绝缘节进行连接，故障占用、出清、区故解的模拟。（3）进站信号机后方至第一架调车信号机之间的轨道区段：包含IAG、IIAG（下行）、IBG、IIBG（上行）。实现功能：办理通过进路和接车进路需要经过的轨道区段，占用情况会影响这两种进路的办理，故障占用、出清、区故解的模拟。（4）两个道岔之间的轨道区段：例如DG1_5(1-5DG)、DG3_7(3-7DG)。实现功能：办理经过那两个道岔的各种进路都会经过的轨道区段，占用情况会影响这些进路的办理，部分进路作为防护区段也要检查占用情况，故障占用、出清、区故解的模拟。（5）股道：包含IG、IIG、G3（3G）、G4（4G）。实现功能：占用情况会作为接车进路及部分调车进路能否办理的判断条件，是出站信号机的防护对象，故障占用、出清、区故解的模拟。3.1.2道岔的分类及定反位变化1.道岔的分类（1）单动道岔：如5号道岔，操作定反位时单独进行改变。（2）双动道岔：如1/3号道岔，操作定反位时同时变动。2.道岔的组成及其表示本文将一个道岔组成分成5个部分（以DC1为例）：（1）DC1_1：接续上一段轨道区段，位于道岔的尖轨外侧的一段道岔，用灰色表示。（2）DC1_2：表示道岔的定位状态，是道岔的默认初始状态，用绿色表示。（3）DC1_3：表示道岔的反位状态，初始状态下隐藏，用黄色表示。（4）DC1_4：连接道岔的定位，使道岔整体完整，用灰色表示。（5）DC1_5：连接道岔的反位，使道岔整体完整，用灰色表示。3.道岔的状态转换及其表示（1）定位→反位：定位状态下的道岔，按下总反位按钮再点击道岔的绿色的定位表示部分，在满足条件的情况下道岔能转到反位并且给出表示。（双动道岔点击任意一端都同时转到反位）（2）反位→定位：反位状态下的道岔，按下总定位按钮再点击道岔的黄色的反位表示部分，在满足条件的情况下道岔能转到定位并且给出表示。（双动道岔点击任意一端都同时转到定位）（3）道岔锁闭：未锁闭的道岔，点击道岔单锁按钮，再点击道岔的序号，在满足条件的情况下，道岔名字会被红色圈圈住，表示道岔已经锁闭，不能再进行定反位转换，对进路的排列会产生影响。（4）道岔解锁：已锁闭的道岔，点击道岔单解按钮，再点击道岔的序号，在满足条件的情况下，道岔名字的红色圈会消失，表示道岔已经解锁，可以正常进行定反位的转换。（5）道岔失去表示：是对道岔的故障模拟，点击道岔失去表示按钮，再点击道岔的序号，道岔的定反位表示会交易闪烁，表示道岔已经失去表示，此时经过该道岔的进路无法建立。（6）道岔恢复表示：点击道岔恢复表示按钮，再点击道岔的序号，道岔恢复表示，是对模拟故障的取消。3.1.3信号机的类型及显示信号机的显示状态取决于信号机的种类以及排列的进路的类型、进路的情况。1.信号机的种类及其组成、表示（1）进站信号机：包括X、XF（下行）、S、SF（上行）。下行的进站信号机例如X，用X_3、X_4表示两个灯位，X_3初始状态为红色，X_4初始状态为灰色，表示一个黄灯时X_3变为黄色，表示两个黄灯时X_3、X_4均变为黄色，表示一个绿灯时X_3变为绿色。上行的进站信号机例如S，用S_1、S_2表示两个灯位，S_2初始状态为红色，S_1初始状态为灰色警冲标，表示一个黄灯时S_2变为黄色，表示两个黄灯时S_1、S_2均变为黄色。初始状态为一灰色一红色的显示，表示进站信号机未开放；一灰色一黄色的显示，表示通过该信号机的正线接车进路办理成功；双黄色的显示，表示通过该信号机的侧线接车进路办理成功；一灰色一绿色的显示，表示通过该信号机的通过进路办理成功。（2）调车信号机：包括D1、D3（下行）、D2、D4（上行）。例如D1，用D1表示调车信号机的灯位，D1初始状态为蓝色，表示禁止调车；当从D1出发调车进路办理成功时，D1变为白色的状态，表示允许调车。（3）出站兼调车信号机：包括SI、SII、S3、S4（下行）、XI、XII、X3、X4（上行）。例如SI，用SI表示列车信号的灯位，用SID表示调车信号的灯位。初始状态下SI显示红色，SID显示蓝色，办理成功了从IG出发的发车进路时，SI显示绿色；办理成功了从IG出发的调车进路时，SID显示白色。3.1.4操作按钮及其对应的功能1.控制界面的按钮总取消（ZQA）、总定位（ZDA）、总反位（ZFA）、道岔单锁（DCDS）、道岔单解（DCDJ）、区故解（QGJ）、引导总锁闭（YDZSA）、人工解锁（RJA）、按钮颜色恢复（HFA）。2.控制界面的按钮对应功能（1）总取消：在列车出发前，取消办理好的进路，使得进路能够解锁恢复初始状态，取消掉信号机的开放状态。（2）人工解锁：在列车已经到信号机的接近区段，要取消办理好的进路，需要采取的一种方式，需要进行延时解锁，调车进路及侧线发车进路的延时为30s，其他进路的延时都为3min才能进行解锁。（3）总定位：将反位状态的道岔根据需要转换到定位所需要的按钮。（4）总反位：将定位状态的道岔根据需要转换到反位所需要的按钮。（5）道岔单锁：将对应道岔进行单独锁闭使其无法进行转换的按钮。（6）道岔单解：将已经锁闭的道岔进行单独解锁，使其能够正常进行转换的按钮。（7）区故解：使出现故障的轨道区段能够进行解锁的按钮，需要输入密码进行确认才能进行。（8）引导总锁闭：当道岔失去表示或者进站信号机因故障不能正常开放时按下该按钮，输入密码进行确认后采用引导总锁闭的方式进行接车进路。（9）按钮颜色恢复：在主界面操作时或者选排进路时误操作按钮，可以使用这个按钮让对应按钮恢复原来的状态，是对误操作的一种解决办法。3.故障设置按钮轨道占用（GDZY）、轨道出清（GDCQ）、道岔失去表示（SQBS）、道岔恢复表示（HFBS）、信号故障（XHGZ）。4.故障设置按钮对应功能（1）轨道占用：按下轨道占用按钮再点击对应的基本轨道，能够模拟故障占用，此时的基本轨道颜色变为红色。（2）轨道出清：按下轨道出清按钮点击对应的被故障占用的轨道，模拟故障消除后的轨道出清，此时基本轨道的颜色变为绿色。（3）道岔失去表示：点击道岔失去表示按钮再点击道岔的编号，能够模拟对应的道岔失去表示的故障，影响进路的选排。（4）道岔恢复表示：点击道岔恢复表示按钮再点击相应的失去表示道岔的编号，模拟失去表示故障的恢复。（5）信号故障：点击该按钮再点击相应的X、XF的灯位，模拟信号机故障不能正常开放进路，这时如果要继续进路的选排则需要进行引导接车进路的操作。5.进路选排按钮进站信号机（下行）：列车按钮、引导接车按钮、通过按钮（1）列车按钮：排列下行的接车进路、通过进路及发车进路时使用的按钮。（2）引导接车按钮：排列下行的引导接车进路、办理引导总锁闭时使用的按钮。（3）通过按钮：排列下行的通过进路时使用的按钮。进站信号机（上行）：列车按钮、通过按钮（1）列车按钮：排列上行的接车进路、通过进路及发车进路时使用的按钮。（2）通过按钮：排列上行的通过进路时使用的按钮。调车信号机：调车按钮（3）调车按钮：排列上下行调车进路、变通进路时使用的按钮。出站信号机：列车按钮、调车按钮（1）列车按钮：排列上下行的接车进路、发车进路时使用的按钮。（2）调车按钮：排列上下行的与出站信号机相关的调车进路时使用的按钮。图3-1车站联锁界面3.2联锁的功能实现本节是对库宗桥站上位机联锁界面所用到的一些基本功能的原理的分析介绍以及相应的效果展示。3.2.1道岔操作功能3.2.1.1道岔的总定/反位操作及原理道岔总定/反位办理操作：按下控制台的总反/定位按钮再点击对应的定/反位状态的道岔，在道岔未被锁闭且未出现故障的条件下，道岔能转动到反/定位状态并给出表示。原理：以办理道岔1由定位到反位的操作为例（道岔1、道岔3是双动道岔，因此要同时改变定反位状态）DC1_2为道岔1的定位表示，是道岔1的初始状态，显示绿色。1.检查条件（1）总反位按钮按下；为了能够体现出道岔转换过程中的四开状态，应当增加一个定时器来实现道岔转换过程中的这一状态，具体的定时器设计原理如下（以道岔1/3定位到反位的过程为例），DC1SKF定时器（定义一个可改变的倒计时变量t1=10;）：图3-2道岔四开过程模拟图3-3道岔1/3的四开状态这样就能模拟出完整的控制台的定反位操纵过程，后文的与Unity建立通信中道岔的实时状态反映取决于Unity中现场道岔实际操纵状况，四开的过程直接根据实际道岔转动过程反映出来。3.2.1.2道岔的单锁/单解及原理1.道岔单锁/单解按下控制台的单锁/单解按钮，再点击对应的道岔编号，实现道岔的锁闭/解锁功能，被锁闭的道岔无法进行定反位的操作也无法正常参与选排进路。2.原理以办理道岔1/3的单锁单解为例（道岔1、道岔3是双动道岔，因此要同时进行单锁/单解）（1）道岔单锁：检查条件：图3-4道岔1/3的单锁状态（2）道岔单解：检查条件3.2.2进路的选排功能3.2.2.1通过进路的选排1.排列进路的按钮有两种情况操作（1）上下行的正方向：下行：XTA+SFLA上行：STA+XFLA（2）上下行反方向：下行：XFLA+SIILA+XIILA+SLA上行：SFLA+XILA+SILA+XLA2.排列通过进路的原理虽然这4种通过进路所用到的按钮不同，但是基本原理相似，本文以下行正方向通过进路为例。检查条件（在SFLA_Click事件中编写，因为点击了该按钮后条件允许就会触发事件）：条件检查完毕后，准备排列进路：（1）相应的单动、双动道岔先根据进路要求转动到需要的位置；（2）IAG.BorderColor=Color.White;//所经过的轨道区段在以上条件都检查之后显示白光带，表示进路锁闭（以IAG的光带变化为例）；（3）①进路锁闭后，确认条件完毕，信号开放；②进路选排完毕后，按钮恢复初始状态以便下次继续办理。3.2.2.2接车进路的选排1.接车进路的办理操作X到IG：XLA+SILAX到3G：XLA+S3LAX到IIG：XLA+SIILAX到4G：XLA+S4LAXF到IIG：XFLA+SIILAXF到4G：XFLA+S4LA2.接车进路的办理原理以XF到IIG为例。从上文中的下行反方向通过进路的排列方式中我们可以看出，该操作是：XFLA+SIILA+XIILA+SLA，两种进路的办理都先要按下XFLA+SIILA，如果不做其他操作且进路条件满足，那会优先排上X到IIG的接车进路，这样就无法再满足排列下行反方向的通过进路的条件，因此必须对这个问题进行处理。对于这个问题我们可以增加一个具有延时功能的定时器来进行判断，原理是利用几秒的延时时间来确定选排的是接车进路还是通过进路。在延时进行中如果按下了XIILA则这个条件会反映是在排通过进路，则可以排除接车进路的情况；而如果延时结束没有按下XIILA则证明是在选排接车进路，当条件满足时接车进路可以排通。所以首先还是要检查XF到IIG的接车进路的选排条件：（1）按下了XFLA才点击SIILA，确定是选排的XF到IIG的接车进路；（2）所经过的道岔未锁闭且未失去表示；（3）D3.FillColor==Color.Blue&&SIID.FillColor==Color.Blue&&SII.FillColor==Color.Red//敌对信号关闭；（4）所经过的轨道区段未被占用。上述条件检查完毕后，准备排列进路，但进路的选排与别的接车进路都有差异，因为涉及到按钮的共用，为避免错误选排的情况，增加了一点延时来避免这种情况，这里用到一个下行通过进路倒计时（TXDJS），具体原理如下：（1）首先设置了一个变量TX=5，作为倒计时的初始值；（2）TX=TX-1，倒计时持续工作。图3-6XF到IIG的接车进路调车进路以及发车进路的选排条件检查流程和排列进路的原理与接车进路类似，只是相应信号机所用到的颜色显示不同。相同地，办理这些进路还需要注意防护道岔和防护区段的检查。防护区段：如办理X到IIG的接车进路时，需要检查1-5DG的占用情况，1-5DG为该进路的防护区段，显示白光带时不能考虑在内，但这个必须作为进路的选排条件之一。防护道岔：如办理SF到XII的接车进路时，需要检查10/12道岔是否失去表示，以及确认其在定位状态，[10/12]，可以不用检查其锁闭情况，但前面两个必须作为该进路能否成功选排的的条件之一。3.2.3进路的取消及人工解锁功能在选排进路且进路满足开放的条件成功建立后，需要取消进路的话，分为两种情况进行操作。第一种是在进路始端信号机前接近区段未被占用时，可以直接取消该进路，办理进路取消的方法是：总取消+进路始端按钮，进路未出现其他异常情况时，能够直接取消该进路并完成解锁。第二种是在进路始端信号机前接近区段被占用时，只能通过人工延时解锁的方式对进路进行取消，接车进路和正线发车进路延时3min；侧线发车和调车进路延时30s。办理人工解锁的方式是：总人解+进路始端按钮，在未出现其他异常情况时，人工解锁结束后该进路能够取消并解锁。具体的原理如下，以X到SI的接车进路为例。1.取消进路2.人工解锁检查条件同取消进路（1）、（2）、（3）条件有所改变，不需要检查接近区段是否被占用，并且根据进路类型增加了不同的倒计时，之后才进行解锁。具体解锁操作如下：（1）先定义一个倒计时变量，inttX=180;（2）tX从180递减，tX=tX-1;（3）将tX的变化值填入X倒计时方框中，XDJS.Text=tX.ToString();（4）当tX降到0，即倒计时180s结束，结束后：①进路信号机关闭信号；②轨道区段解锁，颜色恢复初始状态；③按钮颜色恢复，便于下次办理其他进路操作；④倒计时结束，倒计时方框隐藏；⑤定时器关闭，结束倒计时。XLA中的操作（满足人工解锁条件后）：（1）显示倒计时方框；（2）启动倒计时；（3）倒计时初始化。图3-7人工解锁的倒计时显示3.2.4按钮颜色的自动与手动恢复功能因为在办理进路或者使用控制台执行某项功能时，难免会出现一些误操作，真正运用的场合中不可能关掉程序重新来执行，因此要提供按钮颜色的恢复功能来解决误操作带来的影响。本文给出两种解决方式，分为手动跟自动恢复。手动恢复按钮颜色：设置一个新的按钮，HFA（按钮颜色恢复）。实现的方式是点击该按钮再点击对应需要恢复颜色的按钮，之后该按钮跟HFA颜色同时进行恢复。因此对于每个按钮的代码栏目中，都应该加入以下新的操作：（1）按钮颜色恢复；（2）对应按钮颜色恢复（这里以道岔单锁按钮为例）；（3）颜色恢复按钮也自动恢复初始状态，便于下次使用。以上方式就能手动实现对误操作按钮的恢复，但实用性不是最佳，因此还设了一个新的操作倒计时30s来进行误操作按钮颜色的自动恢复，具体操作如下：（1）首先定义要一个变量；（2）倒计时还未结束时，倒计时持续进行；（3）当倒计时结束时，应使对应的按扭颜色恢复，且关闭倒计时方框和倒计时定时器，参考上文人工解锁的倒计时操作。特别地，应该在每个按钮按下后启动该倒计时：这样在实现功能后能停止该操作倒计时，如果是误操作则可以等倒计时结束后再次开始操作，当然也可以手动恢复按钮颜色，这样使整个程序对于误操作的处理会更加完善。图3-8按钮操作的倒计时3.2.5故障模拟的功能本文的设计提供了3类故障模拟，分别包括轨道占用、道岔失去表示、信号故障。是对一些突发情况的模拟，当然也能配合控制台的功能进行解决。2.道岔失去表示设置一个按钮道岔失去表示（SQBS）和一个按钮道岔恢复表示（HFBS），用来模拟相应道岔失去表示的状态和恢复相应道岔的正常定位状态，出现该故障时，进路无法正常办理，具体的操作原理如下（以道岔1为例）：（1）按下了失去表示按钮再按下对应道岔编号则该道岔的闪烁定时器启动DCSS1（道岔1的失去表示状态定时器）；（2）定/反位状态的闪烁通过DC1_2、DC1_3反复消失/出现实现闪烁功能，定时器的时隙定为100。道岔恢复表示的原理（以道岔1为例）：如果道岔正处于失去表示状态且按下了恢复表示按钮并按下对应失去表示的道岔，则：（1）该道岔停止失去表示的状态；（2）道岔恢复初始的定位表示。信号故障（主要配合引导接车的使用，模拟灯丝断丝等信号无法开放的故障）：如对X信号机：X的信号出现故障的模拟（办理了进路后使用）：（1）出现故障后进路信号关闭；（2）信号故障按钮颜色恢复。3.2.6引导接车及引导总锁闭的功能本站只设置了下行方向的引导接车及引导总锁闭功能，均可以配合相应故障进行使用。1.引导接车在进路信号机故障的情况下接车只能采取引导接车的方式来进行，设置了XYDA和XFYDA两个引导按钮用于引导接车的排列，具体的排列方式如下（以X到SI的接车进路为例）：首先排列了X到SI的接车进路，并且进路白光带和信号都正常，如果出现信号故障关闭的情况，就必须选择引导接车才能继续进路的排列。在窗口3（X引导接车操作确认中）：图3-10引导接车进路的选排可以模拟X/XF的信号故障来配合引导接车的实现，可以看出检查条件中并未检查信号机的开放状态，可以在黄灯灯丝断丝等情况下继续接车。引导接车的取消和人工解锁参考正常接车进路。图3-11引导接车进路的建立2.引导总锁闭在道岔失去表示时，无法正常办理接车进路，只能手动将道岔操纵到指定位置且将道岔锁闭时，并且拔出引导总锁闭按钮进行破铅封确认之后再次引导接车确认才能办理引导总锁闭，具体原理如下（以X到SI的接车进路为例）：后续步骤：（1）检查人工是否将道岔操纵到指定位置（2）检查下行道岔是否完全锁住（3）开放引导信号（4）排列好引导总锁闭进路3.3本章小结本章主要对车站联联锁的整体框架设计和功能设计详细进行了介绍，基本完成了正常车站的控制台的各项功能，并且都参考了联锁表给定的限制条件，符合车站联锁的标准，能模拟一些基本的故障，后文将利用通信的方式来实现联锁界面与Unity模拟站场进行相互连接。第4章车站联锁的站内行车模拟4.1模拟行车的基本要求本节内容主要围绕联锁界面中的站内行车模拟所需要的条件来进行分析，包括了进路条件的实时检查，即刻关闭信号才能保证行车过程中的安全且能配合列车运行过程中的光带变化所带来的影响，再一个条件就是列车正常行驶过后轨道区段、道岔区段的正常解锁。4.1.1对于进路条件的实时检查因为设定有轨道占用的故障模拟，因此当选排好并且已经建立了的进路中也会出现轨道异常占用的情况（这是上文配合故障模拟所需要满足的要求）；对于排列好的某一条进路，要针对该进路进行行车的模拟，当列车进入该进路的始端信号机后方的第一区段时，信号也应当关闭。因此，每条进路应当设置一个反复检查的定时器来保证信号能够关闭来避免冒进，具体原理如下（以X到SI的接车进路的检查定时器为例）：检查条件包括：（1）如果该进路的经过道岔任意一个失去表示了则满足关闭信号的条件（2）如果该进路上任意一个轨道区段被占用，则信号关闭满足以上任意一个条件时，信号应当关闭，应该包含了：始端信号机关闭；检查定时器关闭，便于下次使用。同理，每条进路都应按照要求设置这样的定时器来进行进路的复检查，避免排列好进路后出现故障而列车冒进，也同时保证了模拟行车时列车驶入始端信号机后方时始端信号能正常关闭，使模拟行车的整个流程能够正常进行。因为进路办理的时候，只会默认检查初始状态下所要求的进路条件是否满足，如果满足则建立进路，所经过的区段显示白光带，如果不满足则无法办理。而要进行对应进路的行车模拟，一定是要在该进路能够正常建立后才能进行的，因此实时检查定时器是能够做到再次对进路条件的检查，在该定时器里再嵌套一个对应进路的模拟行车定时器的启动开关（即XC.Enabled=true语句）则能在对进路条件进行复检查时配合模拟行车的按钮启动该进路的模拟行车功能。为了实现模拟行车的功能，在控制台有新增加一个模拟行车按钮（MNXC）。所以要检查该进路是否要进行模拟行车功能时只需要在对应进路的实时检查定时器中检查条件MNXC.BackColor==Color.Red是否满足就行，若满足就启动对应进路模拟行车定时器的开关，既可以开始模拟，反之则继续进行检查。图4-1实时检查的原理图4.1.2区段正常解锁的实现当进路选排好后并且按下了模拟行车按钮，列车就要在对应进路进行模拟行车。而当列车经过了某一区段后，该区段按照联锁要求应当自动进行解锁，并且为了防止轻车跳动所带来的影响，所以区段要在列车经过后延时3s才会自动进行解锁。本文是通过增设嵌套在进路对应的模拟行车的定时器中的解锁定时器来进行实现。以IAG为例进行分析：首先设置IAGJS定时器，且设定一个倒计时初始值tIAG=3。tIAG=tIAG-1指令要持续进行到tIAG=0为止，这是延时的阶段，通过该倒计时命令来实现。当tIAG减到0后，则IAG的光带颜色应当恢复为灰色，且重置倒计时tIAG=3，并且关闭掉该定时器，之后再经过时才会启动。这些都是在对于一条特定进路的行车模拟中所调用的对应区段的解锁命令定时器设定，因此它们的关闭对于相应的行车模拟的持续进行不会造成任何影响。图4-2命令的嵌套关系4.2模拟行车功能的实现本节内容针对具体行车模拟所需要的设计工作和该功能具体实现的方式进行分析，会针对不同的情况进行考虑各种路线的具体行车情况。4.2.1列车的建立和移动原理要实现进路的模拟行车，首先需要建立相应列车的模型，并且考虑列车的移动方式。这些都是判断相应轨道区段和道岔区段是否被占用或者是否满足解锁的条件，是进行模拟行车的基础。首先对于列车的模型进行建立，新建一个picturebox控件，点击选择图像，就能导入相应的列车图片来进行列车模型的构建，如图4-3所示。图4-3列车模型的导入完成了模型的导入后，应该将其置于每条进路始端信号机的外方，这样才能模拟出每条进路的完整的行车过程。因为每条进路都会有列车的设置，而许多进路所用到的始端信号机是一样的，因此办理进路时所用到的始端信号机是一样的进路，可以用同一个列车模型来进行模拟，因为他们不可能同时办理到，不满足联锁的条件。这样我们不难得出结论，用相应的始端信号机加入LC中进行命名是最直接也最简单能进行列车模型命名的方式。例如以XI为始端信号机的列车模型命名应为LCXI，以D1为始端信号机的列车模型命名应为LCD1。然后是对于列车的属性认识，我们必须知道这两个方面。第一是列车的位置是由什么属性来表示的，第二是列车位置的具体定位值。从相应picturebox的属性框中我们可以看到，如图4-4，列车位置的属性确定边界只包括了Top，Left两个属性值。所以表示它的location诸如732，252这种值所表达的含义应是（以LCXI为例）：LCXI.Top=732；LCXI.Left=252。因此，列车任何时刻的位置状态都是通过这两个量的具体值来进行反应的，列车的移动是可以直接通过这两个量的值的改变来进行，这样就解决了列车实现移动的问题。例如，LCXI.Left+X=LCXI.Left。表示每经过单位的时间，LCXI都会向右方移动X个单位的距离。图4-4列车模型的部分属性对于列车的属性和列车的移动的方式进行了确定后，那对于区段占用和出清的判断就有更明确的思路了。下面先参考一下区段lineshape的坐标属性，如图4-5。图4-5区段的坐标值从该表格中能够得出，每个区段的起点坐标（X1，Y1）、终点坐标（X2，Y2）的具体参数值。要判断列车是否占用和出清，只需要将列车具体的location的Left的值，与该区段的起点终点横坐标进行大小的比较，如果在（X1，X2）的范围内则表示列车此时是占用了该区段，该区段应显示红光带，如果在范围外，则表示列车还未经过该区段或者已经出清该区段，则根据实际情况进行光带颜色的显示以及对区段解锁定时器开关的判断设定。下面就具体的进路来进行模拟进路选排功能的分析。4.2.2模拟行车功能的具体分析以X到3G的接车进路为例来进行模拟行车功能的具体分析，如图4-6。图4-6X到3G的接车进路模拟行车首先是对进路的选排，选排X到3G的接车进路，按下XLA、S3LA，在满足联锁条件的情况下，进路能顺利建立，区段显示白光带，信号机X显示双黄灯（侧线接车）。然后是点击模拟行车按钮，要使得该进路的模拟行车开始进行。要如何满足这个条件呢？上节中有提到在每条进路有设置一个进路实时检查定时器，并且将对应的进路模拟行车定时器也嵌入在其中。在进路选排完成后，进路实时检查定时器就启动了，这时候按下模拟行车按钮，就会判断该条件，然后启动对应的模拟行车。最后就是过渡到了具体的模拟行车定时器应当如何进行编写，具体的编写原理如图4-7所示，一共分成了6个步骤进行。图4-7模拟行车流程步骤3、步骤4都会涉及到列车相对于某区段位置的范围的判断，以该进路为例，列车是一直向右行驶的状态。所以当该列车右边界大于了某区段的左端点横坐标则表示列车已经开始占用该区段，当列车左边界小于该区段的右端点横坐标则列车是没出清该区段的，而当列车左边界都大于该区段的右端点横坐标了则该列车是已经出清该区段。步骤5则是在斜向上道岔、轨道区段的范围内，增加一条列车上边界也会随着时间变化大小的代码，便能实现列车的斜向上动作，例如LCX.Top=LCX.Top+6；与向右运动可以同时进行。步骤6相当于将整个过程全部复位，对于下次再进行使用有着极大的便利，是一个重要的过程。4.3本章小结本章是对所设计的车站联锁上位机界面的模拟行车功能的介绍。首先介绍了为了实现该功能应当进行的准备工作：如何设置该功能对应具体的某条进路以及如何在行车后正常解锁区段。之后是需要在界面中增加的具体的模型以及模型移动的原理的分析，最终通过一个实例对整个模拟行车流程进行了梳理。以上便是在联锁上位机界面单独进行操作时模拟行车功能的详细介绍，因为该界面会涉及到接口的数据处理，其与模拟的站场之间的通信也是能相互传递信息，反应出模拟站场列车行驶状况的，相当于是联机之后的模拟行车，这会在后文中实现了通信连接后进行详细介绍。5.2通信功能的实现与数据处理上节讲述建立两款软件所需要的通信方式为Socket通信，分别对服务器（Unity中的模拟站场）、客户端（上位机控制界面）的主要通信线程和连接方式进行了设计，当服务器和客户端完成连接后，就需要来进行具体的功能设计来实现他们之间的相互通信，具体的功能实现包括了车站联锁功能的通信和模拟行车的通信两大方面。5.2.1联锁通信与数据处理车站联锁基本的功能包括道岔的单独操纵，轨道占用的对应显示以及进路的选排、取消、人工解锁。1.道岔的总定位、总反位的通信功能实现上位机作为整个系统的控制端，它的控制界面有包括了总定位、总反位的操作按钮，按下了总定位/总反位按钮并且再点击对应道岔的定/反位时完成了上位机里面对道岔单独操纵的办理，此时应当设计一个消息让Unity中模拟站场接收到以实现通信。具体的实现步骤（以道岔1/3转换为例）：①因为道岔转动过程会出现四开状态，所以在上位机界面中，在办理了道岔的单独操纵后，应该隐藏掉道岔的定反位表示，此时是处在道岔转动过程中的四开状态。②在上位机进行了办理后，应当立即将消息发送到模拟站场中，让转辙机带动道岔开始转动，所用到的指令为sendMsg=”C01_Ding2Fan”;，引号中的指令为控制模拟站场中对应道岔定反位转换的指令。该条指令能翻译为，道岔1/3进行定转反的操作。③上位机应当继续保持道岔的四开状态，直到模拟站场中的道岔转换完毕并给出表示，并收到Unity回复过来的消息，才在上位机界面给出对应的定/反位表示。所收到的消息表示为receiveMsg=”C01_Ding2Fan”;接收到Unity传来的消息的部分为上位机中的接收数据线程，相应信息对于相应道岔的动作状态的影响应当提前在接收数据线程中设置好，而发送数据线程应当在对应的上位机功能实现部分后面进行补充，保证让模拟站场能在最短时间内接收到上位机界面中作出的操作，并予以反应。2.轨道占用对应显示的通信功能实现当有列车在三维站场中运行时，它的位置需要通过占用相应的轨道来进行反映，与此同时，上位机界面应当接收到三维站场发送过来的占用信息，并且给出相应的红光带表示，这部分主要是上位机来接收站场实际占用情况的消息。以XJG为例，当三维站场中列车运行开始占用了XJG时，会发出一个信息：”XJG_Red”。此时通过通信的传输，在上位机中就会收到”XJG_Red”这个消息，那么上位机中应当马上做出反馈。XJG应显示红光带，并且将收到的消息置空，即ReceiveMsg=””;。这一步的操作是为了清空接收信息的数组，它是有存储上限的，置空此次通信的信息，是为了保证后续的持续接收，因此每次接收信息后进行数据的置空是很重要的一个环节。3.进路的选排、取消、人工解锁的功能实现前面有介绍了对于上位机界面单独操作时进路的选排原理和流程，下面是对于在建立了通信后互相收发信息进行进路的选排办法。进路要选排成功最重要的是看其是否满足了联锁条件，这个可以参考联锁表进行条件限制，在上文中也有进行条件列举。不过在进行了联机操作后，还要参考的一个新的条件是当满足了基本的联锁条件后，模拟站场的道岔会自动开始转动到进路需求的指定位置，在这个道岔转动过程，上位机中道岔的显示应当是四开状态，待转换完毕后才会显示进路的白光带及进路信号才会开放，进路此时才算完全选排成功。因此，在通信后整个进路的选排过程我们应当分成4个步骤来进行（以X到3G的接车进路为例）。（1）上位机中对于联锁的条件判断成功后，应当发送信息至模拟站场中。与上位机单机选排进路不同的是，这里会加入对于道岔是否要进行转换的检查，便于对模拟站场中道岔是否要进行动作的判断。具体的判断原理如下：首先是明确办理该进路，道岔最终需要转换到的位置，其次就可以开始进行道岔的逐个判断。办理X到3G的接车进路，1/3号道岔需要在定位状态，5号道岔需要在反位状态。因此，对1/3号道岔，如果在反位状态，则上位机界面中，需要将1/3号道岔的定反位都隐藏掉（即四开状态）；当5号道岔处于定位状态时也是同理。与上位机界面不同的是，这时候道岔选排检查完后，应当发送信息至模拟站场中，告知站场所选排的进路，这里应当发送的信息是sendMsg=”X_S3”;，发送了信息后，Unity中的模拟站场就能接收到选排的进路为X到3G的接车进路。（2）三维站场中已经收到消息，明确了进路类型和所经过的区段、始端信号机，并且对于未满足要求的道岔位置开始进行定反位的转换，当道岔转换到位后给出相应的定反位表示并且发送信息给上位机界面，类似信息为：C01_Fan2Ding、C03_Fan2Ding（道岔1/3由反位转换到定位，上位机应当给出定位表示）。（3）同时当道岔转换完毕并且都满足了进路建立条件后，会开通始端进路的信号，X到3G的接车进路始端信号机为X信号机，此时应当显示双黄灯，上位机界面接收到的消息为：X00_Yellow2（X信号机显示双黄灯）。（4）上位机在接收到X00_Yellow2的消息后，会确认所办理的进路按钮，此时如果办理了X到3G的接车进路，对应的XLA、S3LA还是在红色的状态，因此可以将其作为条件准确地判断出对应进路，直接将所经过的区段显示白光带，并且X信号机开放双黄灯信号，此时，整个进路才算完全的建立。以上就是在VS与Unity通信的状态下办理进路的大致流程，与上位机单机状态下办理的主要区别是相互信息的交流，双方都会根据对方的状态来执行下一步的操作，这样哪一步出了问题就可以很容易找出错误发生的位置，对于故障的排查也是一个很有效的手段。图5-4道岔转换过程的四开状态当进路选排成功后，当然也可以进行进路的取消和人工解锁操作。在上位机中，取消和人工解锁的操作原理和上文中的基本一致，特别地，在满足了取消和人工解锁的条件后，应当想三维站场发送了信息后再进行取消。以X到3G的接车进路为例，如果满足了取消该进路的条件，则取消进路后，X信号机的信号应当第一时间关闭，则发送的信息为sendMsg=”X00_Red”;（X信号机显示为红色，表示信号关闭）。这样在三维站场中也能反映该进路的取消状态，有助于进行下次的进路办理。5.2.2站内模拟行车通信与数据处理在完成了进路的选排工作后，就可以开始进行对应进路的行车模拟，在建立了通信状态下的行车模拟设计方案跟前文的上位机单独行车模拟是不同的，上位机中只会显示对应轨道区段的光带状态变化，能够对应到三维站场中列车运行过程中实际情况的反馈，这些也是通过通信来完成的。上位机在通信过程中的模拟走车功能中承担的作用是选择进路使三维站场明确走车时道岔的位置来决定列车的走向；同时，在列车运行过程中通过光带的变化来反映列车所处的轨道位置以及轨道的占用、出清、解锁的状态，是通过信息的收发与三维站场中一一对应的。轨道区段的光带变化也决定了列车运行时所接收到的信息，该站场中上下行的进路情况几乎是对称的。因此，下面以下行咽喉的模拟走车为例来对通信过程中的模拟行车功能进行介绍。（1）先由上位机对进路进行选排，三维站场会接收到信息进行道岔的转换，转换完毕后回馈信息至上位机，上位机和三维站场中信号同时开放，且进路显示白光带，此时三维站场中也明确了模拟走车的运行方向。（2）当列车驶入始端信号机内方的区段后，信号机应当立即关闭信号（参考前文上位机中模拟行车所需要的满足的要求）。以X信号机为例，当IAG被占用时会显示红光带，此时应该发送一个信息：sendMsg=”X00_Red”;，告知三维站场中信号机显示的变化，且上位机中同时会关闭掉始端信号。（3）上位机中轨道区段的光带变化是根据三维站场中列车运行于不同区段所发送的的信息处理来进行的。例如IAG，被占用时会收到信息”IAG_Red”，出清时会收到信息”IAG_Green”，解锁时会收到信息”IAG_Gray”。对应于不同的信息上位机这边也是有不同的显示，分别对应了相应区段的红色光带、绿色光带、灰色光带。另外地，IAG还作为了X信号机后方的第一个轨道区段，显示红色光带时，X信号机的信号也应当随之关闭，IIAG、IBG、IIBG等都同理。对于有岔区段，下行的是1_5DG、3_7DG，所连接的一些轨道区段是受到同一个信息所控制的（因为VS与Unity中基础元件设置的差异性）警冲标，因此对于收到同一个信息，应当有不同的轨道的不同光带显示，都会受到具体进路的影响，此时应当对进路的类型和方向都要进行判断，具体的分析方法如下：①收到消息”1_5DG_Red”：首先检查道岔1/3的定反位状态，如果道岔1/3处在反位状态，那么就是D1信号机后方的区段以及道岔1/3反位往下方的第一个区段被占用。如果道岔1/3处在定位状态，那进路仍有两种可能性，就应当判断5号道岔的状态。如果5号道岔在定位状态，则是办理的X到IG的接车进路或者IG到X的发车进路；如果5号道岔在反位状态，则是办理的X到3G的接车进路或者3G到X的发车进路，以此就能判断出接收到该信息时，三维站场中列车实际所占用了哪些上位机中所对应的区段。②收到消息“1_5DG_Green”或“1_5DG_Gray”：进路的出清和解锁所需要的判断的条件是一样的，只是先后进行的顺序不同，先要出清才会解锁。列车运行过程中的出清/解锁都是需要在列车完全经过该区段后，驶入前方区段3s后才会进行出清/解锁，因此前方被占用的区段不但能被作为后方区段进行出清/解锁的条件，同时也能判断最后列车运行的方向来确定进路的类型和方向。当出现这两种信息之一时，首先是梳理在该区段能够选排进路所运行的方向，共有4种，也就是4个终点。终点可以是IG、3G、IAG、DC1/3的反位往下。当终点为IG、3G、DC1/3反位往下时是比较好确定进路的，若为IG，则是X到IG的接车进路；若为3G，则是X到3G的接车进路；若为DC1/3的反位往下，则是到IIG、4G的接车进路，因为后续区段的是受到其他信息控制的，所以对于这两个信息是不会区别IIG、4G的情况，只需要知道运行的是DC1/3反位的方向即可。但是如果是IAG作为终点，就应当考虑3条路线的发车进路。第一种是从IG到X的发车进路，此时的道岔位置是1/3道岔定位、5道岔定位；第二种是从3G到X的发车进路，此时的道岔位置是1/3道岔定位、5道岔反位；第三种是从IIG/4G到X的发车进路，此时的道岔位置是1/3道岔反位。这样梳理后能够清晰地分析出轨道区段占用、出清、解锁时所收到信息后对应的处理情况，两端都会通过进路的道岔位置和进路的起点终点位置来判断出进路的类型和方向，最终能够实现同步进行显示，如图5-5，所展示的是选排进路过程中，二维与三维的联调过程。图5-5VS与Unity的联调测试在该图中可以看出，建立通信之后的模拟走车，是由双方互相发送信息相互进行控制和显示的，两边都能实时跟进列车的运行状况，在Unity中能够比较直观地观察行进过程中各信号设备的状态变化，而在上位机控制界面上能够完整地观察列车的行进路线，它们各自发挥了其优势，相互结合后使整个联锁过程更加完整。站场的上下行中所包括的有岔区段有1_5DG、3_7DG、2_10DG、4_6DG，其他区段所收到的对应信息的处理方法参照1_5DG来进行，将这些条件梳理清楚后就能够实现上位机对应于列车运行状况的实时显示了，具体的显示情况如图5-6。图5-6通信状态下模拟行车的显示5.3本章小结本章内容主要讲述了上位机与三维站场之间的通信接口的设计原理以及建立了通信后对各种联锁功能的具体实现，包括了道岔的单独操纵、列车的占用显示、进路的选排、列车的模拟运行等。前文中有讲述上位机界面办理这些基本联锁操作的方法，本章中因为建立了VS与Unity的通信，对于条件的检查必须要包括双方收发的信息，在知道对方状态的条件下才会进行判断最终做出对应的反馈。结论当今铁路信号工程设计在逐渐沿着BIM设计的方向发展，它能够提供更直观的设计效果。但是对于联锁的模拟测试效果而言，显然少不了二维的站场图设计，需要一个控制界面来对BIM中的模型进行合理的操作。本文中主要通过使用VisualStudio软件对一个指定站场的上位机控制界面及功能进行了设计，所采用的设计语言是C#语言，设计出来一款适用于铁路信号专业教学培训、警冲标铁路信号设计工程测试与纠错的软件。本软件的设计完成了以下内容：（1）构建了完整的车站进路且均满足联锁条件，不会出现误办理。（2）上位机所需要办理的功能齐全，大大提高了仿真办理联锁的可靠性。（3）能进行故障模拟，真实的反映站场的情况。（4）设计了二维与三维站场的通信接口，能够实现相互控制，利用Socket通信的极低延迟的特点，保证了收发信息的实时性和准确性。（5）单机操作与联机调试均能进行，让使用者能够从两个角度来观察信号设备的状态变化，方便实用。本软件能够实现常规上位机界面中一些无法实现的功能，诸如模拟走车和故障模拟等。还能通过设计出来的通信接口与BIM设计中绘制出的三维站场进行通信连接，能够更加真实有效的满足教学培训的需求和工程设计的预览。本文的设计只针对了室外信号设备的联锁关系，并未涉及到室内的线路连接及继电器相关的动作，后续如果将沿着这个思路进行设计，那么对于室内设备的BIM设计连接控制也是值得去探索的一个方向，这样才能够实现车站办理各种操作时，清晰直观地展现出一个完整的联锁体系，对设计和教学方面都有着更大的帮助。当然对于通信的流畅度提高和通信的延时降低的完善，在今后的设计过程中应当会选择更加先进的通信方式来保证室内设备动作的实时性。平面图1：100A-A050m100mA大样2.57.5144mm~5mm1mm~3mm10510080100105注明：因货场缓建道岔编号D17kg/mN800N600N400E1000E600E400E200CK25DK16DK94工业企业线起点工企线DK0+00=DK12545°1438.561526.841324.651275.89(8.400)(5.200)4.2001%2%3%4%1：21：51：31：4+130.24+120.25+132.26+141.14R10R8R9R5.5R6.7Φ30Φ40Φ34Φ35Φ10Φ920°65°70°90°115°80°丁站方向乙站方向甲站方向戊站方向丁站乙站戊站1727/15002260/19882732/23652912/2540现状初期近期远期上行下行货流密度客车对数年度1500/11522030/18662988/22583270/2980单线双线单双线南岭DK411+000五泉东固新源DK451+300DK493+200平行运行图通过能力（对/日）10mm8~12AK1az—51°30'00''R—800JD6AK2JD7ay—58°00'00''R—600AK3HZ+123CK7JD13ay—43°10'R—700l—160T—357L—687ZH+435CK6HZ+609JD12az—59°40'R—600l—140T—414L—764ZH+845CK5JD34-2YZ+224.95HZ+354.95ZD34-2-1+435.02(ZD)32-(2)JD34-1a1—42°00'00''a2—48°08'10''HY+091.306至南岭100km上行500km半自动闭塞双线单线及双线并肩（半自动闭塞）N85L一1499.20Ts一28±5℃(6.51)B/2粉质粘土碎石土强风化页岩夹砂岩弱风化页岩夹砂岩A=+46.62(A、B或C组填料)占地：40亩+460+5155348涵洞DK9=929.38台前台尾ZH:183+487.74边坡点轨底线N9Φ86N2Φ16mN1Φ20@10N10°E/76°N弱富水区，岩体节理裂缝不发育地下水主要为构造裂隙水和风化裂隙水正线里程X=145站场与区间路基分界历程150站台部署里程100车站中心路基面高程DK130距南港车站230km180×8×0.5400×8×0.32%-4%i-1.2%2m-4m钢筋混凝土梁立交桥银杏公路道路终点K2+1801-2.5m板涵①②③④⑤⑥⑦⑧⑨①②③④⑤⑥⑦⑧⑨ⅠⅡⅢⅣⅤⅥⅦⅧⅨⅩⅪⅫ-2.5(池底)+4.0+5.0ABCDEFGHIJKLMNOPQRSTUVWXYZCOW1W10DN150D108×4de50×20(PE)DN250×40(铁)DN200×12(铁)DN200(铁)DN200×13(铁)d200×39（筋）d200×35（筋）i—4%排出口HEYELGYTAHYA50×2×0.5-500m8D-500mVBCTV&DT&DUTPG-Q6-X1-F1-K1-X2-S1-S2-X1-F2中长期铁路网规划图连盐铁路新建成都至贵阳铁路乐山至贵阳段线路平面示意图哈大线K700+572长春至吉林城际铁路设计起点DK0+000=DK1+000短链35.79m长春+19-24m+（64+64）m波状台地区出露的地层主要有第四系全新统冲积、洪积粉质粘土2(34-32m)腰占西沟特大桥DK24+089.50老安山隧道文川河特大桥福仁山隧道得利隧道14171mL—248区段站始发站改建铁路近平面图1：100A-A050m100mA大样2.57.5144mm~5mm1mm~3mm10510080100105注明：因货场缓建道岔编号D17kg/mN800N600N400E1000E600E400E200CK25DK16DK94工业企业线起点工企线DK0+00=DK12545°1438.561526.841324.651275.89(8.400)(5.200)4.2001%2%3%4%1：21：51：31：4+130.24+120.25+132.26+141.14R10R8R9R5.5R6.7Φ30Φ40Φ34Φ35Φ10Φ920°65°70°90°115°80°丁站方向乙站方向甲站方向戊站方向丁站乙站戊站1727/15002260/19882732/23652912/2540现状初期近期远期上行下行货流密度客车对数年度1500/11522030/18662988/22583270/2980单线双线单双线南岭DK411+000五泉东固新源DK451+300DK493+200平行运行图通过能力（对/日）10mm8~12AK1az—51°30'00''R—800JD6AK2JD7ay—58°00'00''R—600AK3HZ+123CK7JD13ay—43°10'R—700l—160T—357L—687ZH+435CK6HZ+609JD12az—59°40'R—600l—140T—414L—764ZH+845CK5JD34-2YZ+224.95HZ+354.95ZD34-2-1+435.02(ZD)32-(2)JD34-1a1—42°00'00''a2—48°08'10''HY+091.306至南岭100km上行500km半自动闭塞双线单线及双线并肩（半自动闭塞）N85L一1499.20Ts一28±5℃(6.51)B/2粉质粘土碎石土强风化页岩夹砂岩弱风化页岩夹砂岩A=+46.62(A、B或C组填料)占地：40亩+460+5155348涵洞DK9=929.38台前台尾ZH:183+487.74边坡点轨底线N9Φ86N2Φ16mN1Φ20@10N10°E/76°N弱富水区，岩体节理裂缝不发育地下水主要为构造裂隙水和风化裂隙水正线里程X=145站场与区间路基分界历程150站台部署里程100车站中心路基面高程DK130距南港车站230km180×8×0.5400×8×0.32%-4%i-1.2%2m-4m钢筋混凝土梁立交桥银杏公路道路终点K2+1801-2.5m板涵①②③④⑤⑥⑦⑧⑨①②③④⑤⑥⑦⑧⑨ⅠⅡⅢⅣⅤⅥⅦⅧⅨⅩⅪⅫ-2.5(池底)+4.0+5.0ABCDEFGHIJKLMNOPQRSTUVWXYZCOW1W10DN150D108×4de50×20(PE)DN250×40(铁)DN200×12(铁)DN200(铁)DN200×13(铁)d200×39（筋）d200×35（筋）i—4%排出口HEYELGYTAHYA50×2×0.5-500m8D-500mVBCTV&DT&DUTPG-Q6-X1-F1-K1-X2-S1-S2-X1-F2中长期铁路网规划图连盐铁路新建成都至贵阳铁路乐山至贵阳段线路平面示意图哈大线K700+572长春至吉林城际铁路设计起点DK0+000=DK1+000短链35.79m长春+19-24m+（64+64）m波状台地区出露的地层主要有第四系全新统冲积、洪积粉质粘土2(34-32m)腰占西沟特大桥DK24+089.50老安山隧道文川河特大桥福仁山隧道得利隧道14171mL—248区段站始发站改建铁路近平面图1：100A-A050m100mA大样2.57.5144mm~5mm1mm~3mm10510080100105注明：因货场缓建道岔编号D17kg/mN800N600N400E1000E600E400E200CK25DK16DK94工业企业线起点工企线DK0+00=DK12545°1438.561526.841324.651275.89(8.400)(5.200)4.2001%2%3%4%1：21：51：31：4+130.24+120.25+132.26+141.14R10R8R9R5.5R6.7Φ30Φ40Φ34Φ35Φ10Φ920°65°70°90°115°80°丁站方向乙站方向甲站方向戊站方向丁站乙站戊站1727/15002260/19882732/23652912/2540现状初期近期远期上行下行货流密度客车对数年度1500/11522030/18662988/22583270/2980单线双线单双线南岭DK411+000五泉东固新源DK451+300DK493+200平行运行图通过能力（对/日）10mm8~12AK1az—51°30'00''R—800JD6AK2JD7ay—58°00'00''R—600AK3HZ+123CK7JD13ay—43°10'R—700l—160T—357L—687ZH+435CK6HZ+609JD12az—59°40'R—600l—140T—414L—764ZH+845CK5JD34-2YZ+224.95HZ+354.95ZD34-2-1+435.02(ZD)32-(2)JD34-1a1—42°00'00''a2—48°08'10''HY+091.306至南岭100km上行500km半自动闭塞双线单线及双线并肩（半自动闭塞）N85L一1499.20Ts一28±5℃(6.51)B/2粉质粘土碎石土强风化页岩夹砂岩弱风化页岩夹砂岩A=+46.62(A、B或C组填料)占地：40亩+460+5155348涵洞DK9=929.38台前台尾ZH:183+487.74边坡点轨底线N9Φ86N2Φ16mN1Φ20@10N10°E/76°N弱富水区，岩体节理裂缝不发育地下水主要为构造裂隙水和风化裂隙水正线里程X=145站场与区间路基分界历程150站台部署里程100车站中心路基面高程DK130距南港车站230km180×8×0.5400×8×0.32%-4%i-1.2%2m-4m钢筋混凝土梁立交桥银杏公路道路终点K2+1801-2.5m板涵①②③④⑤⑥⑦⑧⑨①②③④⑤⑥⑦⑧⑨ⅠⅡⅢⅣⅤⅥⅦⅧⅨⅩⅪⅫ-2.5(池底)+4.0+5.0ABCDEFGHIJKLMNOPQRSTUVWXYZCOW1W10DN150D108×4de50×20(PE)DN250×40(铁)DN200×12(铁)DN200(铁)DN200×13(铁)d200×39（筋）d200×35（筋）i—4%排出口HEYELGYTAHYA50×2×0.5-500m8D-500mVBCTV&DT&DUTPG-Q6-X1-F1-K1-X2-S1-S2-X1-F2中长期铁路网规划图连盐铁路新建成都至贵阳铁路乐山至贵阳段线路平面示意图哈大线K700+572长春至吉林城际铁路设计起点DK0+000=DK1+000短链35.79m长春+19-24m+（64+64）m波状台地区出露的地层主要有第四系全新统冲积、洪积粉质粘土2(34-32m)腰占西沟特大桥DK24+089.50老安山隧道文川河特大桥福仁山隧道得利隧道14171mL—248区段站始发站改建铁路近平面图1：100A-A050m100mA大样2.57.5144mm~5mm1mm~3mm10510080100105注明：因货场缓建道岔编号D17kg/mN800N600N400E1000E600E400E200CK25DK16DK94工业企业线起点工企线DK0+00=DK12545°1438.561526.841324.651275.89(8.400)(5.200)4.2001%2%3%4%1：21：51：31：4+130.24+120.25+132.26+141.14R10R8R9R5.5R6.7Φ30Φ40Φ34Φ35Φ10Φ920°65°70°90°115°80°丁站方向乙站方向甲站方向戊站方向丁站乙站戊站1727/15002260/19882732/23652912/2540现状初期近期远期上行下行货流密度客车对数年度1500/11522030/18662988/22583270/2980单线双线单双线南岭DK411+000五泉东固新源DK451+300DK493+200平行运行图通过能力（对/日）10mm8~12AK1az—51°30'00''R—800JD6AK2JD7ay—58°00'00''R—600AK3HZ+123CK7JD13ay—43°10'R—700l—160T—357L—687ZH+435CK6HZ+609JD12az—59°40'R—600l—140T—414L—764ZH+845CK5JD34-2YZ+224.95HZ+354.95ZD34-2-1+435.02(ZD)32-(2)JD34-1a1—42°00'00''a2—48°08'10''HY+091.306至南岭100km上行500km半自动闭塞双线单线及双线并肩（半自动闭塞）N85L一1499.20Ts一28±5℃(6.51)B/2粉质粘土碎石土强风化页岩夹砂岩弱风化页岩夹砂岩A=+46.62(A、B或C组填料)占地：40亩+460+5155348涵洞DK9=929.38台前台尾ZH:183+487.74边坡点轨底线N9Φ86N2Φ16mN1Φ20@10N10°E/76°N弱富水区，岩体节理裂缝不发育地下水主要为构造裂隙水和风化裂隙水正线里程X=145站场与区间路基分界历程150站台部署里程100车站中心路基面高程DK130距南港车站230km180×8×0.5400×8×0.32%-4%i-1.2%2m-4m钢筋混凝土梁立交桥银杏公路道路终点K2+1801-2.5m板涵①②③④⑤⑥⑦⑧⑨①②③④⑤⑥⑦⑧⑨ⅠⅡⅢⅣⅤⅥⅦⅧⅨⅩⅪⅫ-2.5(池底)+4.0+5.0ABCDEFGHIJKLMNOPQRSTUVWXYZCOW1W10DN150D108×4de50×20(PE)DN250×40(铁)DN200×12(铁)DN200(铁)DN200×13(铁)d200×39（筋）d200×35（筋）i—4%排出口HEYELGYTAHYA50×2×0.5-500m8D-500mVBCTV&DT&DUTPG-Q6-X1-F1-K1-X2-S1-S2-X1-F2中长期铁路网规划图连盐铁路新建成都至贵阳铁路乐山至贵阳段线路平面示意图哈大线K700+572长春至吉林城际铁路设计起点DK0+000=DK1+000短链35.79m长春+19-24m+（64+64）m波状台地区出露的地层主要有第四系全新统冲积、洪积粉质粘土2(34-32m)腰占西沟特大桥DK24+089.50老安山隧道文川河特大桥福仁山隧道得利隧道14171mL—248区段站始发站改建铁路近期开放站既有或新逮铁路近期开放站由中间站扩建为区段站、编组站或始发站摘挂列车区段货物列车摘挂列车安全边界安全策略安全加固安全数据网组合架组合式电气集中联锁组合式信号机构组匣组匣端子组匣柜组匣式电气集中联锁最大限制信号最大允许信号平面图1：100A-A050m100mA大样2.57.5144mm~5mm1mm~3mm10510080100105注明：因货场缓建道岔编号D17kg/mN800N600N400E1000E600E400E200CK25DK16DK94工业企业线起点工企线DK0+00=DK12545°1438.561526.841324.651275.89(8.400)(5.200)4.2001%2%3%4%1：21：51：31：4+130.24+120.25+132.26+141.14R10R8R9R5.5R6.7Φ30Φ40Φ34Φ35Φ10Φ920°65°70°90°115°80°丁站方向乙站方向甲站方向戊站方向丁站乙站戊站1727/15002260/19882732/23652912/2540现状初期近期远期上行下行货流密度客车对数年度1500/11522030/18662988/22583270/2980单线双线单双线南岭DK411+000五泉东固新源DK451+300DK493+200平行运行图通过能力（对/日）10mm8~12AK1az—51°30'00''R—800JD6AK2JD7ay—58°00'00''R—600AK3HZ+123CK7JD13ay—43°10'R—700l—160T—357L—687ZH+435CK6HZ+609JD12az—59°40'R—600l—140T—414L—764ZH+845CK5JD34-2YZ+224.95HZ+354.95ZD34-2-1+435.02(ZD)32-(2)JD34-1a1—42°00'00''a2—48°08'10''HY+091.306至南岭100km上行500km半自动闭塞双线单线及双线并肩（半自动闭塞）N85L一1499.20Ts一28±5℃(6.51)B/2粉质粘土碎石土强风化页岩夹砂岩弱风化页岩夹砂岩A=+46.62(A、B或C组填料)占地：40亩+460+5155348涵洞DK9=929.38台前台尾ZH:183+487.74边坡点轨底线N9Φ86N2Φ16mN1Φ20@10N10°E/76°N弱富水区，岩体节理裂缝不发育地下水主要为构造裂隙水和风化裂隙水正线里程X=145站场与区间路基分界历程150站台部署里程100车站中心路基面高程DK130距南港车站230km180×8×0.5400×8×0.32%-4%i-1.2%2m-4m钢筋混凝土梁立交桥银杏公路道路终点K2+1801-2.5m板涵①②③④⑤⑥⑦⑧⑨①②③④⑤⑥⑦⑧⑨ⅠⅡⅢⅣⅤⅥⅦⅧⅨⅩⅪⅫ-2.5(池底)+4.0+5.0ABCDEFGHIJKLMNOPQRSTUVWXYZCOW1W10DN150D108×4de50×20(PE)DN250×40(铁)DN200×12(铁)DN200(铁)DN200×13(铁)d200×39（筋）d200×35（筋）i—4%排出口HEYELGYTAHYA50×2×0.5-500m8D-500mVBCTV&DT&DUTPG-Q6-X1-F1-K1-X2-S1-S2-X1-F2中长期铁路网规划图连盐铁路新建成都至贵阳铁路乐山至贵阳段线路平面示意图哈大线K700+572长春至吉林城际铁路设计起点DK0+000=DK1+000短链35.79m长春+19-24m+（64+64）m波状台地区出露的地层主要有第四系全新统冲积、洪积粉质粘土2(34-32m)腰占西沟特大桥DK24+089.50老安山隧道文川河特大桥福仁山隧道得利隧道14171mL—248区段站始发站改建铁路近第1章绪论1.1CTCS-2列控中心仿真研究背景及意义近几年来，我国的铁路建设得到了相当大的提高，尤其是在高速铁路方面有非常大的飞跃，目前其总里程已经超过2.5万公里，并且实现了市与市之间通高速，每个小时的速度已经有350千米/小时，铁路舒适感和飞机相差不大，是中国的广袤土地上的一道靓丽的风景。2018年，新型动车组“复兴号”更是让人们感觉更加舒适，更加快速，更加便捷。高铁系统的安全性和可靠性都是需要设备使用冗余技术来保障的。作为信号系统安全基础设备的CTCS也是当仁不让的使用此项技术的，同时它能够接收来自地面设备的各种信息并利用它们，这样就使列车驾驶员能更加地清楚了解地面设备的情况再通过车载设备来控制列车的速度。为达到高效率、高舒适度、高安全性的铁路运营要求，列控中心技术必须得到大大提高，最先，我国引进西方的列车控制系统，其的分级为ETCS-0级~ETCS-3级，我国CTCS分为四级，分别为CTCS-0级~CTCS-4级，其中CTCS-2级运用最为广泛。为了实现列控中心TCC各接口信息的传输信息的准确无误，计算机仿真技术就是有效的手段。本论文不但实现了CTCS-2级列控中心的部分功能的仿真，而且实现与车站CTC、CBI、列车模拟器的通信连接。本文是通过计算机上对CTCS-2级列控中心的部分功能进行仿真，减少成本,提高车辆运输效率,保证高铁安全性是相当必要的。本论文还在接口这一模块进行深一步的探讨，实时的模拟列车运行整个过程各个系统的信息传递状态。1.2CTCS-2列控中心仿真研究现状现在,我们国家在列控系统的开放方面还在刚开始的时期。但是我国建立多家公司进行研究并生产列控中心。我国铁路专家对于车站TCC的技术进行研究，其中包含通号集团全路通信信号设计院、中国铁道科学研究院、交大微联科技有限公司等单位，他们将对车站TCC技术方案验证和测试,建立相应的项目组研究和开发属于我们自己的车站列控中心。所有国家积极并努力研究属于自己的列车控制系统,并且有些成果已经投入运行。目前,然而发达国家拥有代表性的客运专线的列控系统例如:马德里一莱里达高速线、罗马一那不勒斯高速线的ETCSZ级列控系统;西方发达国家一般采用较多、技术成熟的ETCSI级系统等。国外对于高铁列控系统这一块研究还是很深入的，并且他们的产品的技术都较为成熟。在列控中心仿真这一模块，我国的铁路有关专家学者们对此也做了许多的工作，他们都分别针对C2级和C3级的系统进行仿真。他们大都对TCC的功能这一块的模拟都做的比较全面，比如李骥群学者在TCC模拟上对轨道电路这一块仿真得很全面和详细；黄宗庆学者在列控中心接口部分的仿真和研究也是很深入的；李铭学者在C2级的列控中心的区间信号机点灯及其他功能都模拟的很优秀等。他们的研究都很出色，并对铁路事业的发展有着促进作用，但是美中不足的是他们都只是对TCC的功能、接口进行分开研究的，这样可能会造成与实际情况有些偏离，所以本文将列控中心和接口结合起来进行仿真。1.3论文的主要内容及系统结构安排本论文对CTCS-2级列控系统的结构和工作原理进行分析，使用了计算机模拟仿真技术，设计并开发了一套CTCS-2级列控中心。该系统主要由四大模块组成，分别是：CTCS-2级列控系统维护终端界面、接口连接、区间信号机点灯、区间轨道电路发码显示模块。尽可能的最大限度还原现场列车真实运营场景，详细设计每个功能模块，预留后续扩展接口，具有较强的可扩展性，设计出与其它系统间的通信协议，实现其他系统之间连接，让本文的列控中心能够实现仿真。之后对完整的系统进行全方位的调试和测试，使其能够安全、可靠、稳定的运行在实际场景中。本论文章主要内容及结构安排如下：第1章绪论主要论述了CTCS-2列控系统研究背景及意义，并根据CTCS-2列控系统接口在现阶段发展存在不足，指出了传统的列控仿真系统只有单一的测试系统功能而实现与各个系统之间的实时通信，说明了论文研究的必要性和真实性，并介绍了列控仿真系统在国内外发展和研究现状。第2章CTCS-2列控中心系统结构和功能概述本章针对C2级的TCC的结构和功能进行简要介绍，并对其仿真的系统的各个模块进行详细说明和简单介绍本论文的仿真功能块。第3章CTCS-2列控中心系统接口协议首先对列控中心系统接口做一个总体的概述，然后针对列控中心与外部物理接口的说明警冲标，并介绍安全通信协议。最后要求对接口的规范进行分析，还应详尽的叙述具体接口的规范及接口通信的定义。第4章CTCS-2列控中心系统仿真设计与实现CTCS-2级列控中心的仿真设计分为界面设计、接口设计、功能实现。界面设计主要以站场图为主，接口设计为与列车模拟器、与车站联锁、与车站CTC的三个接口编码与解码设计。功能实现分为区间信号机点灯和区间轨道电路编码两者的实现。第5章CTCS-2列控中心系统仿真测试仿真测试分为接口仿真和部分功能仿真。首先，各个系统之间进行接口通信，然后通过接收到的数据进行主界面的刷新，最后，进行区间信号机点灯和轨道区段的发码。第2章CTCS-2列控中心系统结构和功能概述2.1CTCS-2列控中心系统结构2.1.1CTCS-2列控系统结构CTCS-2级列控系统在我们中国的大铁上运用极其普遍，并且它是成熟信号系统技术设备基础上，通过适当增加信号设备来实现连续式列控系统，它一般是通过轨道电路的目标距离速度来进行控制的。其构成图如图2-1所示：图2-1CTCS-2级列控系统构成图（1）地面子系统①列控中心：根据轨道区段的状态及进路信息里的“室外三大件”的状态来进行计算列车是否可以进行行驶的条件判断和把速度防护曲线传递给车载子系统。②轨道电路：一般运用“三点检查”进行列车是否占用该区段或者是否完全出清该区段的检查。（2）车载子系统其组成结构图如下所示：图2-2车载子系统组成图2.1.2CTCS-2列控中心系统结构我们的列控中心系统通常是由安全主机、驱采、通信接口、维护与电源组成，列控中心实时的监测列车在区间运行的实时位置，并实时的接收站内的进路信息，进行轨道区段的编码工作；每当接收到CTC发送的闭塞分区限速命令时，列控中心立即将该信息手动传输到应答器，然后应答器再将此信息传给LEU，LEU再传递该信息给列车的车载子系统。如下图2-3所示：图2-3列控中心实体图2.2CTCS-2列控中心系统的主要功能概括2.2.1CTCS-2列控中心系统的主要功能CTCS-2级列控中心的主要功能：（1）实现列控运算、产生LEU控制信息和对有源应答器报文的存储与控制；（2）控制轨道电路的载频和低频信息编码和站内及区间轨道电路发送方向；（3）有故障自诊功能；（4）列车在区间的走行逻辑,对轨道电路占用、出清、非正常逻辑进行判断和报警,并采取必要的防护措施；（5）区间信号机点灯控制；（6）无岔站信号及进路控制；（7）区间运行方向与闭塞控制；2.2.2CTCS-2列控中心仿真系统的功能完整的CTCS-2级列控中心仿真系统的功能模块如图2-4所示：图2-4列控中心仿真系统功能模块图(1)临时限速及有源应答器报文生成模块：①我们的列控中心将CTC传递过来的闭塞分区的限速信息进行接收和处理；②当列控中心一旦接收到联锁系统发过来的进路信息时，立即进行报文的选择，然后再CTC发过来的限速信息，通常是以应答器规定的报文形式一一地存入其默认报文中，这样后应答器就可以生成它自己的用户报文了，接着应答器自身将用户报文经过一定的运算后，变成传输报文，最后将这个传输报文输送给LEU。(2)轨道电路编码模块：①首先由轨道电路传输的信息来判断闭塞分区的状态；②区间轨道电路编码的判定原则一般常见的有三种；③站内轨道区段编码的判断规则是CBI发过来的进路信息和站内的轨道区段的状态。(3)区间信号机点灯模块：①红灯断丝检查；②区间信号机点灯。(4)区间改方模块：①区间改方；②防止其他设备出错了，而进行列车行驶方向的变化。(5)通信接口模块：实现模块间的数据交换。然而本论文针对列控中心的部分功能进行仿真，其包括轨道区段编码、区间信号机点灯和接口通信，如图2-5所示：图2-5列控中心仿真系统图2.3本章小结本章节主要对C2级列控系统的结构和列控中心结构分别进行叙述，针对CTCS-2级列控中心的主要功能进行介绍，详尽介绍了CTCS-2级列控中心仿真系统的主要功能并对本论文要做的该系统的功能概述。第3章CTCS-2列控中心系统接口协议本文以交大峨眉200米轨道线路为基础进行CTCS-2列控中心的仿真。本章对仿真接口的整体框架进行说明，还要对CTCS-2级列控中心的接口协议进行详细的介绍，并根据本文仿真的需求对接口协议进行调整部分着重介绍。3.1列控中心仿真接口框架列控系统为了确保列车运输的安全，通常会采用设备中常见的技术，如：二×二取二，在设计符合大铁规定的原则下设置在每个车站的。整套系统是以交大峨眉站、新眉山站、乐山站和古溪站这四个站进行仿真设计,由于时间和条件的限制，列控中心只做了交大峨眉站到新眉山站之间的区间。本文的列控中心只与车站CTC、交大峨眉站的计算机联锁、列车模拟器进行连接通信。本来原有的列控中心并没有与列车模拟器通信这一接口，但是在该系统里需要知道轨道区段的占用/空闲状态，因而有了列车模拟器，其主要是模拟列车在交大峨眉站和新眉山站之间运行，并实时将轨道区段的状态发送给TCC,再由TCC转发给CBI和车站CTC。列控中心在交大峨眉站和新眉山之间的接口如图3-1所示：图3-1系统整体结构图需要与两个车站的联锁通信吗3.2列控中心TCC的安全通信协议铁路信号安全通信协议是列控系统专用通信协议，运行在铁路安全通信系统，其包含安全层、应用层和通信层。它的安全技术主要有序列号、时间戳、超时、源标识、反馈报文和双重校验等技术，其作用如图3-2所示。图3-2安全协议构成图3.3列控中心接口协议列控中心在与交大峨眉站的联锁系统、车站CTC进行连接时，通常都采用串行接口，同时采用大铁上通用的技术--冗余技术,来保障信息传递的安全和正确性。但是列车模拟器没有其特定的规范进行参考，因而按照CBI和车站CTC的标准进行接口协议的定义。因为列控中心数据都是安全信息，所以除了保证消息传递的可靠性外,还需要保障数据通信过程中的安全。3.3.1列控中心与车站联锁的接口列控中心在与交大峨眉站的联锁系统连接时，一般会使用以太网接口，如图3-3所示，它们之间进行数据传输时，通常会使用通用的协议，但是在通信上，只要传输的是安全信息，都将使用铁路上的安全通信协议。TCC与交大峨眉站CBI之间按照500ms固定周期进行数据交替。图3-3列控中心与联锁连接图（1）交大峨眉站联锁发送的数据信息CBI给TCC发送放入数据信息，如图3-4所示。图3-4CBI向TCC发送数据图然而在本论文的仿真中，交大峨眉站联锁系统只需传输进路信息数据块给列控中心，以接收站内排列进路的状态及信息，由于没有做太多的硬件设备即继电器的采集与驱动这一模块，所以只是传输联锁系统上进路信息的数据块，用于列控中心界面的刷新与列车模拟器系统中列车运行。接下来就是对接口通信的协议的具体讲述。进路信息数据块的编排用两个字节来表示进路的编号，共16bit,其中低10位为进路编号，11-12位表示进路性质（00：接车进路；01：发车进路），13位为（0：引导进路；1：正常进路），14-16为用于表示车站编码，由于联锁系统只做了交大峨眉站（001：交大峨嵋站）。用一个字节表示该进路信号机的状态，低6位为信号机显示状态见表3-1，由于高铁站的信号机通常情况下是灭灯状态，用高两位表示（00：点灯，11：灭灯）。字节3以后是该进路的区段状态编码协议，是根据进路依次填写的。图3-5TCC向CBI发送数据包图然而本文对只需要向交大峨眉站联锁系统发送区间闭塞分区状态数据块其包括交大峨眉站的3个离去区段和3个接近区段，以便交大峨眉站的车站联锁系统根据这些区段进行排列进路。在此同时，列控中心还需要将列车模拟器发来的轨道区段占用状态码只截取交大峨眉站的轨道区段的码子给交大峨嵋站联锁系统。其编码协议如下表3-2所示，将接近区段和离去区段的状态依次填写，用2个bit来表示。3.3.2列控中心与车站CTC的接口列控中心为了保证列车运输的安全，在与车站CTC通信时，会使用到串行接口，一般情况是标准异步RS-422。并且TCC为了让通信更加可靠，会使用以太网接口与CTC连接，不管是硬件设备，还是网络通信都采用现在铁路上常用的一种技术--冗余技术，如图3-6所示。图3-6TCC与车站CTC连接图由于本系统CTCS-2级列控中心及接口仿真对于调度集中这块的临时限速信息模块没有进行详细的设计，因此为了其他数据更加容易解析，在接口通信这一模块车站调度集中系统不用发任何数据给列控中心。所以本小节只需介绍TCC向车站CTC传递的数据，其数据如图3-7所示：图3-7TCC发送数据包图由于限制线路只进行正方向的列车作业，所以就简化了列控中心向CTC发送的数据，其内容如下所示：①车站综合状态数据块原本车站综合数据块包括四个车站、TCC、还有TCC与各个系统的连接状态都要发给车站CTC，方便中心CTC对整条线路的监控，对调度任务进行适当的调整。然而本文只是模拟了一个TCC、CBI、车站CTC,因而只需要发送TCC与CTC和车站联锁的连接情况，用4个bit位表示其连接情况，所以占用1个字节，其协议如下表3-4所示列控中心向列车模拟器发送的数据如图3-9所示，区间信号机显示状态其协议和轨道电路编码协议见3.3.2，因为列车模拟器要模拟列车的运行，列车又必须在进路排列并信号机开发后才能行驶，所以列车也需要交大峨眉站的联锁系统的进路信息。图3-9TCC向列车模拟器发送数据格式图3.4本章小结本章节主要对仿真设计的接口框架和铁路安全通信协议进行简要说明。分别对列控中心与交大峨眉站的计算机联锁、车站CTC、列车模拟器之间的接口通信协议进行详细介绍，同时对列车模拟器的作用做了简要的说明。第4章CTCS-2列控中心系统仿真设计与实现4.1列控中心总体设计针对列控中心（TCC）系统仿真设计及实现的过程进行详细说明，并结合第二章其结构和工作原理设计，参照第三章接口通信协议对TCC的数据进行编码及将收到的数据进行解析同时刷新列控中心的维护终端界面。CTCS-2级列控中心的仿真实现是基于MicrosoftVisualStudio2015和MicrosoftSQLServerManagementStudio2014平台上使用XML文件、多线程、委托等方法来进行设计。图4-1列控中心框架图如图4-1所示：列控中心主要由通信接口、轨道电路编码、区间信号机点灯这三大模块组成。通信接口包括接收和发送数据，并对接收数据的解析和实现界面实时刷新。轨道电路编码和区间信号机点灯是列控中心的主要的功能部分，本论文不单对这两功能进行仿真还要对它们的状态进行编码存入数据库，实现实时的发送数据。图4-2系统实现流程图列控中心的系统整体实现流程图如图4-2所示，当打开列控中心仿真系统，首先进行通信接口连接，然后进行实时解析列车模拟器和车站连锁的数据并实时刷新界面，运用解析出来的信息进行区间信号机点灯和轨道区段的编码功能，然后将二者的状态写入数据库，再实时的把数据库里的码发送给列车模拟器、车站CTC。4.2列控中心维护终端的界面设计列控中心的维护终端的界面主要分为4大块，其分别是菜单栏、工具栏、站场图及提示信息框。主界面如图4-3所示：图4-3列控中心主界面（1）菜单栏菜单栏包含站场显示、列控实时信息、ZPW-2000实时信息、曲线分析、报警信息、回放导出、系统配置及帮助。站场显示主要是信号机名称、轨道电路名称、道岔名称、闭塞分区发码这四个在列控中心维护终端界面的显示，当界面刷新时，将他们都隐藏起来，其主要作用是为了界面的美观及让界面在刷新时更加明了直观。如图4-4所示图4-4站场显示列控实时信息是列控中心功能的大部分内容，其原因是列控中心的维护终端的主要作用是对数据的一个监视作用。列控实时信息由联锁进路信息、信号降级显示、临时限速状态、线路边界信息、区间信号机点灯状态组成。如图4-5所示，然而本论文只对列控实时信息中的联锁进路和区间信号机点灯状态进行详细的设计与实现其功能。其主要原因是设计的数据不太完善和时间的限制，让其他功能没有得到在本论文中展示，这是本论文的不足和遗憾。（但设计充分考虑了可扩展性，将来可以进一步补充功能）图4-5列控实时信息ZPW-2000实时信息就是模拟闭塞分区轨道电路的发码这一块功能。由于没有硬件设备ZPW-2000的轨道电路信息，没法采集到数据，所以为了整个系统完整，在此进行轨道电路模拟发码，如图4-6所示。图4-6轨道区段编码列车模拟器实时信息是列车模拟器传输过来的轨道电路实时信息，列车运行模拟器主要是实现列车运行及追踪的功能。这样实时信息地得到才能够进行区间信号机点灯和闭塞分区轨道电路的发码。（2）工具栏这部分主要包括切换、回放、状态、查询、信息、事件、日志。（3）站场图主界面的站场图包括交大峨眉站和新眉山站，其中交大峨眉站是参照学校200m轨道的交大峨眉站为准进行设计的，如图4-7所示。图4-7站场图交大峨眉站是一个单线双向线路的站场，左边连接交大主楼站，右边连接交大大板站，由于站场的需要将右接的加大大板站替换成新眉山站。又新眉山站是双线双向的站场，所以交大峨眉站右边是双线双向的。交大峨眉站有两条侧线：3G、1G和一条正线：ⅡG。下行是接交大主楼站的，有进站信号机：X其采用高柱，为了方便司机瞭望；接着是一个X进站信号机带调车信号机：D1、D2、D4；出站信号机：S3、SⅡ、S1、X3、XⅡ、X1，其采用矮柱，并且出站信号机的灯位有一个空灯位主要是为了让防止信号机灯光混析让司机的判断有误；调车信号机有并置调车信号机：D18和D16，单调信号机：D14，差置信号机：D12和D8、D10和D6。绝缘节有一个特殊的侵限绝缘节，主要是两道岔的距离太近，警冲标的距离太近才设置，防止列车相碰撞；进站信号机包括正方向和反方向进站信号机：S、SF，如图4-8所示。图4-8交大峨眉站新眉山站是双线双向的一个小型站场，如图4-9所示，其有两条侧线：3G、4G和两条正线：ⅠG、ⅡG。新眉山站进站信号机有正方向和反方向进站信号机：X、XF、S、SF；出站信号机：S4、SⅡ、S1、S3、X4、XⅡ、XⅠ、X3；调车信号机有进站信号机带调车信号机：D1、D3、D2、D4；单调信号机：D5，D6。图4-9新眉山站界面上还有交大峨眉站和新眉山站之间的区间布置图，如图4-10所示。其信号机是采用的是移频四显示的，其显示灯位分别是红、黄、绿黄、绿这四种。区间的轨道电路的命名都是按照交大峨眉站的位置坐标为标准，每一个区间按照1000m-1500m来进行划分，两站之间的区间划分为10个闭塞分区的，每一个闭塞分区的命名是按照公里数+百米数构成的如：2665、2705、2804等，单数为下行，双数为上行，其区间信号机的命名就为防护该闭塞分区的名称。图4-10区间布置图（4）提示信息框提示信息框主要是用于提示列控中心维护终端的操作步骤和接收数据的信息。4.3通信接口实现列控中心维护终端主要是一个监督区间安全、区间与车站之间的连接安全、各个设备之间通信安全，以保证列车在区间中的运行的安全性。对于接口通信这一模块，我们按照之前第三章所规定的协议进行编码的，本小节主要讲解如何实现通信连接成功和在代码上如何进行编码、译码及界面的可视化的实现。4.3.1实现通信接口连接在本论文中，列控中心（TCC）在通信接口这一模块采用的是Socket通信的，通过改IP地址和端口号进行连接实现的。Socket通信分为服务端和客户端，列控中心在与车站连锁（CBI）、与车站调度集中（CTC）、与列车模拟器三者之间的连接模块图，如图4-11所示，为了后续开发做准备，在TCC这一块以后可能会有多个列车模拟器的连接，因此，我们定义列控中心在通信接口这作为服务端与客户端车站联锁、车站CTC、列车模拟器进行互连。图4-11接口连接图首先，对于通信接口模块，我们将进行在窗体上连调，在Socket通信服务端窗体上手动输入本机的IP地址和端口号，进行手动发送数据的测试。然而在实际情况中，接口通信这一块并没有特定的窗口，而且对于发送数据这一块都是采用周期为500ms一次进行实时发送的。对于TCC作为服务端连接三个客户端，而且他们都向TCC实时发送站场的信息，如何分辨是谁发来的数据信息。这两大问题成为TCC维护终端仿真里接口通信模拟的两大难点。难点一：实现以周期500ms实时发送和接收数据将通信窗体在TCC维护终端主界面用按钮来实现，并用XML文件来代替手动输入的IP地址和端口号。代码实现：将写入的XML文件放在F盘（存入磁盘）中，在TCC维护终端系统打开之前，必须先对IP地址进行修改，由于每进入一个局域网，电脑的IP地址都会自动修改，想进行连接就必须修改其IP地址。列控中心维护终端系统作为服务端，可以连接多个客户端，但是Socket通信的服务端只能进行一次的监听工作，所以将Socket通信的监听工作放在按钮“接口通信”里XML文件的读取。然而之前的Socket通信只能进行手动的发送数据，我们采用让其沉睡500ms，并实时的循环发送。Socket通信只能一次对一个客户端发送数据，并不能一对多的实时发送数据的。针对这一难点，我采用多线程的方法来解决这个问题，对于车站计算机联锁、车站调度集中、列车模拟器这三个客户端，我针对他们的发收问题分别开设了两个线程，这样多线程的手段能够各不干扰地发收数据。这样就能更好解析来自车站联锁系统和列车模拟器的数据并实现界面的可视化。当IP地址修改保存后，打开列控中心维护终端主界面，点击“通信接口”按钮，当提示框显示“TCC监听成功”时，按钮“通信接口”显示绿色，这时就等待客户端CBI、车站CTC、列车模拟器的连接，当连接成功时其对应按钮会变成绿色，并且会在提示框进行提示。难点二：如何区分是哪个客户端实时发来的数据原本的Socket通信只是接收一对多，而发送仍然是一对一的，在难点一我们的以解决。然而对于作为服务端列控中心会实时的接收来自车站联锁和列车模拟器的站场的信息，由于他们之间的编码协议并不一致，所以这两部分信息必须分别进行解析。对于这一问题的代码实现如下4-12流程图所见，图4-12接口连接流程图通过读取XML文件里的IP地址和端口号进行识别。本来对于Socket通信的服务端没有必要知道客户端的IP地址和端口号，再者客户端的端口号没有固定的值是电脑随机生成的。因此，对于客户端那边就要将端口号在程序中确定下来，并且客户端与服务端连接一次，以防止重复连接带来的错误。在这样端口号固定后，每个客户端都有属于自己的端口号且都是唯一的，这样作为多客户端的服务端就可以通过这个来将他们一一区分开。4.3.2实现接收数据的解析和界面的可视化本论文的TCC维护终端需要分别向车站联锁（CBI）、车站调度集中（CTC）、列车模拟器发送不一样的数据，同时也需要接收来自CBI和列车模拟器的数据。由于本论文对临时限速这一模块没有深入研究，因而车站CTC就无需发送临时限速命令给TCC。该小节讲述TCC对CBI和列车模拟器发来的数据进行解析，并同时实现界面站场图的可视化。（1）实现车站联锁数据的解析和界面可视化CBI需要向列控中心发送交大峨眉站的站内信息，包括信号机状态、轨道区段的状态、进路信息等。根据第三章联锁与列控中心接口规范协议，联锁只需发进路信息给TCC。按照规范需要一份交大峨眉站的联锁表，并将其存入数据库，以便解析后进行进路的查找。①数据的截取由于联锁发的数据是按照排一条进路就发一条进路信息并不是发送交大峨眉站的全部设备状态信息，因而TCC接收到的数据长度是不固定的，在截取问题上也有些问题。对于不固定的数据，采取循环不断进行截取的方法来实现。其实现流程图4-13如下所示：图4-13截取流程图按照协议第两个字节表示进路信息，首先要按16位一截然后将其放入一个数组a中，然后对该数组进行协议的截取；然后第二个字节是该进路的信号机状态，因而也截取8位放入数组b中，接着对该8位进行分别截取；最后的数据是轨道区段的状态情况，放在数组c，将其分别按每两位一截的方法截取。这样就实现数据的截取。①数据的截取列车模拟器的发送过来的轨道区段的状态的数据是固定的，本论文对该块数据采用的定义多个变量，每2位为一段进行截取。②界面的刷新界面刷新仍然还是采取委托的方法。其轨道区段包括交大峨眉站、新眉山站及其两站之间的区间，轨道电路的状态00：故障状态；01：占用状态；10：空闲状态；11：分路不良状态。采用委托刷新界面的代码如图4-14所示：图4-14委托代码图由于车站联锁和列车模拟器发过来的数据有重叠部分，那部分中就是交大峨眉站的轨道电路的状态，其联锁那边的锁闭和列车模拟器的空闲状态重叠，如果不对数据进行处理就界面会出现闪烁现象。因而必须在数据解析时，要进行数据信息的优先级判断，其流程图如图4-15所示，由图可知，列车模拟器的轨道区段占用状态优先级最高，其次是车站联锁轨道电路锁闭状态，最后是轨道区段空闲状态。图4-15优先级流程图4.4轨道电路编码仿真设计作为列控中心维护终端，轨道电路发码功能是必不可少的一部分。本论文主要是模拟交大峨眉站到新眉山站的轨道电路的发码情况，该段线路是客运专线，因而区间采用了ZPW-2000A的无绝缘轨道电路。虽然线路是满足CTCS-2级列控模式下的双线双向的，但是由于时间、条件的限制，只进行正方向的接发车任务，针对反方向的接发车任务就不进行仿真设计了。区间正方向时，轨道电路按追踪码序进行发码，并且站内和区间都采用同一种制式的轨道电路，这样以便编码的统一性和正确性。轨道电路发码按照其的编码原则的不同，可分为站内轨道电路编码和区间轨道电路编码。警冲标站内轨道电路编码又分股道编码和道岔区段编码。其分类模块如图4-16所示：图4-16轨道电路编码分类图4.4.1区间轨道电路编码本论文只做了一个列控中心，列车运行都只仿真正方向接发车任务，因而影响轨道电路发码的只有区间轨道区段状态和前方进站信号机的显示这两个因素。（1）区间轨道区段状态针对轨道电路编码问题，列控中心与计算机联锁系统一样都采用了“三点检查”法进行区间轨道区段占用、出清状态的判断，而站内轨道区段则是对区段占用、出清、锁闭状态的判断。这些轨道区段的状态分别来自于列车模拟器和车站联锁系统。（2）前方进站信号机的显示由于进站信号机的显示状态不同，其轨道电路的码序也是有所不同的。例如图4-13的各种情况：图4-17接近区段编码图轨道电路的码子的含义如下表所示表4-1轨道区段码序含义表轨道区段编码轨道区段编码含义L5前方有7个及以上闭塞分区空闲L4前方有6个及以上闭塞分区空闲L3前方有5个及以上闭塞分区空闲L2前方有4个及以上闭塞分区空闲L前方有3个及以上闭塞分区空闲LU前方有2个闭塞分区空闲U前方有1个闭塞分区空闲H立即采取紧急停车编码代码实现（1）区间轨道电路状态（占用、空闲）其区间轨道电路状态根据列车模拟器传输过来的数据解析来判断该轨道区段是否占用，（10表示空闲状态，01表示占用状态），编码实现流程图4-18图4-18区间编码流程图（2）前方进站信号机显示前方进站信号的显示要与前方站交大峨眉站的车站联锁计算机进行数据连接，得到交大峨眉站的进路信息，判断信号机的显示状态，然后将接近轨道区段的码序。其代码实现的流程图4-19所示:图4-19接近区段编码流程图区间轨道电路编码的码序通过C#语言编程实现后将每个闭塞分区的编码实时的在主界面对应的闭塞分区上的TextBox框里显示出来，这样以方便使用列控中心维护终端的操作人员进行观察和监测其何处是否出现故障。4.4.2站内轨道电路编码本论文将对交大峨眉站和新眉山站这两个站的轨道区段进行编码，站内的轨道区段分为股道和道岔区段两种，并且这两种轨道区段的编码原则是不同的。（1）股道区段编码发车股道编码原则：当出站信号机没有开发、点红灯状态或未接收到车站联锁发来的联锁进路信息时，该股道发HU码。当出站信号机开发时，若进路为正线发车（如XⅡ到SF的正方向发车进路）时，ⅡG编码应与SF的显示以及1LQG的编码相跟从，如4-2表所示。若进路为侧线发车进路（X3到SF的正方向发车）时，3G编码应该与SF的显示相跟从，如4-2表所示。表4-2发车股道编码原则表出站信号机状态股道区段编码红灯（H）H绿灯（L）离去区段编码LULLL2L2L3L3L4L4L5代码实现首先根据车站联锁系统发过来的进路信息来判断进路防护信号机的状态和发车进路正线还是侧线发车，然后再根据列车模拟器发来的轨道区段的状态来判断离去区段的占用情况，综合二者的信息，再按照上述编码原则进行股道区段编码。其股道码子都在主界面显示出来。（2）道岔区段编码站内道岔区段编码首先要判断所排进路的方向，所以需要读取站内的方向继电器的状态来进行编码的，由于新眉山站的联锁系统没有做硬件部分，所以道岔区段的编码在列控中心这就没有进行编码。4.5区间信号机显示控制仿真设计列控中心具有区间信号机显示控制的功能和将地面的区间信号进行点灯操作。当列车为正方向运行时，区间信号机的显示与区间闭塞分区码子一一对应；当列车按照反方向运行时，区间信号机应全为灭灯状态，列车是按照机车信号行驶的。所以说本文的区间信号机的显示控制是按照其区间轨道电路的编码来实现的。当列车按照反方向运行时，区间信号机全为灭灯状态。当列车按正方向运行时，若该闭塞分区占用时，防护该闭塞分区的区间信号机点红灯（H）；若闭塞分区未占用时，其对应的区间信号机的显示状态应与闭塞分区的码序一一对应，闭塞分区码序与区间信号状态的关系如下表4-3所示,表4-3闭塞分区码序与区间信号状态的关系表本闭塞分区编码区间通过信号机状态H码红灯（H）U码黄灯（U）LU码绿黄灯（LU）L/L2/L3/L4/L5码绿灯（L）4.6数据库模块由于列控中心要给列车模拟器和车站CTC发送区间信号机的状态信息和轨道电路的编码信息。因而，要将区间信号机的状态和轨道电路的编码信息按照第三章的编码协议进行对应编码的。但是这些数据比较庞大，如果放入数组中进行实时更新，操作不太方便，便使用数据库来实行更新，并实时向车站调度集中和列车模拟器发送数据库中的数据，更加方便和简单。4.6.1区间信号机状态数据块创建区间信号机状态表（SectionSignal），首先创建它的列表，其列名包括区间信号机序号、区间信号机名称、区间信号机状态编码、区间信号机状态四列，将区间信号机序号设置为主键，其不能为空值，其数据类型设置为int以便于写入数据库，其余列都为字符串类型。在代码上，要根据主界面的改变需要实时的将区间信号机状态编码和区间信号机状态实时写入数据库，区间信号机状态编码和区间信号状态是为了便于使用该系统的操作者能够更加直观的观察其状态，见下图4-20所示。图4-20区间信号机数据库表4.6.2轨道区段编码数据块创建轨道区段编码表（SectionCode），创建它的列表，其列包括闭塞分区序号、闭塞分区名称、闭塞分区状态编码、闭塞分区状态、闭塞分区低频码。将闭塞分区序号设置为主键，类型为int型，列表如图4-21所示。在列控中心维护终端主界面的后台必须实时的写入闭塞分区状态编码、闭塞分区状态、闭塞分区低频码这三项，这样做到实时的更新数据库。图4-21轨道区段编码数据库表每次操作结束后，数据库还是会保留当时关闭时的状态，待下次使用列控中心维护终端时给车站CTC和列车模拟器还是发送数据库上次保存的数据，这样就会导致他们界面刷新出现问题。因而，在每次关闭系统后，都要将数据进行初始化设置，否则就会出错。4.7本章小结1.界面设计模块：针对列控中心维护终端的主界面的设计进行解说。其分为4大模块：菜单栏、工具栏、站场图和信息提示框。其主要部分还是站场图，整个列控中心的功能都将在站场图上显示出来。2.接口通信模块：由于本套系统涉及与车站联锁、列车模拟器、车站CTC三者进行数据的交互。本模块从整套系统的接口通信连接到列控中心单独与它们之间的通信，详细讲述列控中心作为服务端是如何进行通信和怎样辨别CBI和列车模拟器发来的数据这两大难点，还有对于CBI和列车模拟器传来的数据的解析和实现界面的刷新。3.轨道电路编码模块：该模块分为区间轨道电路编码和站内轨道电路编码两种。区间轨道电路编码采用“三点检查”来判断闭塞分区的占用情况，再根据由列车模拟器发来的闭塞分区状态进行编码的，而对于交大峨眉站的接近区段和离去区段则要按照联锁发来的信息判断信号机的状态来编码的。站内编码分为股道编码和道岔区段编码，对于道岔区段编码，由于交大峨眉站和新眉山站的继电器采集信息TCC没有做采集这部分，因而就对道岔区段编码没有进行仿真设计；股道编码则是按照CBI发来的防护信号机的状态及离去区段的码序进行编码的。4.区间信号机点灯模块：该模块就是根据其闭塞分区码序对应的关系来实现信号的点灯模拟的。5.数据库模块：本小节是讲述将轨道电路编码和区间信号机状态编码写入数据库并同界面的更新实时的进行数据库表的刷新，还有对数据库进行初始化，还有实时将按照接口协议编码的数据发给车站CTC。第5章CTCS-2列控中心系统仿真测试5.1建立通信过程在建立接口通信时，首先要在XML文件中进行IP地址的修改，由于局域网的不同，IP地址就有所不同。修改IP地址，如图5-1所示：图5-1IP地址修改图当IP地址修改好后，启动列控中心仿真系统，点击按钮“通信接口”，提示框显示“TCC监听成功”，这时就等待客户端的连接，当交大峨眉站的联锁系统、车站CTC、列车模拟器连接成功时，其对应的按钮都由红转绿并提示框进行提示。如图5-2所示：图5-2接口连接成功图5.1.1与联锁系统建立连接当交大峨眉站联锁系统连接成功后，列控中心将实时的发送列车模拟器发来的轨道状态数据。当联锁系统接到车站CTC下达的命令进行排路时，例如：排列X3到SF的侧线发车进路，这是联锁将把进路信息发送给TCC，TCC进行解析后在主界面上显示如图5-3所示，X3出站信号机显示绿灯，该进路上轨道区段显示白光带，表示锁闭状态。可以给一些发送或接到的数据bit截图图5-3解析CBI并实现界面刷新5.1.2与列车模拟器建立连接当列车模拟器连接成功后，TCC就向它实时发送联锁的进路信息、区间信号机显示状态、轨道区段编码状态。若联锁系统排列进路后，列车模拟器接收到此信息后就进行列车初始化，为了便于观看这时将所有区段和道岔的名称隐藏，如图5-4所示，图5-4区段、道岔名称隐藏图当进路是XⅡ到SF的发车进路，列车初始化后，ⅡG显示红色表示占用。当列车运行时，交大峨眉站的轨道区段逐段占用，逐段解锁的状态，当列车驶过信号机XⅡ时，它显示红灯，如图5-5所示。图5-5XⅡ到SF的发车进路5.1.3与车站CTC建立连接当车站CTC连接成功后，列控中心实时的发送轨道区段状态、区间信号机显示状态、轨道电路编码信息给它。5.2列控中心的部分功能展示对于列控中心的功能，本文只进行区间信号机点灯和轨道区段的编码仿真。5.2.1区间信号机点灯区间信号机是移频四显示的，分别为红、黄、绿黄、绿。当单列车运行时，区间信号机的显示情况如图5-6所示，其根据列车模拟器传来的轨道区段的判断，当列车占用该闭塞分区时，其防护信号机显示红色，其后一个闭塞分区的防护信号机显示黄色，再后一个闭塞分区的防护信号机显示绿黄，其后的区间信号机都显示绿色。图5-6区间信号机点灯图当多列车追踪运行时，区间信号机的显示情况如图5-7所示，其显示的顺序如上一样。图5-7区间信号机电灯当列车运行时，在列控中心维护终端的界面上，点击菜单栏上的“列控实时信息”中“区间信号机状态”，就可以弹出区间信号机的状态以表格的形式出现，如图5-8所示，并且它是实时的进行刷新与界面变化一致，其包括区间信号机序号、区间信号机名称、区间信号机状态编码、区间信号机状态。这一表格主要是便于使用列控中心维护终端的操作者更加直观的观察区间信号机的状态。图5-10多列车轨道区段编码当点列控中心维护终端的菜单栏的“ZPW-2000实时信息”里的“区间闭塞分区编码”，就会弹出区间闭塞编码状态的窗口，其是以表格的形式显示，如图5-10所示，，并且它是实时的进行刷新的，且与站场图上的码序一致。窗口包括闭塞分区序号、闭塞分区名称、闭塞分区状态编码、闭塞分区编码、闭塞分区低频码。中国铁路广州局集团有限公司文件广铁建发〔2018〕67号中国铁路广州局集团有限公司关于发布《广铁集团铁路建设项目施工图审核管理办法》的通知各工程建设指挥部、工程管理所：为进一步加强集团公司铁路建设项目施工图审核管理，提高勘察设计文件质量，严格控制工程投资，规范铁路建设项目施工图审核工作，根据《中国铁路总公司关于印发〈铁路建设项目施工图审核管理办法〉的通知》（铁总建设〔2014〕299号），《中国铁路总公司关于铁路局集团公司提前介入铁路建设项目管理工作的指导意见》（铁总办〔2017〕320号），《广铁（集团）公司关于公布〈集团公司机关行政部门主要职责〉的通知》（广铁劳卫发〔2013〕49号），现将《广铁集团铁路建设项目施工图审核管理办法》发给你们，请遵照执行。中国铁路广州局集团有限公司2018年3月26日广铁集团铁路建设项目施工图审核管理办法第一章总则第一条为了进一步加强集团公司施工图审核管理，根据《中国铁路总公司关于印发〈铁路建设项目施工图审核管理办法〉的通知》（铁总建设〔2014〕299号）和现行《中国铁路广州局集团有限公司建设管理办法》，制定本办法。第二条本办法适用于中国铁路广州局集团有限公司铁路建设大中型项目。其它使用更新改造款源的更新改造项目按《广铁（集团）公司关于公布〈广铁集团运输设施设备更新改造计划管理办法〉的通知》（广铁计发〔2016〕249号）办法执行；由路外单位投资的地方涉铁工程建设项目按《广铁（集团）公司关于公布〈广铁集团地方涉铁工程建设管理办法〉（修订）的通知》（广铁办发〔2017〕20号）办法执行。第三条本办法所称施工图审核是指项目管理机构收到勘察设计单位完成的施工图（含变更设计施工图，以下同）后、交付施工单位施工前，组织对施工图进行检查核对的活动。第四条施工图审核是项目管理机构按照批准的建设规模、技术标准、工程投资、建设工期组织建设的重要程序，审核后的施工图是工程招标、工程实施、验工计价和竣工验收的重要依据。第五条项目管理机构组织有关专家或委托具有相应资质的单位对施工图进行审核，项目管理机构对施工图的审核质量负责。项目管理机构应将施工图审核的有关事宜纳入勘察设计合同，明确勘察设计单位对施工图的勘察设计质量负责，施工图审核不免除勘察设计单位对施工图应承担的质量责任，同时明确设计文件提交时间、按照审核意见修改施工图等内容和要求。第六条施工图审核必须严格执行工程建设强制性标准、铁路建设规程规范和初步设计批复意见，切实提高施工图的质量。第七条中国铁路总公司工程管理中心（以下简称工管中心）归口管理铁路建设项目施工图审核工作，对施工图审核工作进行监督、检查和考核。第八条工管中心直接组织重大桥梁、隧道、新型无砟轨道、省会城市及重点城市客运车站站房的施工图审核以及典型工程的施工图审核。审核的重点为技术方案、工程措施和结构安全等，审查意见为施工图最终意见。第二章审核依据及内容第九条施工图审核的依据：（一）国家有关法律法规、行业有关规定；（二）中国铁路总公司有关管理制度；（三）国家和行业有关规程规范，中国铁路总公司有关标准；（四）工程建设强制性标准；（五）初步设计（含变更设计）批复意见。第十条施工图审核内容：（一）现场核对；（二）审核施工图设计原则；（三）审核施工图文件；（四）审核施工图预算；（五）审核变更设计施工图文件。第十一条现场核对的主要内容：（一）迁改。核对电力线路、通信、信号、信息设施及油管、气管、给排水管等拆迁工程的位置和数量是否与设计一致。（二）工程设计方案、工程措施。核对设计图纸内容与周边建设条件是否一致，核对工程设计方案、工程措施的合理性、可实施性。（三）大型临时工程。核对大型临时工程位置、规模等是否合理，数量是否与设计一致。第十二条施工图文件审核的主要内容：（一）工程建设强制性标准和初步设计批复意见执行情况，施工图文件编制内容、深度是否达到规范、规程的要求，是否执行了环评、水保、通航论证、防洪评价等批复意见。（二）是否按验收后的工程地质勘察资料进行设计。（三）标准图、通用图、参考图选用是否正确，内部通用图设计及采用是否合理。（四）路基型式是否合理，断面面积是否准确及满足规范要求，填料是否符合要求，填料土石比例是否符合规范，调配、运距和基底处理方法是否合理；路基挡护工程、防排水设计和站场综合管线布置是否合理，绿化方案是否符合国家和总公司有关要求。无砟轨道结构设计是否合理，无缝线路和道岔设计是否合理。钢轨伸缩调节器是否合理。（五）桥梁墩台型式、位置设置是否合理，是否与上部结构协调，跨径是否合理，技术条件相同的工点或标段墩台类型是否一致，基坑开挖（围堰）防护是否安全合理，工程数量是否准确，锥体防护是否根据地形实际设置，营业线开挖防护措施是否合理，桥渡方案是否满足防洪、通航、净空等要求。（六）隧道工程措施，特别是不良地质地段的工程措施是否与地质条件和风险评估等级对应，施工组织措施是否合理，防排水设施是否与水文情况对应，排水纵坡是否满足规范要求，防灾救援系统是否完善；弃砟场设置是否合理，环保措施是否符合要求。（七）牵引供电电源是否与实际需要匹配，变压器接线方式、单项设备的选型、保护方式等是否合理，接触网支柱和单项设备、各类线材规格及型号的选择是否合理，接触网零部件是否匹配、合理，车站接触网支柱布置是否符合安全和景观要求。电力系统外部电源、变配电、防雷接地、自动控制等设计方案是否合理。（八）通信信号系统是否与相邻线互连互通，设计方案是否合理，设备配置是否满足运营需求，地面设备与车载设备是否配套、兼容等。（九）信息系统设计方案是否合理，是否满足互联互通、信息安全需要，信息机房、配线间等基础设施是否达到标准，设备配置和软件配置是否符合国家和行业标准、规范要求。（十）客运车站站房重点审核总图及功能流线、广场及交通疏解、站房及客运建筑、消防及建筑设备，建筑平、立、剖面图，建筑详图、结构布置图、构件详图、节点构造详图、基础详图、管线及装修和建筑电气设计图；相关专业的兼容性、衔接性。（十一）设计文件站前站后、专业之间、子系统之间的衔接是否合理，如接触网基础预留、沟槽管线预留、综合接地、电缆过轨预埋等；设计采用的新技术、新材料、新工艺、新设备是否通过正式技术鉴定。（十二）防火、节能、环保、水保、建筑抗震、地质灾害防治等方案及措施是否与相关主管部门批复意见一致；重点审核景观保护与恢复，植被保护与恢复，环境敏感区的保护，特殊保护项目，水、大气、噪声、振动等污染防治等。（十三）主要工程的施工方案、施工过渡措施是否合理；铺轨基地、制梁场、客运专线轨枕板（块）预制场等大临工程设置方案是否合理，设计是否达到规定深度。（十四）技术复杂结构工程的计算原则、模型、程序以及参数选用是否合适，是否符合规范要求，输入数据是否准确；对结构设计的合理性、安全性进行审核，形成结论性意见，对于重点的特殊结构、新结构应进行复核验算。（十五）施工安全措施是否完善，既有线施工过渡及安全措施是否可行并达到规定深度。（十六）工程数量计算是否准确，工程量计量规则是否符合规定。（十七）对施工图与初步设计主要工程数量对照表进行对比审核，并分析工程量变化原因。特别是施工图拆迁工程数量（含三电迁改、管线迁移，路内既有通信、信号、信息、电力、电力牵引供电、房建、其他运营生产设备及建筑物等）与初步设计数量应进行详细对比，分析增减原因。第十三条消防设计施工图审核执行公安部《关于改革建设工程消防行政审批的指导意见》和《铁路公安局关于铁路实施建设工程消防行政审批改革的通知》规定的审核程序和审查规则。项目管理机构应依据现行消防法规、国家工程建设消防技术标准和初步设计批复意见，按照《建设工程施工图消防设计文件审查规则》组织审核。第十四条施工图预算审核主要内容：（一）施工图预算的编制原则、采用的定额和人工、材料价格是否与初步设计批复原则一致，施工图预算文件编制内容、深度是否达到规定要求。（二）施工图预算的工程数量是否与施工图纸工程量和工程量计量规则相符合，是否满足工艺、工法要求，是否存在差错漏碰或重复计列；各类工程技术指标是否合理；铺轨基地、制梁场、高速铁路（含客运专线）轨枕板（块）预制场等重点大临工程概算是否单独编制并准确无误；施工过渡工程预算是否按照过渡方案进行编制；施工安全措施费计列是否符合规定；并与初步设计工程数量进行详细比较。（三）重点审核三电迁改、油气管、水管、道路等的数量、协议和投资，临时工程的方案、数量和投资，并与初步设计概算进行对比。（四）在与初步设计预备费相同的情况下，比较施工图预算和初步设计批准概算，特别是对比具体各章节费用，分析投资增减原因和其他费用计列的合理性，以及控制工程、重点工程、主要工程的数量和指标，做到工程投资与设计内容、工程数量匹配。第三章审核单位条件及委托第十五条项目管理机构委托施工图审核的，应选择具备以下条件的单位及人员承担铁路大中型建设项目施工图审核工作。（一）审核单位应具有铁路设计甲级资质或铁路工程咨询甲级资质；站房工程施工图审核单位应具有建筑设计甲级资质或铁路工程咨询甲级资质，并从事过铁路站房设计或审核。（二）审核工作的总体负责人应主持过铁路大中型建设项目的勘察设计工作，专业负责人应主持过不少于2项铁路大中型建设项目的专业设计工作。已实行执业注册制度的专业，应具有相应专业注册工程师资格；未实行执业注册制度的专业，应具有高级工程师及以上职称。（三）审核人员应具备良好的职业道德，具有工程师及以上职称和6年以上所需专业勘察、设计工作经历，主持或参与过铁路大中型建设项目的勘察设计工作。审核人员原则上不得超过65岁，60岁以上审核人员一般不超过该专业审核人员数量的1/3。高速铁路建设项目审核人员应具有高速铁路设计或审核经验。第十六条项目管理机构委托施工图审核的，应依法选择施工图审核单位，并签订施工图审核合同。施工图审核合同应包括以下内容：（一）审核范围；（二）审核时限及出具审核报告；（三）审核人员要求；（四）审核质量要求；（五）施工图审核费用、支付方式及与审核质量挂钩方式；（六）施工图审核考核；（七）违约责任。第十七条项目管理机构组织专家进行施工图审核的，聘请的专家应符合第十五条规定的条件，聘请专家费用可比照国家发展改革委、建设部《建设工程监理与相关服务收费管理规定》（发改价格〔2007〕670号）附表四“建设工程监理与相关服务人员人工日费用标准”执行，在施工图审核费用中列支。第十八条项目管理机构应督促施工图审核单位严格按照法律法规规章、有关规程、规范和初步设计批复意见对施工图进行审核，施工图审核单位对审核质量负责。第十九条施工图审核费用在初步设计审查时纳入总概算。在可研批复后，项目管理机构根据可研估算计算施工图审核费，开展施工图审核单位招标工作。项目管理机构先期按审核总费用的85%支付，剩余15%费用根据考核结果，按优质优价的原则支付。第四章审核程序第二十条项目管理机构应督促勘察设计单位严格按初步设计批复意见进行施工图设计，按施工图工程数量和施工图预算编制规定编制项目施工图预算，并与初步设计批准概算进行比较。施工图必须达到规定的深度，施工图预算应控制在批准初步设计概算的静态投资范围内。施工图预算超出批复初步设计概算的，项目管理机构应组织勘察设计单位对施工图重新进行复核，认真分析投资增加原因，并按规定程序报原初步设计批复单位批准。第二十一条项目管理机构应督促勘察设计单位按照供图协议约定提交施工图设计文件，并提供下列资料，做好配合审核工作。（一）初步设计批复意见；（二）地质勘察报告；（三）施工图设计原则；（四）技术复杂结构工程的计算书；（五）征地拆迁数量详表；（六）主要工程数量计算表；（七）施工图预算及其与鉴定后修改概算对照分析表及相关说明资料。第二十二条施工图审核按照先进行现场核对，再进行施工图文件审核，最后进行施工图预算审核的程序进行。施工图审核合同签订后，项目管理机构应组织对审核单位编制的审核大纲进行审查；重大项目或工管中心确定的项目，项目管理机构应将审查后的审核大纲报工管中心核备。第二十三条项目管理机构收到勘察设计单位提交的施工图后，应及时送交施工图审核单位。其中工管中心确定审核的技术复杂的桥梁、隧道、重点城市车站站房等重点工程施工图送工管中心。第二十四条项目管理机构应要求施工图审核单位收到施工图文件后，及时检查文件是否齐全、完整，如有缺失应通知建设和勘察设计单位补齐，并尽快开展现场核对和图纸审核工作。第二十五条项目管理机构应要求施工图审核单位向其和勘察设计单位分批提交审核小结和审核总结，审核小结（总结）包括基本情况、存在问题和建议等内容，审核小结（总结）需经单位技术负责人签字并加盖公章，对已实行执业注册制度的专业，应由注册工程师签字并加盖执业印章。第二十六条项目管理机构应要求勘察设计单位认真研究审核小结（总结），逐条分析小结（总结）中提出的意见和建议，补充勘察，修改设计，并将审核意见落实情况及时书面反馈给项目管理机构及施工图审核单位。第二十七条项目管理机构应组织施工图审核单位对勘察设计单位落实审核意见情况进行确认，项目管理机构对分歧意见应组织勘察设计和审核单位进行研究和确定，重大分歧意见应及时上报工管中心确定。其中对于消防设计在执行国家消防技术标准理解存在分歧的，应书面报告工程所在地铁路公安局确定。项目管理机构应将铁路公安局确定意见及执行情况上报工管中心备案。第二十八条施工图审核意见需要对初步设计批复的重大内容调整的，包括施工图预算超出初步设计批复总概算的，按照变更设计管理程序报相关审查部门批准。第二十九条项目管理机构对施工图审核单位审核合格的施工图加盖施工图审核专用印章后交付施工。交付施工的施工图不得擅自修改，确需修改的，按照变更设计管理规定办理。第三十条施工图审核工作全部完成后，项目管理机构应及时汇总整理施工图审核报告上报工管中心审查或核备。第三十一条项目管理机构应告知勘察设计单位，对项目管理机构确定的审核意见有异议时，可以提请工管中心复查，勘察设计单位应执行工管中心复查审核意见，及时修改完成施工图。勘察设计单位未执行复查审核意见且施工图仍存在问题的，项目管理机构应按照合同约定追究勘察设计单位责任。第三十二条审核后的施工图是工程实施、验工计价和工程验收的依据。审核后的施工图不得擅自修改，需要变更设计的，项目管理机构按变更设计管理的规定办理。第五章职责分工第三十三条项目管理机构在施工图审核工作中的职责。（一）项目管理机构负责组织有关专家或委托具有相应资质的单位对施工图进行审核。（二）项目管理机构受集团公司建设管理处委托组织相关单位（部门）完成施工图征求运营单位意见。（三）项目管理机构协调勘察设计单位将有关运营单位意见依法合规纳入施工图文件。（四）施工图审核工作全部完成后，项目管理机构负责提出施工图审核报告及汇总整理其它相关材料，及时上报工管中心审查或核备。（五）项目管理机构对施工图设计文件的审核质量负责。由于审核原因造成工程质量、安全、投资、工期等问题的，追究项目管理机构责任。（六）项目管理机构应对审核通过的施工图设计文件加盖专用印章，并注明审核时间。施工图设计文件未经审核不准用于施工。第三十四条其他参与施工图审核的单位（部门）职责。（一）集团公司建管处：组织集团有关部门指导项目管理机构进行施工图审核工作。对项目管理机构施工图审核工作进行监督、检查和考核。负责代拟向铁总工管中心上报工程施工图审核报告报文（相关审核报告等附件由项目管理机构汇总整理随文上报）。负责组织有关单位（部门）对施工图征求运营单位意见，并将运营单位意见反馈项目管理机构，或委托项目管理机构组织有关单位（部门）对施工图征求运营单位意见。（二）集团公司计统处：负责将项目管理机构组织编制并审核通过的施工图预算报铁总鉴定中心核备，并抄送发展和改革部、建设部、工管中心（施工图预算文件等附件由项目管理机构随文报送）。施工图预算应控制在批复的初步设计总概算之内，施工图预算超出初步设计总概算的，须经原批复单位批准后方可实施。（三）集团公司总工室：根据职责及业务需要参与施工图审核。参加建管处或项目管理机构组织召开的施工图征求运营单位意见会议。（四）集团公司各业务处室：根据处室职责及业务需要参与施工图审核。参加建管处或项目管理机构组织召开的施工图征求运营单位意见会议，并收集、整理、提交本部门及本专业设备接管单位的相关意见交建管处或项目管理机构。（五）设备接管单位：根据需要参与施工图审核。参加建管处或项目管理机构组织召开的施工图征求运营单位意见会议，并整理本专业的相关意见向主管业务处室提报。第六章考核第三十五条勘察设计单位对施工图的勘察设计质量负责。项目管理机构对施工图的审核，不免除勘察设计单位对施工图的设计质量责任。警冲标第三十六条施工图审核过程中发现勘察设计单位故意虚列工程内容、工程数量的，或误列、遗漏工程内容、工程数量，影响单位工程本章费用达3%及以上的，项目管理机构应按故意虚列、遗漏、隐瞒施工图量差增减投资额的5%扣减勘察设计费。第三十七条审核后的施工图投资检算未超过初步设计总概算时，经设计优化、剔除差错漏碰和不合理因素等节省的工程投资，通过变更设计手续后，纳入预备费，由项目管理机构掌握使用。施工图预算按章节编制，施工图预算原则上应控制在初步设计概算之内。施工图预算超出初步设计概算的建设项目经原批复单位批准后方可实施。第三十八条施工图预算的静态投资应控制在初步设计概算的静态投资范围内。超出初步设计静态投资的，项目管理机构应按超出投资的5%扣减勘察设计费，经原初步设计审查部门批复同意的设计调整引起的施工图量差及相应投资变化除外。第三十九条项目管理机应在勘察设计合同及施工图审核合同中约定，施工图经审核交付后仍存在严重问题或施工中因设计原因引起严重工程质量、安全问题，或造成经济损失的，勘察设计单位依法承担赔偿责任，施工图审核单位按勘察设计单位承担赔偿费用的15%承担赔偿责任，直至施工图审核费扣完为止。施工图审核单位在施工图审核工作中弄虚作假的，项目管理机应扣减其施工图审核费。第四十条扣减的勘察设计费、施工图审核费，以及依据考核结果支付施工图审核费后的剩余部分纳入预备费管理。第七章附则第四十一条铁路工程按照国家和行业规定需进行施工图设计文件审查的，项目管理机构应按规定将施工图送审查机构审查，并要求勘察设计单位按审查意见对施工图进行修改。第四十二条本办法由集团公司建设管理处负责解释。第四十三条本办法自发布之日起施行。前发相关文件与本办法不一致的，以本办法为准。原发《关于发布〈广州铁路(集团)公司建设项目施工图审核及施工图投资检算审查管理办法〉的通知》（广建发〔2007〕151号）同时废止。抄送：集团各车务、机务、车辆、工务、电务、供电、房建公寓段，各车站、货运中心，广州通信、动车段，海口综合维修段，广铁公安局，集团公司总工、安监室，运输、客运、货运、机务、车辆、工务、电务、供电、土房、劳卫、计统、信息化、经开处，信息技术所。中国铁路广州局集团有限公司办公室2018年3月26日发—18——1—广州铁路(集团)公司文件广铁电发〔2014〕204号广铁（集团）公司关于发布《广铁集团列控数据管理暂行办法》的通知粤海公司，平南公司，各合资在建铁路公司、建设指挥部，各直管（合资）运输站段，工程管理所：现将《广铁集团列控数据管理暂行办法》（技术规章编号为GZG/DW2124-2014）予以发布，请严格遵照执行。附件：1.列控基础数据填写表2.列控工程数据表格式及填写说明3.列控数据文件交接单4.列控基础数据表审核单5.列控设备配置数据审核单6.应答器报文更新作业签认表7.列控工程数据计划变化情况申报表8.列控工程数据表存档使用申请表9.列控工程数据审核发布流程10.列控工程数据表审查确认单广铁（集团）公司2014年11月17日广铁集团列控数据管理暂行办法第一章总则第一条列控数据是列控系统可靠运行的重要基础，是保障列车运行安全的关键数据。为强化和规范集团公司列控数据的管理及日常维护工作，提高专业管理水平，现根据《中国铁路总公司关于印发〈控数据管理暂行办法〉通知》（铁总运〔2014〕号)、《铁道部工程管理中心关于〈建铁路客运专线列控软件编制管理指南〉通知》（工管四电函〔2013〕）等有关文件规定，制定本办法。第二条列控数据由列控基础数据、列控工程数据表（以下简称工程数据表）、列控设备配置数据（含报文）等组成。第三条列控数据管理工作包括基础数据的编制、提供、审核、发布；工程数据表的编制与审核；列控设备配置数据编制、仿真试验、更新申请、批准实施、交接备份；列控设备运行数据的下载与分析等内容。第四条集团各单位（部门）及在集团管内施工的建设单位和工程建设项目管理部门（以下简称“建设单位（部门）”），履行列控数据提供、审核、发布等工作，要严格执行本办法规定。第五条本办法适用于CTCS-2级、CTCS-3级线路列控数据管理。第二章职责和分工第六条集团公司电务处是列控数据管理的牵头和主管部门。主要职责是：1.按照铁路总公司列控数据管理的规定，制订集团公司列控数据管理办法和各项工作标准。2.组织审核既有线工程列控基础数据、工程数据表；配合建设单位（部门）完成新建线列控基础数据和工程数据表的复核，并对电务段列控数据管理工作进行检查督导。3.审批列控设备配置数据的更新申请，组织电务段进行列控设备配置数据仿真试验和现场更新实施工作。4.组织设备供应商与电务检测所交接相关列控数据及报文文件。5.协调铁路局间列控数据更新、发布、施工等工作。6.核查并处理电务类列控基础数据问题。第七条集团公司电务检测所为列控数据管理专业机构。主要职责是：1.按照铁路总公司和集团公司列控数据管理规章制度要求，检查督导电务段列控数据管理工作。2.负责集团管内列控基础数据、工程数据表等文件资料的存档和管理，组织有关单位开展列控设备运行数据分析工作。3.协助电务处完成列控基础数据、工程数据表、车站编号及地面设备编号、安全数据网IP地址的审核，负责向电务段提供或授权启用备份的LEU、应答器报文。4.协助电务处组织有关单位开展列控设备配置数据现场更新工作，核查并处理电务类列控基础数据问题。5.建立和维护列控数据管理技术平台，做好列控数据运用维护、实时监测。第八条集团公司工务处是工务类列控基础数据的主管部门。主要职责是：1.审核既有线工务类列控基础数据。配合建设单位（部门）完成新建线工务类列控基础数据的复核工作。2.核查并处理工务类列控基础数据问题。第九条集团公司供电处是牵引供电类列控基础数据主管部门。主要职责是：1.审核既有线供电类列控基础数据。配合建设单位（部门）完成新建线供电类列控基础数据的复核工作。2.核查并处理牵引供电类列控基础数据问题。第十条建设单位（部门）主要职责是：1.指导和检查列控基础数据编制、提报工作。2.组织施工单位向工务、电务、供电等设备管理单位提交新建线列控基础数据。3.对集团公司各部门复核后的新建线列控基础数据，负责汇总并组织有关部门确认后，提交设计单位开展工程数据表编制工作。4.组织电务部门对新建线工程数据表进行审核，并负责向集成商或列控设备供货商提供工程数据表。5.组织施工单位核查并处理列控基础数据问题。第十一条电务段是列控数据维护管理工作的主体，主要职责是：1.根据铁路总公司、集团公司发布的列控数据管理规章制度，负责制订列控数据维护管理工作制度、岗位职责和应急预案等实施措施。2.负责管内列控数据运行情况的跟踪分析和信息反馈。3.配合建设、设计、施工等单位完成电务类列控基础数据的审（复）核。4.负责列控数据的仿真试验，检查核对列控数据和报文，配合设备供货商完成列控数据的现场更新工作。5.建立列控数据档案，做好数据备份、存档、更新、版本管理等工作。6.既有线列控设备配置数据（含报文）维护。第三章列控基础数据提交、汇总和发布第十二条列控基础数据主要涉及工务、电务、供电专业，包含以下内容：1.工务类：线路名称、正线起讫里程、线路允许速度、线路坡度、特殊的桥梁隧道信息、里程长短链、道岔信息、异物侵限、车站名称等数据。2.电务类：列车信号机、轨道电路绝缘节及分割点公里标、轨道电路长度、轨道电路制式及载频、级间转换公里标、RBC切换点公里标、列控顶棚速度等。3.牵引供电类：正、反向运行分相区断电标志牌公里标。第十三条列控基础数据由集团公司电务处统一归口管理。第十四条列控基础数据编制提交1.基本建设、更新改造、大修等工程和既有线复测引起的牵引供电、线路、桥梁、隧道以及信号数据变动等涉及列控基础数据发生变化（线路大修优化坡度除外），均应同步配套调整列控数据，且在相关工程中同步设计与施工。2.线路的名称、运营里程、线路允许速度、列控顶棚速度等列控基础数据应符合总公司的批复文件。3.既有线列控基础数据编制提交（1）当线路、信号、牵引供电等专业列控基础数据发生变化时，集团公司相关业务主管部门须及时按《列控工程数据计划发布申报表》（附件7）格式向电务处提交本专业列控基础数据变化及修改说明。（2）集团公司业务部门负责审核建设部门提交的列控基础数据，并向电务处提交审核后的基础数据文件（电子和纸质文档）。①施工或设计单位将线路、信号、牵引供电等专业列控基础数据提交给建设部门，建设部门确认后提交给设备管理（或接管）单位。②设备管理单位审核后，提交给主管业务处。③主管业务处向电务处提交电子版的列控工程基础数据资料。（3）集团公司电务处对提交的列控基础数据进行汇总，组织相关部门审核、确认后，发布至集团公司有关业务部门和相关铁路局。同时，提交设计单位开展工程数据表的编制工作。①电务处负责打印两份列控基础数据纸质文档，并由经办人签字后交资料提交业务处。②资料提交业务处对列控基础数据纸质文档进行核对并由部门分管领导和经办人签字、加盖公章（骑缝章）报电务处。③电务处和提交业务处分别保留列控基础数据纸质文档备查。4.新建线路列控基础数据编制提交（1）建设单位负责向集团公司业务主管部门提交列控基础数据，铁路局业务主管部门完成数据复核后交建设单位汇总。同时，建设单位负责组织有关部门发布，设计单位据此开展工程数据表的编制。（2）集团公司业务主管部门积极配合建设单位按时完成列控基础数据的复核。第十五条既有已开通CTCS-2级、CTCS-3级线路需要修改列控数据时的处理原则：1．在列控数据修改前，需对相关设计、施工等工作量进行估算，并协调集团公司（或相关合资公司、建设指挥部）计划、财务部门落实费用。2．提出列控数据修改的业务处室及时将变化或修正的列控基础数据书面（盖章版）报电务处，由电务处联系信号设计单位重新编制列控工程数据表。3．列控数据暂时不能完成现场修改时，需采取临时防护措施（或下达临时限速）至列控数据修改完成时止。4．列控数据一般情况下与LKJ数据修改同步实施。第四章列控工程数据表编制与审核第十六条工程数据表是列控设备配置数据和工程数据参数化的重要依据，它根据列控基础数据进行编制。第十七条工程数据表编制，原则上由设计单位承担。对于影响范围较小的既有线改造项目，可由建设单位、电务处共同确定制表单位。第十八条制表单位应根据集团公司电务检测所提供的既有线列控基础数据和原工程数据表开展编制工作。制表单位应向建设单位提交《列控工程数据表存档使用申请表》（格式见附件8），申请使用电务处存档的列控工程数据表。第十九条制表单位应按照批复的列控基础数据编制工程数据表。第二十条制表单位应以电子版和纸质版两种方式提交工程数据表。1.既有线，制表单位向集团公司电务处、建设部门提交工程数据表，由电务处负责组织审核、确认，相关单位进行签认（格式见附件10）。2.新建线，制表单位向建设单位提交工程数据表，建设单位组织电务等相关部门开展复核工作，可参照附件10进行签认。第五章列控数据文件编制、仿真、发布、实施和试验第二十一条设备供应商根据建设单位或集成商提供的工程数据表，开展列控设备配置数据的编制工作，并对列控设备配置数据的正确性终身负责。第二十二条设备供应商完成列控设备配置数据的编制及内部测试后，向建设单位或设备接管部门提出列控数据仿真试验申请。第二十三条设备供应商负责编写仿真试验大纲，经电务段确认后，依据相关标准文件和试验大纲开展室内仿真试验。第二十四条电务段应对仿真试验结果签字确认，与设备供应商共同将列控设备配置数据（文件）签字封存。第二十五条电务处对电务段、设备供应商提供的仿真试验报告审核后，通知电务段协助建设单位组织设备供应商进行列控设备配置数据的现场测试和更新，电务段对文件版本号应进行确认。第二十六条既有线涉及邻局的数据现场更新、动态验证工作，电务处牵头组织，设备管理单位积极配合及时联系相关电务段，确保列控配置数据的一致性。第二十七条列控设备配置数据现场更新后应进行静态试验，必要时还应安排动态验证。第二十八条列控数据变化后不涉及动车组运行安全的，可不进行现场动态测试，数据文件质量与安全由设计单位、设备供应商负责。第二十九条既有线LEU、应答器故障后，电务段应向电务检测所提出报文恢复写入申请，批准后方可进行。电务段完成报文写入后，将回读确认后的信息报电务检测所。第六章列控数据文档管理第三十条列控数据文档（列控基础数据、工程数据表、列控设备配置数据等）由电务检测所统一保存，设计单位、设备供应商、电务段应在工程开通前，及时向电务检测所提交列控数据技术资料。第三十一条列控数据文档交接应符合附件3要求，交付时须标明文件版本号，并附有数据修改的必要说明。第三十二条电务段只能存储经电务检测所确认的最新版本的列控设备配置数据文件，旧版本文件必须按规定予以销毁。第三十三条列控基础数据、工程数据表的文件名、版本号应规范管理，命名规则如下:1.列控基础数据版本号、文件名：数据发布文件号、文件名。2.工程数据表文件名（铁路局+线别+制表单位+文件最终形成年月日时分（年为4位数字、月日时分分别为2位数字，下同））3.工程数据表分表文件名：铁路局+线别+制表单位+文件最终形成年月日时分。第三十四条文件名称及版本号应方便查阅。列控设备应能通过维护设备读取列控主机软件版本号。第三十五条设备接管部门、设备供货商应建立列控数据文档管理系统，对文档实行动态管理。第七章列控运用数据管理第三十六条列控运用数据包括各类列控设备数据记录文件及日志。第三十七条列控设备供应商应提供列控设备运行数据分析软件。列控数据分析软件的日常维护由电务段、设备供应商共同负责。第三十八条电务段应建立列控设备运行数据记录分析工作制度，电务处定期对设备运用情况组织质量分析和安全分析。第三十九条电务检测所、电务段应配备列控运用数据处理和分析专用计算机设备，并建立使用、维护、保养、管理等配套制度。第四十条列控运用数据下载应按规定程序进行操作，严格执行信息安全的相关规定。第四十一条列控设备发生故障后，车载、地面、通信核心网均应按需要提供相关数据，需取用跨段、跨专业数据时，由对等工区、车间直接联系，须上一级协调时由对等站段、处室进行沟通。第四十二条ATP车载数据下载应采用列车进站或入库时数据无线自动或人工方式下载。ATP车载数据下载后，应能通过专用数据传输通道实现局内、跨局传递。第四十三条发现列控数据存在问题后应及时反映，运用部门及时采取措施、确保行车安全，电务处立即组织相关单位制订整改方案。第八章附则第四十四条本办法由集团公司电务处负责解释，自发布之日起实行。第四十五条本办法自发布之日起实行，前发文电与本文不符的，以本文为准。附件1列控基础数据填写表1工务类基础数据1.1车站表列控数据-1序号线名线编号行别车站名股道数中心里程备注1.2道岔表列控数据-2序号线名线编号行别车站名道岔编号辙岔号尖轨尖里程直向速度侧向速度备注填写说明：(1)尖轨尖里程仅填写正线，复交道岔每个都填写。(2)尖轨尖里程精确到米。(3)如果道岔只开通侧向，则在备注中注明。(4)速度单位为km/h。1.3线路允许速度表列控数据-3线名行别速度区段及起讫里程线路允许速度车站过岔速度长期限制慢行备注直向侧向地点速度原因XX线下车站-车站###.x-###.x速度速度速度里程-里程（区间）速度值里程-里程（区间）速度值填写说明：(1)填表时各速度区段和限制慢行地段应根据里程大小，由小向大顺序填写。(2)复线线路应按行别（上、下行）分别填写。(3)复线线路同一限制慢行地段（或地点），应分别在上、下行速度表中同时填写。(4)应按表内填写的式样填写。表示两站间或起讫里程间用“-”（减）号表示，道岔编号用“#”号表示。(5)无特指时本表所列速度为旅客列车线路允许速度；货物列车线路允许速度有特殊要求的应在速度后面用“（货）”来表示。(6)速度单位为km/h。(7)里程一般取小数点一位。限制慢行的起点里程由高向低进位，终点里程由低向高进位。(8)长期限制慢行中“XX站XX道”“速度”仅当该股道内存在低于其两端道岔侧向速度的限速时填写。1.4坡度表列控数据-4序号线名线编号行别起点里程终点里程坡度(‰)坡长(m)长短链里程长短链长度备注填写说明：(1)坡长应是实际线路坡度长度，精确到米。(2)起点里程、终点里程填写该坡道起端、末端的线路里程。(3)其他特殊说明，填写在备注中。1.5特殊桥梁信息表列控数据-5序号线名线编号行别桥梁名称桥梁编号中心里程全长（m）备注填写说明：(1)桥梁仅填写有特殊行车要求的桥梁。具体范围由铁路局主管部门商定，并由需求部门填写备注。(2)全长应是实际桥梁长度，精确到米。(3)其他特殊说明，填写在备注中。1.6长大隧道表列控数据-6序号线名线编号行别隧道编号隧道名称中心里程全长（m）备注填写说明：(1)隧道仅填写有特殊行车要求的桥梁。具体范围由铁路局主管部门商定，并由需求部门填写备注。(2)全长应是实际隧道长度，精确到米。(3)其他特殊说明，填写在备注中。1.7线路里程断链明细表列控数据-7序号线名线编号行别断链类型起点里程终点里程长链长度(m)断链长度（m）备注填写说明：(1)断链分行别按线路里程从小到大顺序填写。(2)断链类型填长链或短链。（3）链位置：当长链时，终点里程应为实际里程，起点里程为现场实设带有英文字母的里程；短链时为现场实设起、终点里程。(4)遇长链大于1km时应同时附断链示意图。(5)断链长度精确到米。(6)其他特殊说明，填写在备注中。1.8异物侵限地点表列控数据-8序号线名线编号行别异物侵限区段名称车站或区间名称线路里程备注填写说明：(1)车站或区间名称根据异物侵限所在车站或区间地点填写，如在甲站内填写“甲”、如在甲站至乙站区间填写“甲-乙”。(2)“异物侵限区段名称”由信号专业填写。(3)异物侵限分行别按线路里程从小到大顺序填写。(4)“线路里程”指异物侵限监测设备在线路上的投影里程，精确到米。(5)其他特殊说明，填写在备注中。1.9正线起讫里程表列控数据-9序号线名线编号行别起点终点延展长度(公里)备注站间或站名位置里程站间或站名位置里程填写说明：(1)起点里程、终点里程精确到米。(2)所处地点填写起终点所处的车站位置或车站道岔岔尖名称。2电务类基础数据2.1正线信号数据表列控数据－10序号车站名信号点轨道区段备注名称信号点里程信号点类型绝缘节类型名称编码制式载频长度(m)区段属性填写说明：(1)该表应按照列车正向运行方向和反向运行方向分别顺序填写。(2)信号点与其防护的轨道区段应逐行对应。(3)车站名为信号点所属车站名称。(4)信号点名称、类型、绝缘节类型，轨道区段的名称、载频、区段属性，应与《信号设备平面布置图》一致。(5)信号点里程应填写绝缘节公里标，对于电气绝缘节，正向数据表应以列车正向运行方向第一个调谐单元（BA）引入点的公里标为准；反向数据表应以列车反向运行方向第一个调谐单元（BA）引入点的公里标为准。(6)信号点类型共七种：进站信号机、出站信号机、通过信号机、进路信号机、调车信号机、出站口、没有信号机。当区间不设置信号机时，闭塞分区处的分割点类型为“通过信号机”；非闭塞分区处的分隔点，信号点类型为“没有信号机”。填写反向区间信号点类型时，当区间发送27.9Hz轨道占用检查码，闭塞分区处的信号机类型为“没有信号机”；当区间发送追踪码序时，反向闭塞分区处的信号机类型为“通过信号机”，反向接近区段当多个区段合并成一个闭塞分区时，合并区段之间的信号机类型为“没有信号机”。(7)绝缘节类型共两种：电气绝缘节、机械绝缘节。(8)轨道区段长度应与实际线路一致，精确到米。(9)区段属性包括“TCC边界”、“RBC边界”等。TCC边界为列控中心所管辖轨道区段的属性边界；RBC边界区段为RBC所管辖相邻的两个轨道区段。2.2站内轨道区段信息表列控数据－11序号区段名称道岔方向长度填写说明：（1）轨道区段名称填写联锁表中列车进路经过的轨道区段的名称，要求与《进路数据表》中的轨道区段名称一致。（2）要分别列出道岔定、反位条件下的轨道区段的长度。3牵引供电类基础数据3.1接触网分相数据表列控数据－12序号线名线编号行别分相区名称区间名称正向断电标里程反向断电标里程正反向断电标间距（m）备注填写说明：（1）列控系统分相区信息表应包含正向断电标里程、反向断电标里程、正反向断电标间距信息。如图所示：图1分相区示意图(2)填表时各分相区应根据里程大小，由小向大顺序填写。(3)复线线路应按行别（上、下行）分别填写。(4)里程及长度精确到米。(5)其他特殊说明，填写在备注中。附件2列控工程数据表格式及填写说明_________线列控工程数据表制表单位(章)_______________________建设单位（章）________________________铁路局电务处（章）____________________注：涉及既有铁路改造部分需铁路局电务处盖章1输入数据表格式及填写说明1.1制表依据文件清单填写说明：在表格当中填写所有制表时用到的图纸、资料文件的名称、编制单位及文件发布的日期和编号，如：线路纵断面布置图、站场平面布置图、线路运营里程、线路允许速度图表、联锁表、车站信号平面布置图和配线表等。上述资料应与实际相符，并随表提供电子版。1.2制表修改说明填写说明：（1）在表格当中填写修改表格的名称及版本、修改原因、修改内容及修改日期。（2）每个表格均应由数据表加版本号组成，如“车站信息表V*.*”。1.3车站信息表填写说明：（1）该表应按照列车正向运行方向按批复顺序填写车站名称。（2）中继站名称以中继*站填写。1.4正线信号数据表填写说明：（1）该表应按照列车正向运行方向和反向运行方向分别顺序填写，数据末端应以闭塞分区信号点结束。（2）信号点与其防护的轨道区段应逐行对应。（3）车站名称为信号点所属车站名称。（4）信号点类型、绝缘节类型、载频、区段属性，应与《车站信号平面布置图》一致。区间信号点名称正向按正向信号机名称填写，反向与正向一致。闭塞分区分割点处按分割点里程的公里标及百米标数加F进行标注。（5）信号点里程应按照线路批复运营里程填写绝缘节公里标，对于电气绝缘节，正向数据表应以列车正向运行方向第一个调谐单元（BA）引入点的公里标为准；反向数据表应以列车反向运行方向第一个调谐单元（BA）引入点的公里标为准。（6）信号点类型共七种：进站信号机、出站信号机、通过信号机、进路信号机、调车信号机、出站口、没有信号机。当区间设置标志牌时，闭塞分区处的分割点类型为“通过信号机”；非闭塞分区处的分隔点，信号点类型为“没有信号机”。填写反向区间信号点类型时，当区间发送27.9Hz轨道占用检查码，闭塞分区处的信号机类型为“没有信号机”；当区间发送追踪码序时，反向闭塞分区处的信号机类型为“通过信号机”，反向接近区段当多个区段合并成一个闭塞分区时，合并区段之间的信号机类型为“没有信号机”。（7）绝缘节类型共两种：电气绝缘节、机械绝缘节。（8）轨道区段长度应与实际线路一致，精确到米。（9）区段属性包括“TCC边界”、“RBC边界”等。TCC边界为列控中心所管辖边界两侧相邻的轨道区段；RBC边界区段为RBC所管辖边界两侧相邻的轨道区段。（10）如果有里程系、长短链或灾害防护区段等其他特殊说明，填写在备注中。1.5应答器位置表填写说明：（1）该表应按照列车正向运行方向顺序填写，先填写正线应答器，后填写侧线应答器，侧线应答器以临近正线的第一个侧线股道开始顺序填写。侧线应答器与正线应答器间应预留编号。（2）每个应答器（组）命名应以B开头，后加公里标或信号机名称，其中公里标参照区间通过信号机命名规则执行。应答器名称应区分应答器组内的位置，分别在应答器名称后加“-1”、“-2”等表示组内第一个应答器和第二个应答器等信息。由单个应答器构成的应答器组不需在应答器名称后加“-1”。（3）应答器编号应按“大区号-分区号-车站号-应答器单元编号-组内编号”格式填写，由单个应答器组成的应答器组不再填写组内编号，中继站单独分配车站编号。（4）里程应填写应答器安装的实际线路运营里程（格式为KXXX+XXX），精确到米。（5）如果应答器为侧线股道出站应答器，备注中注明“侧线，侧线编号为“-1”应答器距信号机(绝缘节)的距离（精确到米）”。如果应答器为侧线股道定位应答器，备注中注明“侧线”。如果应答器为非正线进站应答器，备注中注明“**线，进站编号为“-1”应答器距信号机(绝缘节)的距离（精确到米）”。对于应答器组名称和信号点不能对应的应答器组，应在备注中填写其对应的信号点名称。（6）设备类型共两种：有源、无源。（7）用途根据《列控系统应答器应用原则》中应答器的用途定义填写。（8）根据应答器所属车站填写车站名称。（9）如果有里程系或长短链等其他特殊说明，填写在备注中。1.6进路信息表填写说明：（1）应答器编号应填写进路始端的有源应答器编号，进路始端为无源应答器或仅发码进路应答器编号应填写“-”。（2）联锁进路编号、进路、进路类型、始端信号机、道岔按联锁表填写。进路信息数据表中包含动车组进路和列控中心编码等与列控相关所有进路，数量应与联锁表一致，道岔栏中不应包含防护道岔及带动道岔。（3）最高码序应填写该进路排列侧向通过进路时接近区段最高允许轨道电路低频信息码，非侧向进路填写“-”。（4）终端信号机填写同方向下一架信号机名称或反向进站信号机名称。（5）进路类型共九种：正线接车、侧向接车-1、侧向接车-2、侧向接车-3、反向正线接车、反向侧向接车-1、反向侧向接车-2、反向侧向接车-3、发车。进路类型示意及数据范围如图1所示。图1进路类型示意图*“侧向接车-1”、“反向侧向接车-1”为没有直股发车条件的侧向接车进路；*“侧向接车-2”、“反向侧向接车-2”为有正向直股发车条件的侧向接车进路；*“侧向接车-3”、“反向侧向接车-3”为有反向直股发车条件的侧向接车进路；*“发车”为正反向发车进路。（6）经过应答器应填写进路顺序经过的应答器组单元编号及相邻两个应答器组之间的距离，填写格式为应答器组单元编号/链接长度，两个应答器之间的距离应根据站场平面图准确填写，精确到米。如经过应答器与始端应答器的车站编号不同时，应填写经过应答器的完整编号“大区号-分区号-车站号-应答器单元编号”。（7）线路速度应填写进路起点到终点的线路速度值，数据格式为“线路速度值（km/h）/长度（m)”。站内速度以进路内轨道电路区段为最小单位分段填写，如果一条进路含多个线路速度时，在每组数据之间用“，”隔开。进路中走行正线线路的区段速度描述应与正线线路速度表一致。侧线股道线路速度在大于过岔速度时应与其衔接的道岔中号码最大的道岔侧向允许速度保持一致，且不应高于站台限速。（8）轨道区段的数据格式为“轨道区段的长度m\轨道区段的载频\轨道区段末端的信号点类型\名称”，如果一条进路含多段轨道区段，则在每组数据之间用“，”隔开。对于车站接发车进路中无码区段（含25.7HZ或27.9HZ）,区段载频应填写为“0”,进路中轨道区段不应合并填写。（注：报文编制时，一个闭塞分区内含多个区段，且相邻轨道区段基准载频相同（仅区分-1和-2载频），则轨道区段应合并填写。）（9）对于非动车组走行的进路，对应的应答器不发该进路信息报文，应答器编号填“-”，并在备注中注明非C2/C3进路。（10）如果有灾害防护区段等其他特殊说明，填写在备注中。1.7RBC信息表填写说明：（1）该表仅用于CTCS-3级列控系统RBC设备工程数据。（2）地区编号由大区编号和分区编号组成，“地区编号=大区编号×8+分区编号”。（3）RBC编号应为数字。（4）边界应填写该RBC对应的管辖边界的里程，按照上下行线“起点、分界、终点”格式填写。（5）其他特殊说明（如线路说明）应在备注填写。1.8线路坡度表填写说明：（1）线路坡度应以线路实际的坡度数据为依据，按照列车正向运行方向顺序填写，负数表示下坡，正数表示上坡。（2）长度应是实际线路坡道长度，精确到米。（3）终端里程应填写该坡道末端（变坡点）的线路运营里程，在备注中填写坡道始端的线路运营里程。始终端里程须与线路数据表始终端里程保持一致。（4）如果有里程系或长短链等其他特殊说明，填写在备注中。1.9线路速度表填写说明：（1）线路速度数据应按照列车正向运行方向顺序填写正向线路运营速度，按照列车反向运行方向顺序填写反向线路运营速度。如线路存在C0/C2等级转换，则C0区域内的速度不得高于160km/h。（2）长度应为实际线路长度，精确到米。（3）终端里程应填写速度值末端的线路运营里程，在备注中填写速度值始端的线路运营里程。始终端里程须与线路数据表始终端里程保持一致。（4）如果有里程系或长短链等其他特殊说明，填写在备注中。1.10桥梁隧道信息表填写说明：（1）桥梁隧道信息应按照列车正向运行方向顺序填写，桥梁仅填写特大桥和有特殊行车要求的桥梁，隧道全部填写。（2）起点里程应填写桥梁或者隧道的起始点的线路运营里程，精确到米。（3）终点里程应填写桥梁或者隧道出口的线路运营里程，精确到米。（4）类型填写桥梁名称和隧道名称。（5）如果桥梁后隧道有禁止停车等特殊要求请在备注栏中填写“禁停”等其他特殊说明。1.11分相区信息表填写说明：见基础数据说明1.12铁路线路里程断链明细表填写说明：（1）起点运营里程（原始里程）和终点线路运营里程（新里程）之差应与断链长度一致。（2）按铁路线路里程断链设置和管理规定执行。（3）长链终点里程为实际公里标，起点里程后面须缀以大写字母(如A、B、C……)，百米标须缀以小写字母(如a、b、c……)。1.13异物侵限信息表填写说明：（1）异物侵限里程填写异物侵限的起点和终点公里标。（2）根据YWJ的命名规则填写异物继电器名称。命名规则为区间异物继电器为[区段名称][线路标识]YWJ[序号]，站内异物继电器[区段名称][靠近灾害点的进站信号机]YWJ[序号]。（3）异物侵限区段名称填写异物侵限点对应的轨道区段名称,当多个轨道区段共用一个YWJ时需用“，”隔开。1.14道岔信息表填写说明：（1）岔尖里程填写根据站中心运营里程和岔尖距站中心运营里程的偏移量计算的公里标。（2）在“正线/侧线”栏填写道岔所在位置。（3）定位是否开向侧向填写是/否。1.15大号码道岔数据包发送条件检查范围表填写说明：（1）填写大号码道岔所在车站名称。（2）填写大号码道岔的道岔编号。所在进路填写大号码道岔的进路始终端信号机，如果大号码道岔涉及不同进路应分别填写。（3）进路离去区段占用检查范围按线路走行顺序填写发送大号码道岔包时需要检查的离去区段占用条件的轨道区段名称。所检查的轨道区段与站内通过进路的轨道区段长度之和需满足列车从车站大号码道岔防护信号机处的入口速度降速至0km/h的距离要求。（4）根据大号码道岔号和道岔及道岔后方的线路限速条件填写大号码道岔侧向允许通过的最高速度。1.16里程系信息表填写说明：（1）应按照线路正方向顺序填写里程系变换点公里标的转换关系。（2）若里程系变换点在道岔，则需要在备注栏注明相应的道岔号。（3）同一线路号不同线路里程系不能使用同一里程系标注“K”，应根据线路名进行区分“**K”。1.17电码化发送器与区段对应表填写说明：（1）25HZ轨道电路叠加电码化车站，须填写电码化发送器与区段对应表。（2）按进路列车运行顺序填写发送器控制的25HZ轨道电路区段名称，各区段名称应用“，”隔开。（3）当发送器为单方向时进路终端须填写列车进路终端同方向防护信号机名称或反向进站信号机。1.18正线起讫里程表填写说明：（1）起点里程、终点里程精确到米。（2）所处地点填写起终点所处的车站位置或车站道岔岔尖名称。2输出数据表格式及填写说明2.1采集配置表填写说明：（1）该表由设备供应商填写、审核。（2）采集类型应包括区间方向、区间信号点、车站轨道方向、车站轨道、道岔及灾害区段等类型。在表格中应填写图纸中相应的名称。（3）名称应与轨道区段、道岔及信号点名称一致。（4）同一信息多点采集应在同一采集板上连续配置。（5）采集板前8位通道号只用于区间方向继电器，多于8位的区间方向继电器应在其他采集板的前8位填写。其它采集点按区间信号点、车站轨道方向、车站轨道、道岔及灾害区段顺序填写（各厂家可根据设备驱动采集板结构进行调整）。2.2驱动配置表填写说明：（1）该表由设备供应商填写、审核。（2）驱动类型应包括区间方向、区间信号点、车站轨道方向及LEU等类型。在表格中应填写图纸中相应的名称。（3）名称应与轨道区段、道岔及信号点名称一致。（4）同一信息多点驱动应在同一驱动板上连续配置。（5）驱动板前8位通道号只用于区间方向继电器，多于8位的区间方向继电器应在其它驱动板的前8位填写。其它驱动点按区间信号点、车站轨道方向、车站轨道、道岔及灾害区段顺序填写（各厂家可根据设备驱动采集板结构进行调整）。附件3列控数据文件交接单年第号交付单位接收单位文件名称版本号字节数备注更新依据更新说明交付人（签名）：年月日接收人（签名）：年月日注：接收方在接收到交付方数据后，确认接收数据的字节数、版本号。本表作为数据交接的重要依据由双方保存。附件4列控基础数据表审核单年月日列控基础数据编制单位（公章）负责人签字列控基础数据版本号列控基础数据类别工务□供电□电务□编制列控基础数据依据最终审核通过时间列控基础数据载体1.光盘（）张2.列控基础数据纸质（）本责任人签字编制人：年月日审核人：年月日技术负责人：年月日备注：注：接收方在接收到交付方数据后，确认接收数据的版本号。本表作为数据交接的重要依据由双方保存。附件5列控设备配置数据审核单年月日列控设备配置数据编制单位（公章）负责人签字列控设备配置数据版本号列控设备配置数据内容及用途本版列控设备配置数据更新依据列控设备配置数据仿真及现场试验情况最终审核通过时间列控设备配置数据载体1.光盘（）张2.列控设备配置数据储模块（）块责任人签字编制单位：电务段：电务检测所：备注：注：接收方在接收到交付方数据后，确认接收数据的版本号。本表作为数据交接的重要依据由双方保存。附件6应答器报文更新作业签认表报文更新实施单位年月日顺号日期处所应答器编号报文特征码编制单位更新人确认人附件7列控工程数据计划发布申报表序号项目名称计划实施日期列控工程数据计划变化情况（主要涉及地点、范围）计划生效时刻备注12345678申报部门：填报人：时间：年月日附件8列控工程数据表存档使用申请表信号设计单位申请人：日期：申请单位(章)：建设单位意见单位公章：日期：电务处批复意见批复单位（章）：日期：列控工程数据表文件名称版本号文件大小时间CRC32校验码注：1.本表适用于既有线改造时信号设计单位向电务处申请存档列控工程数据表；2.列控工程数据表以压缩包文件形式提供，每个文件的CRC32校验码均需记录，校验码数量较多时可作为单独作为附件，需与此表一并加盖骑缝章后有效。附件9附件10列控工程数据表审查确认单工程名称施工依据（设计文件）设备变化情况列控基础数据修改说明（对数据发生具体变化的对比说明，页面不足时可另加附页）工程数据表确认人员签认表设备管理部门复核人时间确认意见建设、设计、施工单位复核人时间确认意见预审意见列控工程数据表经组织审查，已确认本项目列控工程数据表与列控基础数据完整、准确，并与现场设备（变更）情况一致。（单位/部门公章）审查日期：注：1．审查表由牵头审查单位制作、组织填写，并出具预审意见；2．审查表由项目建设管理单位、相关主管业务处、设备管理单位各留一份，保存两年备查。抄送：武广客专公司，广深、三茂股份公司，广梅汕、石长公司，梅汕客专筹备组，集团公司总工、安监室，运输、客运、机务、工务、供电、车辆、建管、计统、财务、职教、劳卫、信息化处，调度所，信息技术所。广铁（集团）公司办公室2014年11月25日发—48——49——50—1.1引言随着我国高速铁路的建设大规模展开，对列控设备的需求大幅增加，列控数据配置任务更加繁重。列控数据作为列控系统和设备进行逻辑运算的基础和核心，其正确性决定了列控系统和设备的安全性及可靠性。因此，不论是从设计阶段还是审核阶段都应该保证列控工程数据的正确性，这是我国列控数据编制审核面临的难题之一。因此，对列控数据的审核验证工作就显得十分重要。由于我国高速铁路的发展迅速，列控设备的需求和应用大幅增加，要保证铁路工程的顺利开通，就需要大量的列控数据来支持列控设备的正常运转，这使得列控数据的审核工作变得更加困难。列控数据的审核具有时间紧、任务重、变更频繁，且又严重影响行车安全等特点，如果采用人工审核的方式，首先可能无法按时完成如此庞大的任务，而且处理如此海量的数据，人工审核的方式是无法完全保证数据的准确性的。本课题着重研究如何确保列控工程数据的正确性这一问题，在分析现有的实际列控数据以及数据验证方法的基础上，对列控工程数据（进路信息）表的审核验证进行研究和设计，为列控工程数据审核验证提供一种自动化的便捷方式。1.2列控工程数据验证研究背景及发展现状目前，我国的高速铁路正处于飞速发展的时期，对列控设备的需求越来越大，对列车运行安全的要求也越来越高。铁路工程要顺利开通，离不开列控设备的正常运转。列控数据是列控设备正常运转和列车运行安全的基础和核心，因此，在铁路工程开通前，不论是从设计还是从审核阶段，都需要保证列控数据的正确性。为了保证列控数据的正确性，我国目前存在以下几种列控工程数据审核方法:（1）列控数据的传统测试方法传统的测试方法是测试人员将联锁、列控中心等系统集成为完整的系统来仿真实际的站场进行测试。该方法存在一些缺点。首先测试手段费时费事。其次，若数据有误，需与设计方进行交流和确认，制作新数据后才能再编制软件，然后再进行测试。这种方式中间环节过多，耗费时间也较长。（2）列控数据的人工审核方法该种审核方法是通过人工直接审核列控数据，通过人工判断数据的正确与否。这种方法存在一些缺点。首先，由于数据是人工审核的，存在因人为因素导致数据审核错误问题。其次，数据审核时间有限、任务量大，规定时间内可能无法完成任务，数据审核效率低，会导致审核不全。（3）基于中间数据库的列控数据审核方法这种方式是基于CAD图录入和数据制作方法的。审核工具将数据文件转换成中间数据库的形式，与原有数据库进行比对，但存在一些缺点。首先，数据库由软件进行自动识别，对使用者是处于不可见状态，无法及时发现问题。其次，一旦数据审核工具发生程序或算法上的错误，用户是无法及时发现的。因此，上述这些方法虽然在一定程度上可对列控数据进行审核，但速度慢、时间长、效率低、审核不完整，甚至无法完全保证审核后的列控数据的正确性，无法满足列控数据的审核要求。目前我国工务段、设计院等提供的列控数据，大多使用人工审核的方式进行数据审核，效率低，易出错。为规范列控数据的管理，满足列控数据维护管理的标准化、信息化要求，铁路局因此研制了列车运行控制数据校核及管理系统。此系统具有列控数据版本比对、列控数据校核、列控数据管理等功能，但更侧重于对列控数据的分析和管理，缺少对列控数据验证项具体的、模块化的验证设计。为了提高列控工程数据审核的工作效率，实现列控数据验证的完整性、准确性和高效率性，研究和设计列控数据审核验证的自动化方法是非常有意义的。针对以上问题的分析，本课题确定的基本思路是，通过对铁路标准规范的研究来提取验证项的规则，根据验证规则设计验证模型来验证列控工程数据的一致性和逻辑性，以此确保列控工程数据（进路信息）表的准确性，以提高工作效率。1.3列控工程数据验证研究意义随着我国高速铁路的迅速发展，列控设备的需求大幅增加，列控数据的编制审核任务越发艰巨。作为支撑列控设备正常运转和列车运行安全的基础，列控工程数据决定了设备的安全性及可靠性，除此之外，列控数据表的每一次编制和数据改动都会有相应的存档，作为列控设备运行和日后安全事故数据回溯的依据，因此，列控工程数据的正确性极其重要。我国高速铁路的快速发展，离不开对列控设备的正常运转和列车行车安全的保证，这就需要对列控工程数据的校核有更为严格的要求。列控工程数据审核具有如下几个特点：时间紧、任务重、数据变更频繁且会严重影响行车安全。首先，列控工程数据涉及到多种参数表格，形式多、数量大，要在短时间内完成如此海量的数据审核任务非常困难。其次，误差修正、线路结构设计修改等行为，都会导致数据内容的变更，这种变更在铁路工程的建设中会全程贯穿，使得列控工程数据审核任务要面临频繁变更的问题。总之，列控工程数据审核是一项时间紧、任务重、数据变更频繁且会严重影响列控设备正常运行及行车安全的工作。如果采用人工审核的方式，效率较低、需要的人工耗费较大，耗费的时间较长，而且处理数量众多的数据，人工审核的方法无法完全保障数据的正确性，这就从客观上要求采用自动化的审核方式。本课题以广州铁路局怀衡快铁实际列控数据为基础，对列控工程数据（进路信息）表的数据做审核验证，根据铁路规范和标准提取验证项的验证规则，结合基础数据和CAD工程图，运用关联规则和多表交叉验证的方法，对列控工程数据（进路信息）做一致性和逻辑性的验证，为后续的工作学习奠定基础，也为列控工程数据审核验证提供一种自动化的便捷方式。1.4论文组织结构介绍本论文有5个大章节，分别对列控数据验证研究背景及意义、列控数据的验证方法、列控数据的验证规则、列控数据的验证模型设计、列控数据的验证模型实现做介绍。论文第1章为绪论，分别有引言、列控工程数据验证研究背景及发展现状、研究意义、论文组织结构这4个章节，主要介绍本课题的研究背景、现状及意义。论文第2章为列控工程数据审核介绍，分别有列控工程数据（进路信息）表验证项目介绍、列控工程数据（进路信息）表规则验证方法、小结这3个章节，主要介绍列控工程数据审核所用到的方法。论文第3章为列控工程数据（进路信息）表验证规则，分别有列控工程数据（进路信息）表填写规范、列控工程数据（进路信息）表验证规则、小结这3个章节，主要介绍列控工程数据（进路信息）表验证项的填写规范，以及从规范中提取出的每个验证项的具体验证规则。论文第4章为列控工程数据（进路信息）表验证模型设计，分别有列控工程数据（进路信息）表验证模型结构介绍、子验证模型设计、子模型联合验证设计、小结这4个章节，主要介绍的是根据验证项的验证规则所设计出的子验证模型，以及将子模型进行联合设计的模型。论文第5章为列控工程数据（进路信息）表验证模型实现，分别有子验证模型实现、子模型联合验证实现、程序测试验证、小结这4个章节，主要介绍的是如何将验证模型进行程序化实现以及程序测试验证的结果。第2章列控工程数据审核方法2.1列控工程数据介绍列控数据作为列控设备进行逻辑运算的基础和核心，实际上是由列控基础数据、列控工程数据、列控设备配置数据等数据共同组成的。其中，列控工程数据是列控设备进行数据配置和数据参数化的基础。列控设备要正常运转、要能安全可靠的进行逻辑运算、需要以正确的列控工程数据作为强大的基础。而列控系统要可靠运行、列车要安全运行都离不开列控设备的正常运转。列控工程数据表所提供的数据作为列控系统数据配置的基础，其正确性直接影响整个列控系统的安全性、可靠性，能直接关系到ATP控车和列车运行安全。列控工程数据表包括有车站信息表、信号数据表、应答器位置表、进路信息表、线路速度表、道岔信息表、里程系信息表等多种数据表格。其中进路信息表是以信号数据表、应答器位置表、联锁表等多个表格的数据为基础进行人为编制的，其对于列控设备可靠运转和列车安全运行具有相当重要的意义。但是由于进路信息表是以多个表格的数据为基础进行人为设计编制的，人为因素占比较高，存在人为因素导致数据编制和审核错误的问题，为了提高列控工程数据（进路信息）表数据编制及验证的正确性，保证列控设备的可靠运行和列车的行车安全，研究和设计列控工程数据（进路信息）表的自动化验证方法是非常有意义和必要的。2.2列控工程数据（进路信息）表验证项目介绍本课题为基于关联规则的列控工程数据（进路信息）验证设计，以广州铁路局怀衡快铁实际列控数据为基础，对列控工程数据表的数据做审核验证。在对实际列控数据表内的具体数据进行分析后，明确表内的待验证项以及待验证项数据的具体含义，并根据铁路标准规范和标准提取验证项的验证规则。首先根据提取出的规则，结合应答器数据表、信号数据表、联锁表和CAD工程图，能人工判断待验证项数据是否正确。再运用关联规则验证和多表交叉验证的方法，将对数据的人工判断转换为验证模型的判断，对列控工程数据（进路信息）做一致性和逻辑性的验证。根据实际列控数据（进路信息）表，从中提取出的待验证项有应答器编号、联锁进路编号、进路、始端信号机名称、始端信号机显示、道岔、轨道区段、进路类型、终端信号机名称以及线路速度。其中，应答器编号需与应答器位置表做一致性验证，需要建立应答器编号验证模型。联锁进路编号、进路、始端信号机名称、始端信号机显示、道岔需与联锁表做一致性验证，需与建立联锁表对比验证模型。轨道区段需与信号数据表做一致性验证，需与建立轨道区段验证模型。进路类型需进行逻辑性验证，需要建立进路类型验证模型。终端信号机名称需进行逻辑性验证，需要建立终端信号机名称验证模型。线路速度需进行逻辑性验证，需要建立线路速度验证模型。这六个子验证模型的建立，都必须以根据铁路标准规范所提取出的规则为基础，运用关联规则方法和交叉验证方法，将验证规则转换为验证模型，将人工判断转换为模型判断。并且还需要运用关联规则方法和交叉验证方法来设计和实现这六个子模型。由于最终需要检验的不止是单一的验证项，而是进路信息表里所有的待验证项的数据，为了使本验证项目的成果能更便捷的运用在对列控数据（进路信息）表的验证上，还需要将六个子验证模型进行联合，组成子模型联合验证的整体模型。因此本验证项目将由三部分组成，分别为数据表格读取、子模型联合验证、验证结果输出。其中，子模型联合验证为整个验证项目的核心，将运用关联规则方法和交叉验证方法进行设计和实现。2.2列控工程数据（进路信息）表规则验证方法2.2.1交叉验证方法交叉验证是一种将数据样本切割成较小子集的方法。在样本切割成的小子集中，先在其中一个子集上进行分析，剩余的其他子集可以用来做对之前子集分析的验证。一开始的子集称为训练集，而剩余的其它子集称为验证集或测试集。交叉验证有时候也称为交叉对比，例如10折交叉对比法，就是将给定的数据集分成10份，轮流将其中的9份做训练1份做测试。本项目所运用的交叉验证法，主要为多表格交叉验证，应用在多个表格相互交叉对比验证中。在交叉验证法的定义中，它是一种将数据样本切割成较小子集的方法。在本设计中，由于数据在表格内已经提前切分好，分别为应答器位置表、联锁表、信号数据表、进路信息表，不需要重新对列控数据进行分类切割，直接根据所属表格就可以进行定位，再根据数据的定位，依据验证规则，将提取数据进行对比。交叉验证法将数据分为训练集和验证集，在本项目中，多表交叉验证也将需要表格分为训练集和验证集，以作为训练集的表格为基础表格，基础表格内的数据为正确数据。作为验证集的表格为验证表格，验证项表格的数据都为待验证数据。将验证表格和基础表格进行对比，通过验证模型，找出验证表格和基础表格不一致的地方，即审核出验证表格内错误的数据。因此，本项目可以通过运用多表交叉验证的方法，检验待验证项数据的一致性。2.2.2关联规则验证方法关联规则是形如X→Y的蕴涵式，X和Y分别称为关联规则的先导和后继。若两个或者多个变量之间存在某种关系，就称之为关联。关联规则的寻找可以发现大量数据中某些数据之间的关联或者关系，简单来说，通过关联规则可以发现事物与事物之间明显或者不明显的联系。关联规则是反映一个事物与其他事物间的关联性，在实际中常常用于一些购物推荐系统。对顾客的购买记录建立数据库，在数据库中进行关联规则挖掘，目的是发现顾客的购买习惯以提升销量。在实际中，运用关联规则最经典的销售案例为“啤酒和尿布”。在本项目中所运用的关联规则法，目的在于通过提取出的规则，找出列控数据之间的关联性，通过对这些关联性的验证，即验证这些待验证项的数据是否满足指定的关联性，来判断待验证项数据的正确性。本项目主要验证的表格为进路信息表，进路信息表的数据中，有部分待验证项是无法直接通过与其他表格进行多表交叉验证对比一致性而审核出数据的正确性的，根据铁路标准规范所提取出的规则，这部分待验证项的数据需要进行逻辑性验证。数据的逻辑性验证需要运用到相关的逻辑性规则，这些逻辑性规则必须以铁路标准规范提取出的规则为基础，寻找列控数据之间的联系和规律，根据关联建立规则，即为关联规则。检验这部分数据是否满足相应的关联规则，即检验这些数据的逻辑性是否正确，以此达到验证数据正确性的目的。2.3小结本项目为基于关联规则的列控工程数据（进路信息）验证设计，整个项目大致分为三个部分，分别为数据表格读取部分，子模型联合验证部分，验证结果输出部分。其中子模型联合验证部分为整个项目的核心，主要运用到交叉验证方法和关联规则验证方法。本章主要介绍了交叉验证方法和关联规则验证方法这两种基本验证方法的含义，以及本项目如何运用这两种基本验证方法达到验证数据的目的。通过这两种基本验证方法来设计子验证模型，组合出的子模型联合验证模型可以对列控工程数据（进路信息）表的数据进行一致性和逻辑性的检验。第3章列控工程数据（进路信息）表验证规则3.1列控工程数据（进路信息）表填写规范《广铁集团列控数据管理暂行办法》中对进路信息表内的数据的填写有如下规定：（1）应答器编号应填写的是进路始端的有源应答器编号，进路始端为无源应答器或仅发码进路应答器编号应填写“-”。（2）联锁进路编号、进路、进路类型、始端信号机、道岔按联锁表填写。进路信息数据表中包含动车组进路和列控中心编码等与列控相关所有进路，数量应与联锁表一致，道岔栏中不应包含防护道岔及带动道岔。（3）终端信号机填写同方向下一架信号机名称或反向进站信号机名称。（4）进路类型共九种：正线接车、侧向接车-1、侧向接车-2、侧向接车-3、反向正线接车、反向侧向接车-1、反向侧向接车-2、反向侧向接车-3、发车。（5）线路速度应填写进路起点到终点的线路速度值，数据格式为“线路速度值（km/h）/长度（m）”。站内速度以进路内轨道电路区段为最小单位分段填写，如果一条进路含多个线路速度时，在每组数据之间用“，”隔开。（6）轨道区段的数据格式为“轨道区段的长度\轨道区段的载频\轨道区段末端的信号点类型\名称”，如果一条进路含多段轨道区段，则在每组数据之间用“，”隔开。对于车站接发车进路中无码区段（含25.7HZ或27.9HZ）,区段载频应填写为“0”，进路中轨道区段不应合并填写。（7）如果有灾害防护区段等其他特殊说明，填写在备注中。3.2列控工程数据（进路信息）表验证规则3.2.1应答器编号验证规则《广铁集团列控数据管理暂行办法》中规定：进路信息表的填写中，应答器编号应填写进路始端的有源应答器编号，进路始端为无源应答器或仅发码进路应答器编号应填写“-”。进路信息表的“应答器编号”，可根据应答器位置表的数据，作一致性的对比验证和逻辑性的关联规则验证，以此来审核进路信息表中“应答器编号”数据的正确性。首先判断进路信息表中“应答器编号”列，填写的数据代表的是“有源应答器”还是“无源应答器”。如果数据是代表“有源应答器”，则“应答器编号”的数据填写应为一串数字，即此应答器的编号。如果数据是代表“无源应答器”，则“应答器编号”的数据填写应为“-”。如果进路信息表中“应答器编号”的数据代表的是无源应答器，即填写的是“-”，在应答器位置表中，“设备类型”列为“无源”的数据较多，无法确定此应答器的名称和编号，不可进行一致性的对比，应人工根据站场图确定此进路的应答器的名称编号来判断其设备类型为“有源”或者“无源”。如果进路信息表中“应答器编号”填写的是应答器的编号，在应答器位置表中寻找应答器编号一致的。如果没有应答器编号一致的，说明进路信息表中，此应答器编号错误。如果找到应答器编号一致的，在应答器位置表中检验此应答器编号对应的设备类型，如果此应答器编号对应的设备类型为“有源”，则进路信息表中，此应答器编号是正确的；如果此应答器编号对应的设备类型为“无源”，则进路信息表中，此应答器编号是错误的。3.2.2联锁表对比验证规则《广铁集团列控数据管理暂行办法》中规定：进路信息表的填写中，联锁进路编号、进路、始端信号机、道岔按联锁表填写。进路信息数据表中包含动车组进路和列控中心编码等与列控相关所有进路，数量应与联锁表一致，道岔栏中不应包含防护道岔及带动道岔。进路信息表的“联锁进路编号”、“进路”、“始端信号机名称”、“始端信号机显示”、“道岔”这几个验证项，可根据联锁表的数据，作一致性的对比验证，以此来审核进路信息表这几个验证项数据的正确性。首先判断进路信息表的“联锁进路编号”与联锁表的“进路号码”是否有一致的，没有一致的,说明进路信息表的“联锁进路编号”有误，此行的数据都无法验证，应该整行显示错误。如果进路信息表的“联锁进路编号”与联锁表的“进路号码”有一致的，就锁定这两个数据一致的两个表的这两行数据进行一致性对比验证。锁定需要进行一致性对比验证的两行数据后，接下来判断进路信息表的“进路”数据是否与联锁表的“进路”数据一致，如果数据一致，则进路信息表的“进路”数据正确；如果数据不一致，则进路信息表的“进路”数据错误。接着判断进路信息表的“始端信号机名称”数据是否与联锁表的“信号机名称”数据一致，如果数据一致，则进路信息表的“始端信号机名称”数据正确，如果数据不一致，则“始端信号机名称”数据错误。接着判断进路信息表的“始端信号机显示”数据是否与联锁表的“信号机显示”数据一致，如果数据一致，则进路信息表的“始端信号机显示”数据正确，如果数据不一致，则进路信息表的“始端信号机显示”数据错误。接着判断进路信息表的“道岔”数据是否与联锁表的“道岔”数据一致，如果数据一致，则进路信息表的“道岔”数据正确，如果数据不一致，则进路信息表的“道岔”数据错误。3.2.3轨道区段验证规则《广铁集团列控数据管理暂行办法》中规定，轨道区段的数据格式为“轨道区段的长度\轨道区段的载频\轨道区段末端的信号点类型\名称”，如果一条进路含多段轨道区段，则在每组数据之间用“，”隔开。对于车站接发车进路中无码区段，区段载频应填写为“0”,进路中轨道区段不应合并填写。进路信息表的“轨道区段”验证项，可根据信号数据表中的数据，作一致性和逻辑性的对比验证，以此来检验进路信息表“轨道区段”内数据的正确性。信号数据表包含了上行线正向、下行线正向、上行线反向、下行线反向这四个工作表，在进行两个表格的对比验证前，需要判断进路信息表内此“轨道区段”待验证项的数据是正向的数据还是反向的数据，这需要运用关联规则进行逻辑性判断，借助进路信息表内此“轨道区段”的同一行数据“进路类型”来进行判断。如果此行数据的“进路类型”为“正线接车”或“侧向接车-1”或“侧向接车-2”或“侧向接车-3”，则“轨道区段”内的数据是正向的数据，需要与信号数据表内两个正向工作表的数据作对比。如果此行数据的“进路类型”为“反向正线接车”或“反向侧向接车-1”或“反向侧向接车-2”或“反向侧向接车-3”，则进路信息表的“轨道区段”内的数据是反向的数据，需要与信号数据表内两个反向工作表的数据作对比。如果“进路类型”为“发车”，则无法直接判断“轨道区段”内的数据是正向还是反向的。但是由于发车都是从站场中间的车站发车的，通过判断终端信号机的名称可以判断发车的方向，可通过判断进路信息表内“终端信号机名称”来判断此“轨道区段”内的数据是正向还是反向的。如果“进路类型”为“发车”，同行的“终端信号机名称”为“X”或者“XF”，则进路信息表的“轨道区段”数据是反向的数据，需要与信号数据表内两个反向工作表的数据作对比。如果“进路类型”为“发车”，同行的“终端信号机名称”为“S”或者“SF”，则进路信息表的“轨道区段”数据是正向的数据，需要与信号数据表内两个反向工作表的数据作对比。如果此行数据的“进路类型”不为上述9种，则数据不足，无法判断此“轨道区段”的数据是正向还是反向的数据，应整行报错。如果判断此“轨道区段”的数据为正向数据，则需要与信号数据表内两个正向工作表的数据作对比。首先判断进路信息表“轨道区段”内的“名称”项数据是否与信号数据表内两个正向工作表的“轨道区段名称”有一致的，无一致的则数据有误，整行报错；有一致的，则锁定此行数据进行对比验证。接着判断进路信息表“轨道区段”内的“长度”项数据是否与信号数据表内已锁定那行数据内的“轨道区段长度”一致，不一致则“轨道区段”内的“长度”项数据有误，应报错；一致则数据正确。接着判断“轨道区段”内的“载频”项数据是否与信号数据表内已锁定那行数据的“轨道区段载频”一致，不一致则“轨道区段”内的“载频”项数据有误，应报错；一致则数据正确。接着判断进路信息表“轨道区段”内的“信号机类型”项数据是否与信号数据表内已锁定那行数据内的“信号点信号点类型”一致，不一致则“轨道区段”内的“信号机类型”项数据有误，应报错；一致则数据正确。如果判断此“轨道区段”的数据为反向数据，则需要与信号数据表内两个反向工作表的数据作对比。首先判断进路信息表“轨道区段”内的“名称”项数据是否与信号数据表内两个反向工作表内的“轨道区段名称”有一致的，无一致则数据有误，整行报错；有一致的，则锁定此行数据进行对比验证。接下去的判断规则与上述相同。3.2.4进路类型验证规则《广铁集团列控数据管理暂行办法》中规定，进路信息表中，进路类型共九种：正线接车、侧向接车-1、侧向接车-2、侧向接车-3、反向正线接车、反向侧向接车-1、反向侧向接车-2、反向侧向接车-3、发车。根据铁路标准规范提取出的规则，可运用关联规则的方法，对进路信息表中“进路类型”的数据进行逻辑性的验证，以检验进路信息表内“进路类型”数据的正确性。首先判断进路信息表内此“进路类型”内的数据是否是“正线接车”，如果是，则数据正确。如果不是，接着判断此数据是否是“侧向接车-1”，如果是，则数据正确；如果不是，接着判断此数据是否是“侧向接车-2”，如果是，则数据正确；如果不是，接着判断此数据是否是“侧向接车-3”，如果是，则数据正确；如果不是，接着判断此数据是否是“反向正线接车”，如果是，则数据正确；如果不是，接着判断此数据是否是“反向侧向接车-1”，如果是，则数据正确；如果不是，接着判断此数据是否是“反向侧向接车-2”，如果是，则数据正确；如果不是，接着判断此数据是否是“反向侧向接车-3”，如果是，则数据正确；如果不是，接着判断此数据是否是“发车”，如果是，则数据正确；如果不是，则说明进路信息表此“进路类型”内的数据不是铁路标准规范中规定的9种进路类型中的一种，说明数据错误，应报错。3.2.5终端信号机名称验证规则《广铁集团列控数据管理暂行办法》中规定，终端信号机填写同方向下一架信号机名称或反向进站信号机名称。对已有的实际列控数据进行分析，结合《广铁集团列控数据管理暂行办法》中的填写规范，可以将铁路标准规范转换成关联规则。可以根据进路信息表“进路”的数据来判断“终端信号机名称”应该填写的是同方向下一架信号机的名称还是反向进站信号机的名称，再根据关联规则对“终端信号极机名称”作逻辑性判断，以此检验数据的正确性。首先判断进路信息表内“进路”的数据格式，是“至xG”还是“由xG”，其中“x”为变量，由股道名称决定。如果进路信息表内“进路”的数据格式是“至xG”，则说明此行数据的“终端信号机名称”应填写同方向下一架信号机名称，即为“Xx”，其中“x”由股道名称决定，应相同。如果数据符合上述关联规则，则说明终端信号机名称”数据正确；如果数据不符，则说明“终端信号机名称”数据错误，应报错。如果进路信息表内“进路”的数据格式是“由xG”，则说明此行数据的“终端信号机名称”应填写反向进站信号机名称，即进路信息表内，此行数据的“终端信号机名称”应该为表内上一行数据的“终端信号机名称”或“始端信号机名称”。如果数据符合上述关联规则，则说明终端信号机名称”数据正确；如果数据不符，则说明“终端信号机名称”数据错误，应报错。3.2.6线路速度验证规则《广铁集团列控数据管理暂行办法》中规定，线路速度应填写进路起点到终点的线路速度值，数据格式为“线路速度值（km/h）/长度（m）”。由于验证“线路速度值”所需的数据表不足，在此只验证“线路速度”里的“长度”项的数据是否正确。对已有的实际列控数据进行分析，结合《广铁集团列控数据管理暂行办法》中的填写规范，可以根据进路信息表内“轨道区段”的数据，提取出“线路速度”里“长度”项的关联规则。再根据关联规则，对“线路速度”的“长度”项作逻辑性和一致性的对比验证，以此检验数据的正确性。在进路信息表中，“线路速度”包含了“线路速度值”和“长度”两个数据项，“轨道区段”中有“长度”这个数据项。可根据“轨道区段”内“长度”项的数据对“线路速度”内“长度”项的数据作逻辑性和一致性的对比验证。在进路信息表的同一行数据中，首先将“线路速度”单个格子内的所有“长度”项数据进行相加，得到“线路速度长度相加值”；接着将“轨道区段”单个格子内所有的“长度”项数据进行相加，得到“轨道区段长度相加值”。将两个相加值进行对比，如果两个相加值数据一致，则说明“线路速度”的“长度”项数据正确；如果两个相加值数据不一致，则说明“线路速度”的“长度”项数据错误，应报错。3.3小结本章节主要介绍了《广铁集团列控数据管理暂行办法》中对进路信息表内各项数据的填写规范，以及在对已有的实际列控数据进行分析后，结合铁路标准规范提取出的验证规则。根据实际列控数据（进路信息）表，从中提取出应答器编号、联锁进路编号、进路、始端信号机名称、始端信号机显示、道岔、轨道区段、进路类型、终端信号机名称以及线路速度这几个待验证项，结合实际列控数据和铁路标准规范，将这几个待验证项的规则进行整理后，应该有六大规则，分别为应答器编号验证规则、联锁表对比验证规则、轨道区段验证规则、进路类型验证规则、终端信号机名称验证规则、线路速度验证规则。本章节分别对应答器编号验证规则、联锁表对比验证规则、轨道区段验证规则、进路类型验证规则、终端信号机名称验证规则、线路速度验证规则这六大规则的具体内容作了详细介绍，包括《广铁集团列控数据管理暂行办法》中每个待验证项的具体填写规范、铁路标准规则以及从实际列控数据中提取总结的相关规则。同时还具体介绍了待验证项的标准数据格式，待验证项进行数据验证时应该运用的关联规则方法和多表交叉验证方法，以及具体说明了每项待验证数据是作一致性对比验证还是逻辑性对比验证和具体验证方法。第4章列控工程数据（进路信息）表验证模型设计4.1列控工程数据（进路信息）表验证模型结构介绍将待验证项的验证规则进行分类整理后，以根据铁路标准规范所提取出的规则为基础，运用关联规则方法和交叉验证方法，将验证规则转换为验证模型，建立起六个子验证模型。分别为应答器编号验证模型、联锁表对比验证模型、轨道区段验证模型、进路类型验证模型、终端信号机名称验证模型、线路速度验证模型。为了使进路信息表的验证模型运用起来更加便捷，需要将六个子验证模型进行联合，组成子模型联合验证的整体模型。同时，数据的验证需要各数据表格的输入和验证结果的输出，因此需要增加数据表格读取部分和验证结果输出部分。数据表格读取部分主要读取进路信息表、联锁表、基础数据表和应答器位置表这几个表格。验证结果输出则是将数据验证后，把错误数据的位置信息及错误原因进行整合，输出到验证结果数据表中。因此本验证项目的结构实际由三部分组成，分别为数据表格读取、子模型联合验证、验证结果输出。进路信息表的验证模型具体结构如图4-1。图4-1进路信息表的验证模型结构4.2子验证模型设计4.2.1应答器编号验证模型应答器编号验证模型为进路信息表验证模型的子验证模型之一，以应答器编号验证规则为基础，运用多表交叉验证方式和关联规则验证方式进行模型设计。验证流程需要进路信息表和应答器位置表，主要验证进路信息表的“应答器编号”验证项数据的一致性和逻辑性。验证流程如下：①判断进路信息表xls的“应答器编号”是“有源”还是“无源”（“有源”为一串数字，即应答器编号，“无源”为“-”）②如果进路信息表xls的“应答器编号”是“无源”，即“-”，则不审核。③如果进路信息表xls的“应答器编号”是“有源”，即应答器编号，则在应答器位置表xls中寻找“应答器编号”一致的。④应答器编号一致的，在应答器位置表xls中，此应答器对应的设备类型是“有源”或“无源”。⑤设备类型为“有源”，进路信息表xls的应答器编号是正确的。⑥设备类型为“无源”，进路信息表xls的应答器编号是错误的，应报错。4.2.2联锁表对比验证模型联锁表对比验证模型为进路信息表验证模型的子验证模型之一，以联锁表对比验证规则为基础，运用多表交叉验证方式进行模型设计。验证流程需要进路信息表和联锁表，主要验证进路信息表的“联锁进路编号”、“进路”、“始端信号机名称”、“始端信号机显示”、“道岔”这几个验证项数据的一致性。验证流程如下：①判断进路信息表xls的“联锁进路编号”和联锁表xls的“进路号码”是否有一致的。②如果进路信息表xls的“联锁进路编号”和联锁表xls的“进路号码”有一致的，锁定这两行数据进行对比验证。③如果进路信息表xls的“联锁进路编号”和联锁表xls的“进路号码”无一致的，整行报错。④如果进路信息表xls的“联锁进路编号”和联锁表xls的“进路号码”有一致的，锁定需要对比验证的两行数据后，判断路信息表xls的“进路”数据是否与联锁表xls的“进路”数据一致。数据一致，则进路信息表的“进路”数据正确；如果数据不一致，则“进路”数据错误，应报错。⑤判断进路信息表xls“始端信号机名称”是否与联锁表xls“信号机名称”数据一致，如果数据一致，则进路信息表xls的“始端信号机名称”数据正确，如果数据不一致，则“始端信号机名称”数据错误，应报错。⑥判断进路信息表xls的“始端信号机显示”数据是否与联锁表xls的“信号机显示”数据一致，如果数据一致，则进路信息表xls的“始端信号机显示”数据正确，如果数据不一致，则“始端信号机显示”数据错误，应报错。⑦判断进路信息表xls的“道岔”数据是否与联锁表xls的“道岔”数据一致，如果数据一致，则进路信息表xls的“道岔”数据正确，如果数据不一致，则“道岔”数据错误，应报错。4.2.3轨道区段验证模型轨道区段验证模型为进路信息表验证模型的子验证模型之一，以轨道区段验证规则为基础，运用多表交叉验证方式和关联规则验证方式进行模型设计。验证流程需要进路信息表和信号数据表，主要验证进路信息表的“轨道区段”验证项数据的一致性和逻辑性。验证流程如下：①判断进路信息表xls内此“轨道区段”中的数据是正向数据还是反向数据。②如果同行数据的“进路类型”为“正线接车”或“侧向接车-1”或“侧向接车-2”或“侧向接车-3”，则此行“轨道区段”内的数据是正向的数据，需要与信号数据表xls的上行线正向工作表和下行线正向工作表的数据作对比。③如果同行数据的“进路类型”为“反向正线接车”或“反向侧向接车-1”或“反向侧向接车-2”或“反向侧向接车-3”，则此行“轨道区段”内的数据是反向的数据，需要与信号数据表xls的上行线反向工作表和下行线反向工作表的数据作对比。④如果同行数据的“进路类型”为“发车”，并且此行的“终端信号机名称”为“X”或者“XF”，则“轨道区段”内的数据是反向数据，需要与信号数据表xls的上行线反向工作表和下行线反向工作表的数据作对比。⑤如果同行数据的“进路类型”为“发车”，并且此行的“终端信号机名称”为“S”或者“SF”，则“轨道区段”内的数据是反向的数据，需要与信号数据表xls的上行线正向工作表和下行线正向工作表的数据作对比。⑥如果同行数据的“进路类型”不为上述9种，则数据不足无法判断，整行报错。⑦如果判断此“轨道区段”的数据为正向数据，接着判断进路信息表xls的“轨道区段”内的“名称”项数据是否与信号数据表xls上行线正向工作表或下行线正向工作表内的“轨道区段名称”有一致的，无一致的则数据有误，整行报错；有一致的，则锁定此行数据进行对比验证。⑧判断进路信息表xls“轨道区段”内“长度”项数据是否与信号数据表xls内已锁定那行数据内的“轨道区段长度”一致，不一致的则进路信息表xls“轨道区段”内的“长度”项数据有误，报错；一致则数据正确。⑨判断进路信息表xls“轨道区段”内“载频”项数据是否与信号数据表xls内已锁定那行数据内的“轨道区段载频”一致，不一致的则进路信息表xls“轨道区段”内的“载频”项数据有误，报错；一致则数据正确。⑩判断进路信息表xls“轨道区段”内“信号机类型”项数据是否与信号数据表xls内已锁定那行数据内的“信号点信号点类型”一致，不一致的则进路信息表xls“轨道区段”内的“信号机类型”项数据有误，报错；一致则数据正确。?如果判断此“轨道区段”的数据为反向数据，接着判断进路信息表xls的“轨道区段”内的“名称”项数据是否与信号数据表xls上行线反向工作表或下行线反向工作表内的“轨道区段名称”有一致的，无一致的则数据有误，整行报错；有一致的，则锁定此行数据进行对比验证。?判断进路信息表xls“轨道区段”内“长度”项数据是否与信号数据表xls内已锁定那行数据内的“轨道区段长度”一致，不一致的则进路信息表xls“轨道区段”内的“长度”项数据有误，报错；一致则数据正确。?判断进路信息表xls“轨道区段”内“载频”项数据是否与信号数据表xls内已锁定那行数据内的“轨道区段载频”一致，不一致的则进路信息表xls“轨道区段”内的“载频”项数据有误，报错；一致则数据正确。?判断进路信息表xls“轨道区段”内“信号机类型”项数据是否与信号数据表xls内已锁定那行数据内的“信号点信号点类型”一致，不一致的则进路信息表xls“轨道区段”内的“信号机类型”项数据有误，报错；一致则数据正确。4.2.4进路类型验证模型进路类型验证模型为进路信息表验证模型的子验证模型之一，以进路类型验证规则为基础，运用关联规则验证方式进行模型设计。验证流程只需要进路信息表，主要验证进路信息表的“进路类型”验证项数据的逻辑性。验证流程如下：①判断进路信息表xls内“进路类型”的数据是否是“正线接车”，如果是，则“进路类型”数据正确；如果不是，判断下一个条件。②判断进路信息表xls内“进路类型”的数据是否是“侧向接车-1”，如果是，则“进路类型”数据正确；如果不是，继续判断下一个条件。③判断进路信息表xls内“进路类型”的数据是否是“侧向接车-2”，如果是，则“进路类型”数据正确；如果不是，继续判断下一个条件。④判断进路信息表xls内“进路类型”的数据是否是“侧向接车-3”，如果是，则“进路类型”数据正确；如果不是，继续判断下一个条件。⑤判断进路信息表xls内“进路类型”的数据是否是“反向正线接车”，如果是，则“进路类型”数据正确；如果不是，继续判断下一个条件。⑥判断进路信息表xls内“进路类型”的数据是否是“反向侧向接车-1”，如果是，则“进路类型”数据正确；如果不是，继续判断下一个条件。⑦判断进路信息表xls内“进路类型”的数据是否是“反向侧向接车-2”，如果是，则“进路类型”数据正确；如果不是，继续判断下一个条件。⑧判断进路信息表xls内“进路类型”的数据是否是“反向侧向接车-3”，如果是，则“进路类型”数据正确；如果不是，继续判断下一个条件。⑨判断进路信息表xls内“进路类型”的数据是否是“发车”，如果是，则进“进路类型”数据正确；如果不是，则“进路类型”数据错误，应报错。4.2.5终端信号机名称验证模型终端信号机名称验证模型为进路信息表验证模型的子验证模型之一，以终端信号机名称验证规则为基础，运用关联规则验证方式进行模型设计。验证流程只需要进路信息表，主要验证进路信息表的“终端信号机名称”验证项数据的逻辑性。验证流程如下：①判断进路信息表xls内此行数据的“进路”格式是否是“至xG”。②如果是，判断则进路信息表xls内同行数据的“终端信号机名称”是否是“Xx”。如果是，则数据正确；如果不是，则数据错误，应报错。③如果不是，判断进路信息表xls内此行数据的“进路”格式是否是“由xG”。④如果是，判断进路信息表xls内此行数据的“终端信号机名称”是否与上一行数据的“终端信号机名称”相同。如果相同，则数据正确；如果不相同，判断下一个条件。⑤判断进路信息表xls内此行数据的“终端信号机名称”是否与上一行数据的“始端信号机名称”相同。如果相同，则数据正确；如果不相同，则数据错误，应报错。4.2.6线路速度验证模型线路速度验证模型为进路信息表验证模型的子验证模型之一，以线路速度验证规则为基础，运用关联规则验证方式进行模型设计。验证流程只需要进路信息表，由于数据不足，在此主要验证进路信息表的“线路速度”的“长度”验证项数据的一致性和逻辑性。验证流程如下：①将进路信息表xls内同行的“线路速度”单个格子内的所有“长度”项数据进行相加，得到“线路速度长度相加值”。②将进路信息表xls内同行的“轨道区段”单个格子内的所有“长度”项数据进行相加，得到“轨道区段长度相加值”。③将“线路速度长度相加值”与“轨道区段长度相加值”进行对比验证。④如果两个相加值数据一致，说明“线路速度”的“长度”项数据正确；如果两个相加值数据不一致，说明“线路速度”的“长度”项数据错误，应报错。4.3子模型联合验证设计为了使进路信息表的验证模型运用起来更加便捷，再将六个子验证模型单独设计好后，还需要将六个子验证模型进行联合，组成子模型联合验证的整体模型。各数据表内的数据在输入到子模型联合验证的整体模型里后，按顺序经过这六个子验证模型的验证，可以将进路信息表内的“应答器编号”、“联锁进路编号”、“进路”、“始端信号机名称”、“始端信号机显示”、“道岔”、“轨道区段”、“进路类型”、“终端信号机名称”、“线路速度”的“长度”这几个待验证项的数据进行逻辑性和一致性的检验。验证流程如下：①进路信息表xls的数据进入子模型联合验证模型后，首先经过应答器编号验证模型，验证进路信息表xls内“应答器编号”验证项的数据是否正确，如果数据有误，应报错，并标明错误数据的位置信息以及错误原因。②数据接着经过联锁表对比验证模型，验证进路信息表xls内“联锁进路编号”、“始端信号机名称”、“始端信号机显示”、“道岔”、“进路”验证项的数据是否正确，如果数据有误，应报错，并标明错误数据的位置信息以及错误原因。③数据接着经过轨道区段验证模型，验证进路信息表xls内“轨道区段”验证项的数据是否正确，如果数据有误，应报错，并标明错误数据的位置信息以及错误原因。④数据接着经过进路类型验证模型，验证进路信息表xls内“进路类型”验证项的数据是否正确，如果数据有误，应报错，并标明错误数据的位置信息以及错误原因。⑤数据接着经过终端信号机名称验证模型，验证进路信息表xls内“终端信号机名称”验证项的数据是否正确，如果数据有误，应报错，并标明错误数据的位置信息以及错误原因。⑥数据接着经过线路速度验证模型，验证进路信息表xls内“线路速度”的“长度”验证项的数据是否正确，如果数据有误，应报错，并标明错误数据的位置信息以及错误原因。⑦将错误数据的位置信息以及错误原因输出到验证结果输出部分。子模型联合验证模型结构如图4-2。图4-2子模型联合验证模型结构4.4小结本章节具体介绍了进路信息表验证模型的整体结构，包含了数据表格读取、子模型联合验证、验证结果输出这三部分，数据表格读取部分为数据输入，子模型联合验证为数据验证，验证结果输出为数据验证结果的输出。同时介绍了应答器编号验证模型、联锁表对比验证模型、轨道区段验证模型、进路类型验证模型、终端信号机名称验证模型、线路速度验证模型六个子验证模型的具体设计思路和设计流程。除此之外，还对将六个子验证模型组合成子模型联合验证的设计思路、组合方式、验证流程和模型结构做了详细介绍，阐述了各个验证模型是如何将规则转换成模型设计，将对数据的人为判断转换为机器判断。第5章列控工程数据（进路信息）表验证模型实现5.1子验证模型实现5.1.1应答器编号验证模型实现运用关联规则验证和交叉验证的方法将进路信息表的“应答器编号”验证项的验证规则转换设计成应答器编号验证模型后，使用Python和Spyder将验证模型以如下流程图5-1的形式编程实现。此验证模型主要验证进路信息表内“应答器编号”项数据的一致性及逻辑性，需要以应答器位置表的数据作为基础数据表进行对比。5.1.2联锁表对比验证模型实现运用交叉验证法将进路信息表的“联锁进路编号”、“始端信号机名称”、“始端信号机显示”、“道岔”、“进路”验证项的验证规则转换设计成联锁表对比验证模型后，设计其编程流程图，使用Python和Spyder将验证模型以如下流程图5-3的形式编程实现。进路信息表的“联锁进路编号”、“始端信号机名称”、“始端信号机显示”、“道岔”、“进路”这几项验证项的数据都是以联锁表的数据为基础数据进行设计编制的，所以需要与联锁表的基础数据进行交叉验证，即以联锁表为对照表，进路信息表为测验表，检验待验证项数据的一致性来保证这些数据的正确性。由于进路信息表中“进路”、“始端信号机显示”、“道岔”、“始端信号机名称”这几个验证项都是与联锁表的数据进行一致性对比，他们算法相似，在此举例“始端信号机显示”和“道岔”的算法进行说明。5.1.3轨道区段验证模型实现运用关联规则和交叉验证的方法将进路信息表的“轨道区段”验证项的验证规则转换设计成轨道区段验证模型之后，使用Python和Spyder将验证模型以如下流程图的形式编程实现。由于“轨道区段”需要首先判断其数据为正向还是反向的数据，再决定其数据是与信号数据表内的正向数据表或反向数据表做比较，所以轨道区段的验证模型实现有3个流程图。流程图5-5为判断进路信息表“轨道区段”的数据为正向数据还是反向数据，正向数据走流程1，反向数据走流程2；流程图5-6为流程1，指进路信息表“轨道区段”的数据为正向数据，与信号数据表内的正向数据表做比较；流程图5-7为流程2，指进路信息表“轨道区段”的数据为反向数据，与信号数据表内的正向数据表做比较。由于流程2和流程3的算法相似，在此举例判断轨道区段数据为正向数据，走流程1的算法进行说明。图5-5判断轨道区段数据方向流程图图5-6轨道区段数据正向流程图图5-7轨道区段数据反向流程图5.1.4进路类型验证模型实现运用关联规则验证的方法将进路信息表的“进路类型”验证项的验证规则转换设计成进路类型验证模型之后，设计其编程流程图，使用Python和Spyder将验证模型以如下流程图5-9的形式编程实现。在铁路标准规范里，对进路信息表的“进路类型”一项有直接的定义和填写要求，可以运用“进路类型”在铁路标准规范里的定义建立它的关联规则，然后直接验证进路信息表的此项“进路类型”数据是否满足关联规则，满足则数据正确，不满足则数据错误，以此来检验数据的逻辑性是否正确。5.1.5终端信号机名称验证模型实现运用关联规则验证的方法将进路信息表的“终端信号机名称”验证项的验证规则转换设计成终端信号机名称验证模型后，使用Python和Spyder将验证模型以如下流程图5-11的形式编程实现。要对进路信息表的“终端信号机名称”一项进行验证，首先要判断在进路信息表里，此项数据应该填写的是同方向下一架信号机名称还是反向进站信号机名称。可以借助进路信息表内“进路”项的数据来判断它应该填写同方向下一架信号机名称还是反向进站信号机名称，再根据填写要求，借助表内其他项的数据例如“始端信号机名称”等来建立关联规则，检验数据是否满足关联规则，以此进行进路信息表的“终端信号机名称”逻辑性验证。图5-12终端信号机名称规则算法5.1.6线路速度验证模型实现运用关联规则验证的方法将进路信息表的“线路速度”的“长度”验证项的验证规则转换设计成线路速度验证模型后，设计其编程流程图，使用Python和Spyder将验证模型以如下流程图5-13的形式编程实现。由于“长度”项数据在进路信息表的“线路速度”和进路信息表的“轨道区段”两项数据里都是分段进行编制的，每项“线路速度”和“轨道区段”数据都包含了一个或多个“长度”项数据，由此可以将“线路速度”和“轨道区段”这两项的“长度”的数据都分别进行相加，建立起两个相加值数据的关联规则，通过检验数据是否满足关联规则来达到验证“线路速度”里“长度”项数据逻辑性的目的。图5-14线路速度的长度规则算法5.2子模型联合验证实现将应答器编号验证模型、联锁表对比验证模型、轨道区段验证模型、进路类型验证模型、终端信号机名称验证模型、线路速度验证模型六个子验证模型分别编程实现后，每个子验证模型都可以单独运行检验相应的数据是否正确，并单独输出一个数据验证结果表格和一个验证摘要文档。为了更便捷的运用进路信息表验证模型，让数据表格在输入后可以直接验证所有待验证项数据的正确性，而不需要单独运行每一个子验证模型，可以将六个子验证模型组合调用，形成子模型联合验证。使用Python和Spyder将六个子验证模型的程序按顺序调用，按照流程图5-15的方法编程实现子模型联合验证。图5-15子模型联合验证流程图图5-16子模型联合验证规则算法5.3程序测试验证将应答器编号验证模型、联锁表对比验证模型、轨道区段验证模型、进路类型验证模型、终端信号机名称验证模型、线路速度验证模型这六个子验证模型以及调用组合成的子模型联合验证模型设计并用Python和Spyder编程完成后，用已有的实际列控工程数据（进路信息）表进行程序测试验证。测试结果为每个单独的子验证模型程序都能够完成相应模型的验证要求，将六个子验证模型程序同时调用后，子模型联合验证可以按顺序对进路信息表内需要进行验证的数据进行验证，并得到一份信息摘要文档和验证结果输出表格。以下为程序测试结果图。使用Spyder应用应答器编号验证模型的程序进行数据验证。将数据表格输入到应答器编号验证模型里后，应答器编号验证模型的程序测试结果如图5-17。图为程序在Spyder运行后的界面，会显示所检验表格的行数、列数、检验数据的总数量以及错误数据的总数量等摘要信息。经过验证后，会得到一个验证结果输出表格，在表格里会显示错误数据的位置信息及错误原因，验证结果输出表格如图5-18。图5-17应答器编号验证模型程序测试结果图5-18应答器编号验证模型验证结果表格使用Spyder应用联锁表对比验证模型的程序进行数据验证，其验证模型的程序测试结果如图5-19。图为程序在Spyder运行后的界面，会显示所检验表格的行数和列数以及检验数据的总数量和错误数据的总数量等摘要信息。经过验证后，会得到一个验证结果输出表格，错误数据的位置信息及错误原因会在表格中显示，验证结果输出表格如图5-20。图5-19联锁表对比验证模型程序测试结果图5-20联锁表对比验证模型验证结果表格使用Spyder应用轨道区段验证模型的程序进行数据验证，其验证模型的程序测试结果如图5-21。图为程序在Spyder运行后的界面，显示了所检验表格的行列数、检验数据的总数量及错误数据的总数量等摘要信息，在其下方的程序运行输出框内还会显示所检验数据的具体信息，例如错误数据位置及错误原因。经过验证后，会得到一个验证结果输出表格，在表格里会按照验证规则一条一条显示错误数据的位置信息及错误原因，验证结果输出表格如图5-22。图5-21轨道区段验证模型程序测试结果图5-22轨道区段验证模型验证结果表格使用Spyder应用进路类型验证模型的程序进行数据验证，其验证模型的程序测试结果如图5-23。图为程序在Spyder运行后的界面，会显示所检验表格的行数和列数以及检验数据的总数量和错误数据的总数量等摘要信息，由于此次验证的数据都为正确数据，所以错误数据的数量为0。图5-23进路类型验证模型程序测试结果使用Spyder应用终端信号机名称验证模型的程序进行数据验证，其验证模型的程序测试结果如图5-24。图为程序在Spyder运行后的界面，会显示所检验表格的行数和列数以及检验数据的总数量和错误数据的总数量等摘要信息。在其下方的程序运行输出框内还会显示所检验数据的具体信息，例如错误数据位置及错误原因。由于此次验证的数据都为正确数据，所以错误数据的数量为0。图5-24终端信号机名称验证模型程序测试结果使用Spyder应用线路速度验证模型的程序进行数据验证，其验证模型的程序测试结果如图5-25。图为程序在Spyder运行后的界面，会显示所检验表格的行数和列数以及检验数据的总数量和错误数据的总数量等摘要信息。此次验证输入的数据经过计算和关联规则验证后，数据都是正确的，所以错误数据的数量为0，在程序运行输出框内也只有摘要信息，并无错误数据的信息。图5-25线路速度验证模型程序测试结使用Spyder将六个子验证模型的程序进行一一调用，可以同时用六个子验证模型的验证规则对整个进路信息表待验证项的数据进行验证，而不需要每个子验证模型的程序都单独运行一次，子模型联合验证对数据的检验更为方便快捷，其验证模型的程序测试结果图图5-26。图为程序在Spyder运行后的界面，会显示所检验表格的检验数据的总数量和错误数据的总数量等摘要信息，在其下方的程序运行输出框内，会显示所检验数据的具体信息，例如错误数据位置及错误原因。由于子模型联合验证是调用了六个子验证模型的程序，所以输出的数据验证结果其实为六个子验证模型分别单独运行后的数据总和。验证结果输出表格如图5-27。图5-26子模型联合验证程序测试结果图5-27子模型联合验证验证结果表格5.4小结本章节主要介绍了应答器编号验证模型、联锁表对比验证模型、轨道区段验证模型、进路类型验证模型、终端信号机名称验证模型、线路速度验证模型六个子验证模型以及子模型联合验证模型的编程流程图以及进行验证规则判断的关键程序代码。通过流程图，直观的展示如何将具体的数据判断规则转换成机器判断规则，即将数据的验证规则通过编程转换为模型实现、机器判断。将各个验证模型都通过编程实现后，用Spyder运行程序，使用已有的实际列控数据对程序进行测试，将各个子验证模型的程序测试结果以及程序运行后的验证结果输出表格通过图片的方式进行了介绍，通过流程图、代码、图片说明和实际的程序测试结果，具体介绍了应答器编号验证模型、联锁表对比验证模型、轨道区段验证模型、进路类型验证模型、终端信号机名称验证模型、线路速度验证模型这六个子验证模型程序的功能和子模型联合验证的功能。1.1研究背景及意义高速铁路具有节能、环保、运量大、速度快、正点、安全、舒适等特点，世界上很多国家都在大力发展高速铁路。尽管我国的高速铁路在规划和建设等方面相对于发达国家起步较晚，但是发展速度惊人。通过引入国外核心技术，在消化吸收的基础上再创新，现经成为世界上高速铁路发展最快、集成能力最强、系统技术最全、运营里程最长、运营速度最高、在建规模最大的国家[1]。联锁系统作为高铁系统的一部分，已经成为高铁走出国门、保证运营安全不可或缺的关键技术[2]。由于高速铁路列车运行速度高、运行间隔小、正点率要求高，为提高系统的安全与效率，必须配有计算机联锁系统。高速铁路信号联锁系统是高铁安全运营的关键系统，其研发创新关系到我国高铁技术的核心竞争力，对高速铁路的发展具有重要意义[3]。1.2国内外研究现状1.2.1国内研究现状计算机联锁系统是安全相关系统，必须具有高可靠性和高安全性，在其关键的联锁逻辑环节采用冗余设计结构，这种结构决定了联锁系统实现时所采用的软、硬件结构。目前联锁冗余结构主要有3种：双机热备（或二取二）、三取二和二乘二取二[6]。铁科院的TYJL-TR9型三取二计算机联锁系统的联锁软件以IEC-1131作标准，利用功能图块编制，采用面向对象的编程方式，信号机、道岔、轨道电路区段等联锁逻辑均做成标准模块。通号研究设计院研制的DS6-11型计算机联锁系统的应用软件由站场数据库和应用程序两部分组成，专门开发了计算机辅助设计软件，可以自动生成站场数据库[7]。2013年，北京交通大学国家重点实验室提出基于Event-B的联锁进路控制建模方法[8]。方辰禹针对软件开发过程中的软件复用问题，将领域工程方法应用在铁路联锁软件开发中，结合面向领域的建模方法，为联锁软件的开发提供了一个通用的架构模型[7]。国际、国内都开展过基于布尔代数的计算机辅助设计软件的开发，但都存在单套软件不具有相异性、不具有对信号工程师开放性等限制。针对这一问题，上海交通大学的师秀霞提出了具有白盒应用性的基于布尔代数的辅助设计软件，设置专用的“知识库”和计算机联锁领域专用的“具有白盒应用性的设计语言”，采用“双套相异软件”为同一个输入逻辑生成布尔表达式，然后进行比较，结果一致才允许使用[8]。总的来说，我国计算机联锁系统在联锁逻辑部分用计算机计算，在室外信号设备控制部分仍使用继电器控制。1.2.2国外研究现状意大利的ANSALDO电子联锁系统，用自定义的半形式化语言描述联锁过程，再将半形式化语言翻译成CCS形式化语言，生成系统的全局模型[9]。英国斯旺西大学于2009年在分析车站拓扑结构的基础上提出了一种基于梯形逻辑的数学模型，并成功用于实际系统中[10]。加拿大庞巴迪公司的EBI950计算机联锁系统，采用模块化设计法则，系统中两种不同的算法相互独立，最大限度的保证了系统的安全可靠性[11]。瑞典的iLock软件和法国的ADES软件，都是基于布尔代数的辅助设计软件。iLock使用PiSPEC规范进行编写，将其转换为梯形图，以源数据的拓扑结构为输入文件，自动生成布尔表达式；ADES使用Prolog语言进行编写，通过读取源数据的拓扑结构或者信号工程师定义的一种规定格式的文本文件，自动生成布尔表达式。1.3本文主要研究内容和组织结构论文主要是完成高铁车站信号逻辑的分析与设计，以西南交通大学峨眉校区城轨实验室为基础，对峨眉山高铁站进行联锁逻辑的设计实现：第1章论述本文的研究背景以及计算机联锁的发展情况，提出论文的主要研究内容和组织结构；第2章简要阐述计算机联锁的结构和特点，与室外设备的接口，以及布尔代数的介绍；第3章划分联锁系统的功能模块，对主要功能模块进行逻辑分析。从6502电气集中电路入手，对进路控制过程作需求分析，详细研究联锁进路控制过程中信号、道岔、轨道电路相互之间的关系；第4章联锁逻辑的实现。包括联锁表的编制、站场的绘制、信号设备初始化以及第三章主要模块功能的具体实现，用类6502继电联锁的方式，采用布尔变量状态代替6502联锁逻辑实现过程中的部分继电器。；第5章联锁系统的功能演示。对第四章实现的联锁控制功能逐一进行演示。最后，总结本论文的主要工作，并指出其中的不足。第2章计算机联锁系统结构2.1车站联锁系统车站联锁系统是专用于对列车和车列在车站内的运行进行控制，并保证其运行安全的控制系统。道岔和信号是车站联锁系统直接控制的轨旁设备，进路则是铁路车站对列车和车列运行进行控制管理的基本实现方式。2.1.1基本概念联锁就是将具有特定约束关系的相关对象联系起来，严格按照规定的程序和条件加以控制并进行锁定/解锁，以避免因约束关系被破坏而产生可能的严重后果。铁路车站联锁是通过技术手段实现并确保信号、道岔、区段以及进路间的相互关系正确，严格按照规定的联锁条件控制道岔的转换和锁闭、信号的开放和关闭、进路的建立和解锁等。联锁系统依据信号、道岔、轨道区段以及进路间的联锁关系，自动的对值班员的操作进行联锁条件检查，通过排列进路和控制信号显示对列车和车列的运行进行控制[12]。2.1.2联锁关系联锁的基本内容包括：①防止建立会导致机车车辆相冲突的进路。②道岔均与进路开通方向相符。③信号显示与所建立进路相符。进路是由道岔和轨道区段组成，有信号指示和防护的特定经路。相关的道岔位置及其表示是否正确、相关的轨道区段是否空闲，是防护进路的信号能否开放的前提条件；而且进路必须具有排他性，一旦建立后进路上的每个信号、道岔和轨道区段均不能同时再属于其他的进路。因此，为了保证行车安全，必须严格检查相关的信号、道岔、轨道区段等之间的关系，满足特定的条件，即构成进路的各信号设备之间必须满足特定的联锁关系，才能按照规定的顺序和程序动作；进路一经建立又必须对之加以“锁闭”，且“锁闭”之后只能在满足规定的条件下，才能按照这个规定顺序解除锁闭。2.2计算机联锁系统构成及特点计算机联锁系统（CBI），是以计算机控制技术为核心的计算机实时控制系统，采用可靠性技术、“失效-安全”技术以及通信技术等实现车站联锁要求；通过电气和/或电子传输方式集中操纵道岔及信号机，以软件实现联锁关系。2.2.1计算机联锁系统的基本结构根据系统各主要部分的功能和设置地点，系统一般分为人机会话层、联锁层、执行层和轨旁设备接口层。图2-1计算机联锁系统框图（1）人机会话层人机会话层的设备包括操作表示计算机、显示器和鼠标。人机会话层的主要功能是通过值班员的操作，向联锁层输入操作信息，并接收联锁层输出的反映信号设备工作状态和行车作业情况的表示信息。（2）联锁运算层联锁层是车站联锁系统的核心，其功能是实现高可靠性和高安全性的联锁功能。联锁计算机从人机对话计算机接收操作命令，并从执行层接收反映信号机、转辙机和轨道电路的状态信息。然后根据联锁条件，对操作信息和状态信息，以及联锁机构当前的内部信息，进行联锁逻辑运算。发出控制道岔转换和开放信号的控制命令，并交付执行层的控制电路予以执行。联锁计算机所处理的信息都是二值逻辑信息（即都是开关量），因此，联锁计算机又是逻辑处理机构。（3）执行层执行层指联锁层与各个监控对象之间的控制电路这一层。执行层主要以继电器为对象进行标准开关量的实时采集与驱动，即通过对继电器节点闭合状态的采集，得到相关信号设备的状态或条件信息；通过对继电器线圈的供电与否控制其接点的开闭，进而通过接口电路控制道岔的转换或信号的开放等。（4）轨旁设备接口层接口层与执行层紧密相关，包括室外的信号机、转辙机和轨道电路等设备及其相应的动作电路，用于驱动室外信号设备的直接动作。目前典型结构的计算机联锁系统，均采用继电器接口电路，且保留和沿用了6502电气集中对轨旁设备的主要继电接口电路（道岔控制与表示、信号灯点灯电路等），被保留的这部分继电器的数量仍要占到6502电气集中全部继电器数量的1/3左右[8]。2.2.2计算机联锁系统的一般功能特点目前，我国铁路上使用的计算机联锁系统，在研发时从控制方式到联锁逻辑的实现，都完全是以6502电气集中联锁系统为蓝本的。在进路的选排、锁闭/解锁以及信号、道岔控制等基本的操作功能与继电联锁并无本质上的差异。但由于技术实现手段的进步，在车站联锁系统三大要素的实现方式：操作控制方式、传输方式，特别是在锁闭/解锁方式及逻辑处理方面变化巨大。（1）操作及显示方式基本上没有改变对轨旁设备的控制方式，但在操作的具体实现方式，特别是在人机界面方面提供了比继电联锁丰富得多的选择。（2）传输方式现有各种类型的计算机联锁系统，在其计算机系统固有的电子传输方式之外，都不同程度地保留了继电联锁的电气传输方式，主要是室内外及站/场间通过电缆间进行的电气连接。采用电子传输方式，可大大提高系统的信息传输能力，有利于在构成进路的各基本单元之间建立更加密切的联系和更有效的约束。（3）智能化的逻辑运算用软件编程的方式，实现以进路控制为核心的联锁关系的逻辑处理，是相对于继电联锁改变最为彻底的一个方面。（4）接口功能接口功能与传输方式密切相关，计算机联锁的电子传输方式可以比较轻松地适应各种接口方式，其智能化的逻辑运算也可对任何复杂的接口关系进行处理。（5）信息记录和故障检测计算机联锁系统具有完备的信息记录与完善的故障检测功能，可以对故障或事故进行调查，以图像方式对记录数据进行再现，可以几倍甚至几十倍得提高分析效率。（6）平台与应用软件不考虑受控对象，仅就控制部分而言，对于复杂计算机系统，是由计算机平台和应用软件共同完成的。同一个平台既可用于构成车站联锁系统，也可用于构成车站列控中心系统，而车站联锁关系的变更，甚至仅仅通过数据的改变就可以实现。2.3轨旁设备接口（1）沿用6502电气集中主要轨旁设备的控制/表示电路目前，国内使用的计算机联锁系统与之接口的现场轨旁设备，主要是继电联锁系统所使用的动力式道岔转辙机、色灯信号机和轨道电路三大电气化基础设备。典型的计算机联锁系统，也都基本保留了道岔控制与表示、信号点灯电路等继电联锁系统的轨旁设备控制电路。（2）对继电器接点的采集与校验与继电联锁系统的布线逻辑需要使用多组接点不同，计算机控制系统的逻辑运算只需对一组接点的状态采集即可，通常是只对一组节点中的前接点进行状态采集。如通过对道岔定、反位表示的前接点进行逻辑校核，对信号控制命令与信号继电器的前接点进行逻辑校核等。2.4逻辑实现方法普通代数是数量间的运算，当我们的运算对象不是数字时，就要应用适于属性间运算的逻辑运算方法—布尔代数。布尔代数是用于执行逻辑运算的数学规则，逻辑变量及其函数只有“0”、“1”两种取值，用与表示两种不同的逻辑状态。继电器是两态元件，它只有“吸起”、“落下”两种状态，触点的闭合或断开可用逻辑值表示，本文就是运用布尔代数来分析联锁逻辑过程。第3章联锁功能模块及逻辑分析3.1功能需求3.1.1操作表示功能（1）操作信息处理对正常的操作形成有效的操作命令，以操作命令为基础，对当前信号设备状态进行逻辑判断，进而执行相关操作，并在人机界面上给出相应的表示。（2）表示信息处理对信号设备（道岔、信号机和轨道区段）的状态，在进路控制过程中实时的给出显示，反映联锁控制的逻辑过程；对信号设备的相关继电器状态，在进路控制过程中实时反映；以及信号设备的名称显示。另外，根据需要在计算机联锁控制系统中设置信号设备故障，并在界面上给出特殊的表示，模拟故障状态下的进路处理办法。3.1.2联锁控制功能联锁控制功能指基本的联锁功能，即进路控制功能，主要包括：1．建立进路按照一定的时序逻辑处理，保证选路过程的正确性，敌对进路必须相互照查，不得同时开通。2．进路的锁闭（1）检查进路锁闭的条件是否满足，条件满足后才对该进路进行锁闭。（2）进路的锁闭分为预先锁闭和接近锁闭。引导锁闭分为引导进路锁闭和引导总锁闭。3．信号的开放和关闭（1）正常办理进路或办理了重复开放手续，除引导信号外，满足以下条件方可开放：①进路空闲。②有关道岔位置准确。③进路已锁闭。④未施行人工解锁。⑤敌对进路未建立。⑥照查条件正确。（2）进站、出站信号机，在信号关闭后，不经再次办理，不得重复开放信号。（3）进站或接车进路信号机因故障不能正常开放信号，应使用引导信号接车进站。4．进路正常解锁信号关闭后对进路进行解锁。进路应随列车车列的正常运行而自动解锁。解锁时，有条件的区段均应满足三点检查条件，经3~4s后自动解锁。5．进路非正常解锁（1）取消进路或人工解锁进路预先锁闭状态下，办理取消进路应检查信号机是否关闭和进路是否空闲。在接近锁闭状态下，应办理人工解锁，自信号机关闭后延时再解锁。（2）引导进路使用后，需在人工确认后办理进路解锁。6．引导总锁闭接车进路上因道岔故障而失去位置信息，即DBJ和FBJ均落下时，不能以正常方式和引导进路方式接车，只能以引导总锁闭方式来引导列车进站。7．道岔的控制（1）道岔应能单独操纵或随进路的排列而自动选动，自动选动采用顺序启动的方式。道岔的单独操纵优先于进路的自动选动。（2）道岔要受进路锁闭、区段锁闭及人工锁闭的限制。（3）道岔在转换过程中，保证DBJ或FBJ失磁落下，使道岔处于无表示状态。（4）道岔转换完毕，应给出反映道岔位置的信息。3.2信号设备相关继电器状态联锁系统的联锁控制功能就是根据各信号设备的状态及其相关属性严格按照规定的联锁条件进行联锁运算，再由联锁运算结果改变信号设备的状态，从而实现进路控制功能，达到预定操作处理。计算机联锁信号对象状态值与继电联锁信号设备继电器组合相对应，本文的信号对象涉及到如下继电器。3.2.1信号机1．进站信号机①灯丝继电器（DJ）：平时处于吸起状态，反映红灯灯丝完好，对进站信号机来说，要求在信号开放以前必须检查红灯灯丝是否完整，即红灯确实在点灯状态。如果红灯灯丝处于断丝状态，不允许开放允许信号。②第二灯丝继电器（2DJ）：平时处于落下状态。存在站线接车时，2DJ励磁吸起。③列车信号继电器（LXJ）：平时处于落下状态。信号机开放信号时，LXJ励磁吸起。④通过信号继电器（TXJ）：平时处于落下状态。存在正线通过进路时，TXJ励磁吸起。⑤终端信号继电器（ZXJ）：平时处于落下状态。存在正线通过进路和正线接车进路时，ZXJ励磁吸起。2．出站信号机①灯丝继电器（DJ）：平时处于吸起状态，反映红灯灯丝完好。出站信号机在信号开放前不检查灯丝完整性。②第二灯丝继电器（2DJ）：平时处于落下状态。存在向次要方向发车进路时，2DJ励磁吸起。③终端信号继电器（ZXJ）：平时处于落下状态。存在向主要方向发车时，ZXJ励磁吸起。④照查继电器（ZCJ）：平时处于励磁吸起状态。实现对同一股道迎面敌对进路的照查，其落下状态反映已向相应股道排列了进路。当与股道邻接的道岔解锁后，才让ZCJ重新励磁吸起以解除对迎面敌对进路的锁闭。⑤列车信号继电器（LXJ）：平时处于落下状态。信号机开放信号时，LXJ励磁吸起。3.2.2道岔①定位表示继电器（DBJ）：道岔处于定位时，DBJ励磁吸起。②反位表示继电器（FBJ）：道岔处于反位时，FBJ励磁吸起。当道岔在转换或发生挤岔事故、停电或短线等故障时，必须保证DBJ和FBJ均失磁落下，使道岔处于无表示状态。③锁闭继电器（SJ）：平时处于吸起状态，反映道岔空闲。SJ落下时，道岔处于锁闭状态。3.2.3轨道电路①轨道继电器（DGJ）：平时处于吸起状态，反映区段空闲。区段占用或故障时，DGJ失磁落下。②区段检查继电器（QJJ）：平时处于落下状态。为实现进路锁闭而设置，QJJ吸起，为锁闭进路准备条件。③股道检查继电器（GJJ）：平时处于落下状态。GJJ的吸起配合ZCJ锁闭另一咽喉的敌对进路，以及参与取消进路和人工解锁进路。列车进入信号机内方，GJJ随之落下。3.3联锁功能模块逻辑分析对于基本的联锁软件，主要的联锁功能由进路选择模块、进路锁闭模块、信号开放模块、信号开放保持模块、正常解锁模块、取消进路模块以及其他功能模块组成。想要保证列车或调车车列在车站内安全运行，就必须保证列车或调车车列所经由进路的安全，即必须检查轨道电路区段内无车列占用，进路内的道岔是都处于锁闭状态，且始端信号机处于开放状态，然后列车或调车车列才能进入进路。随着列车或调车车列的出清，又必须将防护进路的始端信号机关闭，顺序将进路内的道岔和轨道电路区段解除锁闭，直至全部解锁，以便于排列其他进路。3.2.1进路选择模块由于车站联锁系统的进路办理操作采用基本进路按压始、终端双按钮，变更进路需要加按变更按钮的操作方式，选路就是依据按钮命令序列在具有相同始、终端但进路不同的多条进路中选择出基本进路或变更进路，逐项进行选路条件的检查并做出标记，确定进路上的选路条件是否具备、在系统内部对进路做出标记是进路选择过程的主要内容[8]。根据选路操作手续，进路选择模块的具体功能是：（1）根据选路时按下的按钮顺序，记录进路的始端和终端；（2）确定进路的性质和运行方向；（3）当所选进路内有车辆占用或与已选出的其他进路构成敌对进路时，所选进路不允许选出；（4）仅按压始终端按钮时，应自动选出与基本进路相符的道岔位置，禁止自动选出变通进路；当基本进路因故无法选出时，必须通过值班员的辅加操作才能选出变通进路，同时禁止自动选出基本进路；以本论文实验室峨眉山站X至SI的接车进路为例：图3-1X至SI的接车进路图3-2X至SI的进路选排逻辑①按压始终端按钮后，方向继电器LJJ励磁吸起以记录进路性质和方向，确定为列车接车进路。②如果所选进路在解锁状态，进路内各区段空闲，敌对进路未建立，按照从左至右的顺序依次使进路上各信号点和道岔点的相关继电器励磁吸起：XJXJ↑→1/31DCJ↑→5DCJ↑→SIJXJ↑,将道岔转换到进路要求的位置。③进路右端的SIJXJ吸起后，表明这条进路全部选出。至此，进路性质和方向以及道岔位置都已确定，方向继电器和各信号点的JXJ复原，选路过程结束。3.2.2进路锁闭与开放信号模块进路选择模块完成了从按压进路按钮开始到选出进路中的道岔位置为止的选路过程，当道岔位置等所有相关的进路建立条件都被满足后，进路即转入锁闭状态。除进路上的道岔、信号机和区段外，还必须把相关的防护道岔、特别是敌对信号和敌对进路都锁在不能开放和不能办理的状态。下面按阶段从转换道岔到开放信号的工作过程进行分析：图3-3进路锁闭与信号开放逻辑（一）转换道岔阶段根据进路选择模块选出的道岔位置，转换道岔到选定位置，通过定位表示继电器DBJ吸起或反位表示继电器FBJ吸起给出反映道岔实际位置的道岔表示信息。（二）选排一致性检查阶段道岔操纵继电器DCJ或FCJ励磁吸起后，由于某些原因，道岔未能转换到选定的位置，这时就存在着道岔实际位置与所选位置不一致的可能。因此，在对进路锁闭之前，需要对进路上的道岔进行选排一致性检查，确定道岔实际位置是否与所选位置一致，一致则对进路进行锁闭。（三）锁闭进路阶段在锁闭进路过程中，首先需要检查进路锁闭条件是否满足，条件满足后对该进路进行锁闭。进路锁闭条件包括：进路内各个轨道区段空闲、进路内所有道岔位置正确、与该进路敌对的本咽喉敌对进路和迎面咽喉敌对进路未建立[13]。锁闭进路就是将进路有关的轨道电路区段上的道岔锁闭，使得敌对进路不能建立。当进路锁闭条件满足后，进路上各区段的QJJ励磁吸起；QJJ吸起后，各区段1LJ和2LJ落下；接着相应区段SJ落下，实现对道岔的锁闭。如果所建立的进路是排向股道的进路，则本咽喉股道入口处的GJJ吸起，ZCJ落下，以实现对迎面敌对进路的锁闭。（四）开放信号阶段开放信号前，检查信号开放的有关联锁条件是否满足，如果满足则开放信号。3.2.3信号开放保持模块在信号机开放期间还需要实时、持续地检查相关的联锁条件。除去个别允许信号降级显示的故障情况外，无论进路的允许信号是否已经开放，当开放信号过程需要检查的任何相关联锁条件被破坏时，如进路内的区段未按正常的压入顺序占用、道岔失去表示等，进路均转为故障状态并予以保持，关闭已开放的信号；且在相关联锁条件恢复后，未经人工办理重复开放信号操作前不能自动重复开放任何允许信号。3.2.4正常解锁模块当进路锁闭，防护进路的信号机开放后，列车头部驶入进路使信号机自动关闭。在顺序占用和出清进路上的轨道电路区段后，各区段自动解锁。为了保证行车安全，正常解锁必须满足两个条件：①信号自动关闭；②利用三点检查法解锁进路。三点检查可分为对前一区段与本区段和对本区段与下一区段的两部分检查。前一部分检查的逻辑顺序应是：前一区段占用→本区段占用→前一区段出清→前一区段解锁、本区段出清；第二部分检查的逻辑顺序应是：本区段占用→下一区段占用→本区段出清。当这两部分条件都满足时，即可认为列车或车列已经顺序驶过本区段，且前一区段已经解锁，本区段可以正常解锁了。以实验室峨眉山站X→SI的接车进路为例说明正常解锁过程：图3-4X至SI的接车进路正常解锁过程如下：图3-5X至SI的接车进路正常解锁逻辑①列车压人1DG，1DGDGJ落下，使得1DGQJJ落下，同时SIGJJ落下，XLXJ落下，信号关闭。②列车压人5DG，5DGDGJ落下，使得5DGQJJ落下。列车离开5DG后延时3~4S，道岔1/31SJ吸起，1DG解锁。③列车压人IG，IGDGJ落下。延时3~4S后，道岔5SJ吸起，5DG解锁。④道岔5SJ吸起后，SIZCJ励磁吸起，解除对迎面敌对进路的锁闭，至此，该进路正常解锁结束。3.2.5取消进路模块信号开放后，接近区段未被占用时，想要取消或改变进路，可通过办理取消进路手续取消进路。取消进路，须符合以下条件：（1）进路处于预先锁闭状态；（2）防护信号机随着办理取消进路手续而关闭信号；（3）进路始终处于空闲状态。办理完取消进路手续后，若接近区段和进路空闲，自动关闭始端信号，在确认信号关闭后进路自动解锁。以接车进路为例，取消进路时进路内部分继电器动作情况如下：图3-6取消进路逻辑按压始端按钮后，股道GJJ落下，始端信号机LXJ落下，信号关闭。LXJ落下后，进路上各区段的QJJ落下，同时，依次使进路上各区段1LJ相继励磁并自闭，并使股道GJJ再次励磁吸起。GJJ吸起后，使得进路上各区段2LJ相继吸起并自闭，进路由远及近依次解锁。3.2.6其他功能模块1.人工延时解锁模块列车进入接近区段还未驶入进路，进路处于接近锁闭状态，要想取消进路，就必须通过人工解锁的方式来取消进路。办理完人工解锁手续，确认接近区段占用且进路空闲后，自动关闭始端信号。始端信号关闭后，接车进路和正线发车进路延时3min，侧向发车进路和调车进路延时30s再解锁。延时过程中要持续检查列车是否冒进入进路。延时结束后，若列车没有冒进入进路，则该进路自动解锁。2.重复开放信号模块当信号开放后，如果进路中的轨道电路出现故障（DGJ落下）或由于其他原因而关闭信号，进路还处于锁闭状态。若故障解除后又满足信号开放的条件，可以办理重复开放信号手续使信号重新开放。3.引导接车模块进路建立过程中，进路内方信号设备出现故障，导致进路无法建立，始端信号机不能开放；亦或是进路建立好之后，进路内方信号设备出现故障，导致始端信号机由开放转换为关闭，无法办理正常的接车手续。为了不影响行车安全，可以采用引导接车的方式引导列车进站。4.道岔操作模块联动道岔应能单独操纵或随进路的排列而自动选动。道岔的单独操纵应优先于进路自动选动。在道岔未受区段锁闭、进路锁闭和单独锁闭的条件下，可进行单独操纵。第4章联锁系统的实现4.1人机界面显示及含义借助VisualStudio2013，设计控件类（道岔、信号机和轨道区段），同时赋予控件部分继电器属性，例如轨道电路含有的继电器：DGJ、QJJ、GJJ；信号机含有的继电器：LXJ、DJ、2DJ、ZXJ、ZCJ、TXJ；道岔含有的继电器：DBJ、FBJ、SJ。这些信号设备的继电器将参与到进路控制过程当中，实现部分联锁控制功能。4.1.1人机界面显示图4-1人机界面左下角为操作命令区，右下角是各信号设备对象相关继电器的状态显示区域。在进路控制过程中或非进路操作过程中，动态的跟踪各信号设备的状态。4.1.2信号机信号机各继电器显示状态如下，通过右键菜单可以查看信号机的状态。1.进站信号机表4-1进站信号机状态表状态相关继电器状态描述常态DJ↑、LXJ↓红灯按规定速度通过正线LXJ↑、ZXJ↑、TXJ↑绿灯正线停车LXJ↑、ZXJ↑黄灯站线停车LXJ↑、2DJ↑双黄灯引导接车时LXJ↓、YXJ↑红白灯通过一个车场到达另一个车场LXJ↓、2DJ↑、ZXJ↑绿灯和黄灯灯丝故障DJ↓黑色灯光2.出站兼调车信号机表4-2出站信号机状态表状态相关继电器状态描述常态DJ↑、LXJ↓、DXJ↓红灯主要方向发车LXJ↑、ZXJ↑绿灯次要方向发车LXJ↑、ZXJ↓、2DJ↑双绿灯调车进路LXJ↓、YXJ↑月白灯灯丝故障DJ↓黑色灯光4.2.3道岔道岔各继电器显示状态如下，通过右键菜单可以查看道岔的状态。表4-3道岔状态表状态相关继电器状态描述道岔定位DBJ↑与所在区段显示一致道岔反位FBJ↑与所在区段显示一致四开状态DBJ↓、FBJ↓无表示，岔尖处有红色圆圈道岔锁闭SJ↓无表示4.2.4轨道区段轨道区段各继电器显示状态如下，通过右键菜单可以查看轨道区段的状态。表4-4轨道区段状态表状态相关继电器状态描述空闲DGJ↑、QJJ(GJJ)↓灰色光带进路锁闭DGJ↑、QJJ(GJJ)↑白色光带占用或故障DGJ↓红色光带进路建立后轨道故障QJJ(GJJ)↑绿色光带4.2联锁控制功能的实现联锁控制是通过进路与信号机、道岔及轨道电路区段等信号设备间的联锁关系，建立安全可靠的进路以完成车站的接发车作业以及调车作业等相关作业。操作命令包括进路操作命令和非进路操作命令，其中非进路操作命令能够实现道岔的单独操纵以及信号对象单元的故障设置和故障修复，可以直接对信号设备进行操作，改变信号设备的继电器状态，进而模拟故障状态下的进路控制过程。图4-1系统功能图本次联锁逻辑仿真包括进路选择模块、进路锁闭与信号开放模块、取消进路模块、引导进路模块、重复开放信号模块、人工解锁模块以及正常解锁模块。各个模块的相互关系如下图所示：图4-2模块联系图4.2.1进路选择功能依据始端的按钮命令，检查以该始端按钮为起点的可选排进路的合法性，进行相关联锁条件的检查。检查的主要内容有：相关进路上的区段空闲且无故障（DGJ吸起且QJJ落下），进路上的道岔未被封锁且未被进路锁闭（SJ吸起），防护道岔的位置条件或动作条件满足，进路上的信号在关闭状态（LXJ落下），相关的敌对信号条件、照查条件满足，进路上及相关的各基本对象未被其他进路所使用。按下终端按钮后，即确定了进路方向与性质，并选定了相关道岔点和信号点。当道岔点位置与进路要求位置不一致时，动作相应道岔，转换到正确位置；若一致，给出道岔表示信息（DBJ或FBJ呈吸起状态）。图4-3进路选排模块4.2.2进路锁闭与开放信号功能锁闭进路，是在转换的道岔全部到位并确认选、排一致性后将整条路锁闭，随后开放允许信号。由以下步骤顺序完成：（1）进路选排一致性检查：确认道岔实际位置与选排位置一致（DBJ或FBJ吸起）；（2）进路锁闭检查：进路内轨道电路区段空闲（DGJ吸起）、进路内道岔位置正确、与该进路敌对的本咽喉敌对进路和迎面咽喉敌对进路均未建立（ZCJ吸起）。其中任何一个条件不满足则无法建立进路；（3）锁闭进路：由始端顺序锁闭轨道电路区段（QJJ吸起），同时锁闭对应道岔（SJ落下）；对排向股道的进路，还需要锁闭本咽喉股道（GJJ吸起、ZCJ落下），实现对迎面敌对进路的锁闭，轨道电路显示白色光带；（4）开放信号：进路锁闭完成后，由列车信号继电器触发（LXJ吸起）始端信号机的开放，至此，进路建立完成。对于接车进路，信号开放前必须检查进站信号机红灯灯丝完整性。在进站信号机出现红灯灯丝断丝的情况下，不能开放进站信号机，且不能开放引导信号，需要值班员办理人工引导接车手续，反排调车进路。图4-4进路锁闭与开放信号模块4.2.3正常解锁功能三点检查中前两点之间的占用、出清顺序条件满足后，进入正常解锁模块。对前两点之间的解锁条件进行确认、检查，3~4S延时解锁，以确认待解锁区段出清状态的持续性，防止由于列车尾部“跳动”而提前错误解锁。正常解锁分为两步来实现：①列车头部越过防护信号机时立即关闭防护信号；②列车经三点检查后解锁区段及道岔。区段被占用时，显示为红光带（DGJ吸起）；区段出清还未解锁时，区段显示为绿色光带；列车出清并解锁前一区段后（QJJ落下），解锁区段恢复为灰色光带。三点检查法解锁区段和道岔：①列车占用过并出清前一区段；②在①的基础上，占用本区段（第一点占用并出清和第二点占用）；③出清本区段并占用后一个区段（第二点出清和第三点占用）；检查条件满足时，进路延时3~4S解锁区段和道岔，区段恢复为灰色光带。图4-5正常解锁模块4.2.4取消进路功能信号开放后，进路空闲且接近区段无车占用时，进路处于预先锁闭状态。这时想要解锁进路，通过取消进路的方式实现。取消进路的操作只能解除未处于接近锁闭的进路，而对已接近锁闭的进路只起到关闭信号的作用。取消进路前，需要检查：①进路是否存在，如果不存在进路，操作无效；②检查进路是否空闲（DGJ吸起）；③确认进路存在且空闲，检查接近区段是否有车占用，有车占用转入人工解锁模块；无车占用则满足取消进路条件；通过按压功能按钮“总取消”，再按压进路始端按钮取消进路。信号关闭同时轨道区段显示灰色光带，区段检查继电器（QJJ）和股道检查继电器（GJJ）均落下，锁闭继电器（SJ）励磁吸起，进路解锁完毕。图4-6取消进路模块4.2.5人工解锁功能信号开放后，列车未驶入进路但接近区段有车占用时，进路处于接近锁闭状态，这时想要解锁进路，可以通过人工解锁的方式实现。人工解锁进路前，需要检查：①进路是否存在，如果不存在进路，操作无效；②检查进路是否空闲（DGJ吸起）；③确认已有建立进路且进路空闲，检查接近区段是否有车占用，无车转入人工解锁模块；有车占用则满足人工解锁条件。通过按压人工解锁功能按钮，正确输入操作命令，立即关闭信号机并启动定时器，计时到时后，才对进路及其各个信号设备实施解锁处理，轨道电路区段显示灰色光带。图4-7人工解锁模块4.2.6重复开放信号功能信号开放后，区段空闲的情况下，当进路中的轨道电路出现故障，即DGJ落下，而导致信号关闭。当故障修复成功并确认进路空闲后，通过重复开放信号操作使得信号重开。图4-8重复开放信号模块4.2.7引导接车功能前面涉及的联锁功能都是针对已经建立好的、信号开放后的进路。当接车进路上道岔失去位置表示信息，即反映道岔位置的道岔定位表示继电器（DBJ）和道岔反位表示继电器（FBJ）均失磁落下时，只能以引导总锁闭方式来引导列车进站。图4-9引导总锁闭模块在进站信号机未开放允许信号之前，如果道岔失去位置表示信息，无法开放信号。在恢复道岔位置表示信息后，办理引导总锁闭手续，进站信号机开放允许灯光红白灯（HB）。4.3故障设置联锁仿真由于没有实际的现场信号设备，因此在设计过程中，需要提供对仿真站场中信号对象的直接操作，通过改变其相关状态值，模拟故障状态下的进路控制过程。例如在选排一条进路时，我们要检查进路上某一道岔是否处于四开位置、信号机灯丝是否断丝或轨道电路区段是否故障。通过发送故障命令，将相应信号对象的状态值即继电器状态做修改，以此来实现故障测试功能。4.3.1信号机故障正常状态下，信号机显示红色灯光。确认按下信号机故障按钮后，点击信号机，该信号机的灯丝继电器（DJ）落下，信号机显示为黑色。4.3.2道岔故障正常状态下，每组道岔的DBJ或FBJ呈吸起状态。在道岔未被锁闭的情况下，确认道岔故障按钮按下后，点击道岔位置，使得该道岔DBJ和FBJ均落下，道岔失去位置表示信息，岔尖显示红色圆圈，故障设置成功。4.3.3轨道区段故障正常状态下，轨道区段为灰色光带；当轨道区段故障或占用时，轨道区段为红光带。确认按下轨道区段故障按钮后，点击轨道区段，使得该轨道电路区段的轨道继电器（DGJ）落下，轨道区段显示红色光带，即轨道电路区段故障。第5章系统功能演示5.1排列进路排列X至S4的接车进路：（1）单击始端按钮“X”，以X为始端的可选排的进路终端按钮闪烁，提示可选排的进路；（2）单击终端按钮“S4”，确定接车进路X至S4，从左到右的顺序选出该进路上各信号点和道岔点，道岔位置与所建立进路要求位置不一致时，依次动作道岔。道岔转换过程中，DBJ和FBJ均失磁落下，使道岔处于无表示状态（如图5-1所示）；道岔转换到正确位置后，道岔表示灯显示黄色，表明1/3道岔转换至反位（如图5-2所示）；图5-11/3道岔转换图5-27道岔转换（3）道岔转换完毕后，在进路选排一致性和进路锁闭条件均满足的情况下，开始锁闭进路，轨道区段显示白色光带（图5-3）；图5-3进路锁闭（4）进路锁闭后，检查进站信号机X红灯灯丝是否完整，是则开放允许信号双黄灯。至此，X至S4的接车进路建立成功。图5-4进站信号机X开放信号5.2取消进路对已建立的X至S4的接车进路，演示取消进路：（1）单击功能按钮“取消进路”；（2）单击始端按钮“X”，进路取消，始端信号机X关闭信号，进路解锁；图5-5X至S4的取消进路5.3人工解锁当接车进路接近区段有车占用时，如图5-6所示，需采取人工解锁方式解锁进路：（1）按压功能按钮“人工解锁”，出现密码输入框，正确输入解锁密码；图5-6接近锁闭（2）按压始端按钮“X”，始端信号机X关闭允许信号，定时器开始延时，延时结束后，进路解锁。图5-7延时解锁5.4重复开放信号以建立好的X至S3的接车进路为例，始端信号机X开放允许信号后，1DG出现故障显示红色光带，始端信号机X关闭信号；图5-81DG故障，始端信号关闭（1）按压功能按钮“故障修复”，单击1DG，1DG故障修复完成；图5-91DG恢复正常（2）单击功能按钮“重复开放信号”，再单击始端信号机X，信号重新开放双黄灯，轨道区段显示白色光带。图5-10始端信号重新开放5.5正常解锁以X至SF的通过进路为例：（1）列车占用5DG，出清1DG（图5-11）；图5-11列车占用5DG，出清1DG（2）列车同时占用1DG和IG（图5-12）；图5-12列车同时占用5DG和IG（3）列车占用IG，出清5DG；然后1DG解锁，IG显示灰色光带（图5-13）。图5-13列车占用IG，出清5DG，1DG解锁5.6引导总锁闭以X至S3的接车进路为例，在信号开放前道岔1/3失去位置表示，通过引导总锁闭接车。在始端信号开放之前，1/3道岔失去位置表示信息，致使进站信号机X无法开放允许信号。如图5-14所示：图5-14道岔1/3失去位置表示（1）按压功能按钮“故障修复”，解除道岔1/3的故障，此时，道岔1/3恢复位置表示，按压功能按钮“引导总锁闭”，正确输入口令。图5-15引导总锁闭手续（2）再单击始端按钮“X”，始端信号机开放红白（HB）信号。图5-16X至S3开放引导信号5.7单独操纵道岔按压功能按钮“总反位”，再单击道岔1/3，道岔单独操纵到反位。图5-17单独操纵1/3道岔至反位总结与展望本论文分析了计算机联锁系统中的联锁控制功能，利用峨眉山站信号设备的继电器，分析联锁逻辑控制过程。针对实验室峨眉山站，在Windows平台下利用VisualStudio2013中的C#编程完成了计算机联锁的仿真。主要完成了以下工作：（1）对计算机联锁的发展做了一个简单的综述，然后介绍了计算机联锁的基本构成。从实验室峨眉山站出发，结合所学知识，分析本次联锁逻辑仿真的功能需求，对所提出的功能需求划分明确的功能模块；（2）对每一模块进行细致的逻辑分析。利用信号机、道岔、轨道区段的继电器，对进路选排模块、进路锁闭与开放信号模块、正常解锁模块、取消进路模块等进行联锁逻辑的分析，理清了其中的联锁逻辑关系；（3）用面向对象语言C#实现本文所提出的系统功能。从自定义控件到绘制站场，再到各个功能模块的编程实现，最终实现多个模块间的相互联系；（4）演示峨眉山站联锁系统中实现的所有功能，包括进路选排、进路锁闭与信号开放、正常解锁、取消进路、人工解锁、重复开放信号、引导总锁闭、单独操纵道岔、故障设置等功能。由于时间的限制，本次联锁仿真没能够涉及计算机联锁系统的全部功能，比如针对引导进路未能实现引导解锁的功能；逻辑通用设计不完善，对于峨眉山站的联锁逻辑的设计过于繁琐，警冲标导致寻找其中存在的错误比较困难。西南交通大学